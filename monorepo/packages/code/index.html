<!DOCTYPE html>
<html lang="en">
<head profile="http://www.w3.org/2005/10/profile">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <base href="/">
  <title>Instant React Editor</title>
  <style>
html, body, #root {
  height: 100%;
} 
/* Remove all the styles of the "User-Agent-Stylesheet", except for the 'display' property */
*:where(:not(iframe, canvas, img, svg, video):not(svg *)) {
  all: unset;
  display: revert;
}

/* Preferred box-sizing value */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/*
  Remove list styles (bullets/numbers)
  in case you use it with normalize.css
*/
ol, ul {
  list-style: none;
}

/* For images to not be able to exceed their container */
img {
  max-width: 100%;
}

/* Removes spacing between cells in tables */
table {
  border-collapse: collapse;
}

/* Revert the 'white-space' property for textarea elements on Safari */
textarea {
  white-space: revert;
}

  </style>
    <script type="importmap">
      {
    "imports": {
      "react/jsx-runtime": "https://spike.land/react.mjs",
      "react": "https://spike.land/react.mjs",
      "preact": "https://spike.land/react.mjs",
      "react-dom": "https://spike.land/react.mjs",
      "react-dom/server": "https://spike.land/react.mjs",
      "framer-motion": "https://spike.land/framer-motion.mjs",
      "@emotion/react": "https://spike.land/emotion.mjs",
      "@emotion/react/jsx-runtime": "https://spike.land/emotion.mjs",
      "@emotion/cache": "https://spike.land/emotion.mjs"
    }
  }
  
      </script>
</head>
<body>
  <script>     
  window.process = {
    env: {
      "NODE_ENV": "production"
    }};
  </script>
  <div id="root"></div>
  <script>
    
   /** startState **/


   const codeSpace = window.codeSpace || "coder";
   const address = window.address || "";
   window.codeSpace = codeSpace;
   if (!window.startState) {
     async()=>{
       const resp = await fetch("https://spike.land/live/"+codeSpace+"/session");
       window.startState = await resp.json();
       h(window.startState);
     }
   } else {
     h(window.startState);
   }


  
   function h(startState){
   document.getElementById("root").innerHTML =  startState.html;
   window.appStarted = new Promise((resolve)=>{
   window.appResolver=resolve});
 
  }
 
 </script>
  <script type="module">
    import {render} from "react-dom";
    import {run} from "./ws.mjs";

    if (!window.startState)  await  (async() =>{
       const resp = await fetch("https://spike.land/live/"+codeSpace+"/session");
       window.startState = await resp.json();
      //  h(window.startState);
     })();


    await run();
   </script> 
</body>
</html>