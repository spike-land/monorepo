import{c as b}from"./chunk-NOSP44TD.mjs";import{c as S,e as P}from"./chunk-6XRSRXUF.mjs";var C=S((L,A)=>{"use strict";function d(f){if(typeof f!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(f))}function h(f,e){for(var r="",i=0,t=-1,l=0,n,o=0;o<=f.length;++o){if(o<f.length)n=f.charCodeAt(o);else{if(n===47)break;n=47}if(n===47){if(!(t===o-1||l===1))if(t!==o-1&&l===2){if(r.length<2||i!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var s=r.lastIndexOf("/");if(s!==r.length-1){s===-1?(r="",i=0):(r=r.slice(0,s),i=r.length-1-r.lastIndexOf("/")),t=o,l=0;continue}}else if(r.length===2||r.length===1){r="",i=0,t=o,l=0;continue}}e&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+f.slice(t+1,o):r=f.slice(t+1,o),i=o-t-1;t=o,l=0}else n===46&&l!==-1?++l:l=-1}return r}function D(f,e){var r=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+i:r+f+i:i}var g={resolve:function(){for(var e="",r=!1,i,t=arguments.length-1;t>=-1&&!r;t--){var l;t>=0?l=arguments[t]:(i===void 0&&(i=process.cwd()),l=i),d(l),l.length!==0&&(e=l+"/"+e,r=l.charCodeAt(0)===47)}return e=h(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(d(e),e.length===0)return".";var r=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=h(e,!r),e.length===0&&!r&&(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return d(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];d(i),i.length>0&&(e===void 0?e=i:e+="/"+i)}return e===void 0?".":g.normalize(e)},relative:function(e,r){if(d(e),d(r),e===r||(e=g.resolve(e),r=g.resolve(r),e===r))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var t=e.length,l=t-i,n=1;n<r.length&&r.charCodeAt(n)===47;++n);for(var o=r.length,s=o-n,c=l<s?l:s,u=-1,a=0;a<=c;++a){if(a===c){if(s>c){if(r.charCodeAt(n+a)===47)return r.slice(n+a+1);if(a===0)return r.slice(n+a)}else l>c&&(e.charCodeAt(i+a)===47?u=a:a===0&&(u=0));break}var m=e.charCodeAt(i+a),k=r.charCodeAt(n+a);if(m!==k)break;m===47&&(u=a)}var v="";for(a=i+u+1;a<=t;++a)(a===t||e.charCodeAt(a)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+r.slice(n+u):(n+=u,r.charCodeAt(n)===47&&++n,r.slice(n))},_makeLong:function(e){return e},dirname:function(e){if(d(e),e.length===0)return".";for(var r=e.charCodeAt(0),i=r===47,t=-1,l=!0,n=e.length-1;n>=1;--n)if(r=e.charCodeAt(n),r===47){if(!l){t=n;break}}else l=!1;return t===-1?i?"/":".":i&&t===1?"//":e.slice(0,t)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');d(e);var i=0,t=-1,l=!0,n;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,s=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(c===47){if(!l){i=n+1;break}}else s===-1&&(l=!1,s=n+1),o>=0&&(c===r.charCodeAt(o)?--o===-1&&(t=n):(o=-1,t=s))}return i===t?t=s:t===-1&&(t=e.length),e.slice(i,t)}else{for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!l){i=n+1;break}}else t===-1&&(l=!1,t=n+1);return t===-1?"":e.slice(i,t)}},extname:function(e){d(e);for(var r=-1,i=0,t=-1,l=!0,n=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(s===47){if(!l){i=o+1;break}continue}t===-1&&(l=!1,t=o+1),s===46?r===-1?r=o:n!==1&&(n=1):r!==-1&&(n=-1)}return r===-1||t===-1||n===0||n===1&&r===t-1&&r===i+1?"":e.slice(r,t)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return D("/",e)},parse:function(e){d(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var i=e.charCodeAt(0),t=i===47,l;t?(r.root="/",l=1):l=0;for(var n=-1,o=0,s=-1,c=!0,u=e.length-1,a=0;u>=l;--u){if(i=e.charCodeAt(u),i===47){if(!c){o=u+1;break}continue}s===-1&&(c=!1,s=u+1),i===46?n===-1?n=u:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||s===-1||a===0||a===1&&n===s-1&&n===o+1?s!==-1&&(o===0&&t?r.base=r.name=e.slice(1,s):r.base=r.name=e.slice(o,s)):(o===0&&t?(r.name=e.slice(1,n),r.base=e.slice(1,s)):(r.name=e.slice(o,n),r.base=e.slice(o,s)),r.ext=e.slice(n,s)),o>0?r.dir=e.slice(0,o-1):t&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};g.posix=g;A.exports=g});var w=P(C());import{jsx as y}from"https://spike.land/dist/emotion.mjs";import{render as E}from"https://spike.land/dist/react.mjs";var W=async(f,e,r)=>{let{DraggableWindow:i}=await import("./DraggableWindow-6UNWZENO.mjs");console.log("renderPreviewWindow");let t=document.createElement("div"),l=document.getElementById("monacoEditor");l.style.opacity="0";let{App:n}=globalThis,o=(await import("./synthwave-WQA4XF3U.mjs")).default;document.body.style.backgroundImage=`url(${w.default.join("./dist/chunks/",o)} )`,E(y(i,{onShare:()=>open(`https://spike.land/api/room/${e}/public`),onRestore:()=>{f.editor.getModel().setValue(f.code)},position:f.mode==="window"?"fixed":"absolute",session:f,hashCode:b(),keepFullScreen:r,room:e},y(n,null)),t),document.body.appendChild(t),l.style.opacity="1",l.style.display="block"};export{W as renderPreviewWindow};
