version: "3.7"
services:
  projects:
    build: 
      context: node_modules/@devcontainer/focal-devcontainer
      args:
        USER: $USER
        DEVCONTAINER: focal-local
    tmpfs:
      - /home/$USER/tmpfs:exec
    privileged: true
    network_mode: host
    shm_size: 4gb
    volumes:
      - .:/home/$USER/projects:delegated
      - nodeModules:/home/$USER/projects/node_modules:delegated
      - /var/run/docker.sock:/var/run/docker.sock
      - yarn:/yarn
    ports:
      - "6080:6080"
      - "5901:5901"
volumes:
  yarn:
  nodeModules:
