{"version":3,"sources":["webpack:///../code/dist/importScript.js","webpack:///../code/dist/ipfsClient.js"],"names":["importScript","src","res","prefix","slice","window","document","head","querySelector","Promise","resolve","reject","s","createElement","onload","length","ret","forEach","x","Object","assign","onerror","appendChild","importCss","cssId","getElementById","getElementsByTagName","link","id","rel","type","href","media","ipfs","getIpfs","IpfsMessagePortClient","workerSrc","location","hostname","origin","SharedWorker","worker","from","port","Worker","MessageChannel","port1","port2","onmessage","e","postMessage","data"],"mappings":"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","file":"16-40f3e483eaead5aa6d88.js","sourcesContent":["/**\n *\n * @param {string} src\n * @param {*} res\n */\nexport const importScript = (src, res = []) => {\n    const prefix = src.slice(0, 8);\n    // if (prefix === \"https://\") {\n    return window.document.head.querySelector(`script[src=\"${src}\"]`) ||\n        new Promise(function (resolve, reject) {\n            const s = window.document.createElement(\"script\");\n            s.src = src;\n            // s.async = \"async\";\n            // s.type = \"application/javascript\";\n            s.onload = (() => {\n                if (res.length === 0) {\n                    resolve(window);\n                }\n                const ret = {};\n                res.forEach(\n                // deno-lint-ignore ban-ts-comment\n                //@ts-ignore\n                (x) => Object.assign(ret, window[x]));\n                resolve(ret);\n            });\n            s.onerror = reject;\n            window.document.head.appendChild(s);\n        });\n    // }\n};\n/**\n *\n * @param {string} src\n * @param {string} cssId\n */\nexport const importCss = (src, cssId) => {\n    if (!window.document.getElementById(cssId)) {\n        const head = window.document.getElementsByTagName(\"head\")[0];\n        const link = window.document.createElement(\"link\");\n        link.id = cssId;\n        link.rel = \"stylesheet\";\n        link.type = \"text/css\";\n        link.href = src;\n        link.media = \"all\";\n        head.appendChild(link);\n    }\n    return true;\n};\n","import { importScript } from \"./importScript.js\";\n//@ts-ignore\nlet ipfs;\nexport const getIpfs = async () => {\n    //@ts-ignore\n    if (ipfs)\n        return ipfs;\n    // @ts-ignore\n    const { IpfsMessagePortClient } = await importScript(\"https://unpkg.com/ipfs-message-port-client@0.4.3/dist/index.min.js\");\n    const workerSrc = window.location.hostname === \"blog.zed.vision\"\n        ? `https://blog.zed.vision/code/src/ipfsWorker.js`\n        : window.location.hostname === \"[::1]\"\n            ? `${location.href}src/ipfsWorker.js`\n            : `${location.origin}/src/ipfsWorker.js`;\n    if (typeof SharedWorker !== \"undefined\") {\n        const worker = new SharedWorker(workerSrc);\n        ipfs = IpfsMessagePortClient.from(worker.port);\n    }\n    else {\n        const worker = new Worker(workerSrc);\n        const { port1, port2 } = new MessageChannel();\n        port1.onmessage = function (e) {\n            worker.postMessage(e.data, [e.data]);\n        };\n        worker.onmessage = function (e) {\n            port1.postMessage(e.data, [e.data]);\n        };\n        ipfs = IpfsMessagePortClient.from(port2);\n    }\n    return ipfs;\n};\n"],"sourceRoot":""}