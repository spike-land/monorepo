{"version":3,"sources":["webpack:///../code/dist/importScript.js","webpack:///../code/dist/ipfs.client.js"],"names":["importScript","src","res","prefix","slice","window","document","head","querySelector","Promise","resolve","reject","s","createElement","onload","length","ret","forEach","x","Object","assign","onerror","appendChild","importCss","cssId","getElementById","getElementsByTagName","link","id","rel","type","href","media","ipfs","getIpfs","IpfsMessagePortClient","workerSrc","location","hostname","origin","console","log","SharedWorker","worker","from","port","Worker"],"mappings":"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","file":"16-a8491617b0a2da20f11e.js","sourcesContent":["/**\n *\n * @param {string} src\n * @param {*} res\n */\nexport const importScript = (src, res = []) => {\n    const prefix = src.slice(0, 8);\n    // if (prefix === \"https://\") {\n    return window.document.head.querySelector(`script[src=\"${src}\"]`) ||\n        new Promise(function (resolve, reject) {\n            const s = window.document.createElement(\"script\");\n            s.src = src;\n            // s.async = \"async\";\n            // s.type = \"application/javascript\";\n            s.onload = (() => {\n                if (res.length === 0) {\n                    resolve(window);\n                }\n                const ret = {};\n                res.forEach(\n                // deno-lint-ignore ban-ts-comment\n                //@ts-ignore\n                (x) => Object.assign(ret, window[x]));\n                resolve(ret);\n            });\n            s.onerror = reject;\n            window.document.head.appendChild(s);\n        });\n    // }\n};\n/**\n *\n * @param {string} src\n * @param {string} cssId\n */\nexport const importCss = (src, cssId) => {\n    if (!window.document.getElementById(cssId)) {\n        const head = window.document.getElementsByTagName(\"head\")[0];\n        const link = window.document.createElement(\"link\");\n        link.id = cssId;\n        link.rel = \"stylesheet\";\n        link.type = \"text/css\";\n        link.href = src;\n        link.media = \"all\";\n        head.appendChild(link);\n    }\n    return true;\n};\n","import { importScript } from \"./importScript.js\";\n//@ts-ignore\nlet ipfs;\nexport const getIpfs = async () => {\n    //@ts-ignore\n    if (ipfs)\n        return ipfs;\n    // @ts-ignore\n    const { IpfsMessagePortClient } = await importScript(\"https://unpkg.com/ipfs-message-port-client@0.4.3/dist/index.min.js\");\n    const workerSrc = window.location.hostname === \"blog.zed.vision\"\n        ? `https://blog.zed.vision/code/src/ipfs.shared.worker.js`\n        : window.location.hostname === \"[::1]\"\n            ? `${location.href}src/ipfs.shared.worker.js`\n            : `${location.origin}/src/ipfs.shared.worker.js`;\n    console.log(workerSrc);\n    if (typeof SharedWorker !== \"undefined\") {\n        console.log(\"FROM WORKER YEAAH\");\n        const worker = new SharedWorker(workerSrc);\n        ipfs = IpfsMessagePortClient.from(worker.port);\n    }\n    else {\n        const worker = new Worker(workerSrc);\n        ipfs = IpfsMessagePortClient.from(worker);\n    }\n    return ipfs;\n};\n"],"sourceRoot":""}