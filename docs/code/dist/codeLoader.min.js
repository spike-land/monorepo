async function je(r,i){try{const a=`https://code.zed.vision/keys/?prefix=${i}`,d=await fetch(a,{headers:{"content-type":"application/json;charset=UTF-8",API_KEY:r}}),w=await d.json();return w.keys}catch(a){return console.log(a),[]}}const Rt=je,bt=r=>{const i=()=>jsx(React.Fragment,null,jsx(motion.div,{css:`
            background: red;
            border: 4px solid red;
            border-radius: 8px;
          `,animate:{scale:1,top:1,left:600},dragElastic:.5,dragMomentum:!1,initial:{top:1,left:0,scale:.7},transition:{duration:.5},drag:!0,dragConstraints:{left:-window.innerWidth+200,right:0,bottom:window.innerHeight-200,top:0}},jsx("div",{css:`
      display: block;
      with: 100%;
      text-align: right;
      background: linear-gradient(0deg, darkred, red);
    `},jsx("button",{css:`
              background: darkred;
              margin-top: -4px;
              color: white;
              cursor: pointer;
              font-weight: bold;
              font-family: Roboto;
              padding: 8px 16px;
              outline: none;
              border: none;
              border-radius: 0px 8px 0px 0px;
            `,onClick:()=>r()},"\u{1F30E} SHARE")),jsx("div",{css:`  
      min-width: 200px;
      padding: 30px;
      max-width: 600px;
      background: white;
      max-height: 800px;
      border-radius: 0px 0px 8px 8px;
      overflow-y: overlay;
    `,id:"root"})));Ie.render(jsx(i),document.getElementById("dragabbleWindow"))};function St(){const r=new JSFrame,i=r.create({name:"Win",title:"",width:window.innerWidth/2-40,height:600,minWidth:300,minHeight:300,appearanceName:"material",appearanceParam:{titleBar:{color:"white",height:40,background:"#1e1e1e"}},style:{backgroundColor:"rgba(255,255,255,0.8)",overflow:"auto"},style:{backgroundColor:"rgba(0,0,0,0.8)",overflow:"hidden",width:"100%"},html:'<div id="container"></div>'});i.setPosition(window.innerWidth-32,32,"RIGHT_TOP"),i.setControl({maximizeButton:"maximizeButton",demaximizeButton:"restoreButton",minimizeButton:"minimizeButton",deminimizeButton:"deminimizeButton",hideButton:"closeButton",animation:!0,animationDuration:150}),i.control.on("hid",(a,d)=>{a.closeFrame()}),i.control.on("maximized",(a,d)=>{r.showToast({text:"Maximized"})}),i.control.on("demaximized",(a,d)=>{}),i.control.on("minimized",(a,d)=>{}),i.control.on("dminimized",(a,d)=>{}),i.show(),console.log(i)}function ae(r){return new Promise(function(i,a){var d;d=window.document.createElement("script"),d.src=r,d.onload=()=>i(window),d.onerror=a,window.document.head.appendChild(d)})}const qe=async r=>document.querySelector(`script[src="${r}"]`)||new Promise(function(i,a){const d=window.document.createElement("script");d.src=r,d.onload=i,d.onerror=a,window.document.head.appendChild(d)}),Ke=`import { useState } from "react";
import { motion } from "framer-motion";
import { css, Global } from "@emotion/react";;

const Slider = () => {
  const [sliderValue, setSlider] = useState(64);

  return <>
  <Global styles={css\`
      body{
          margin: 0;
          background: rgb(\${sliderValue},\${255-sliderValue},255);
          overflow: overlay;
        }  
    \`}/>
    <input max="128"
      css={\`
        appearance: none;
        width: 100%;
        height: 40px; 
        background: rgb(\${sliderValue*2},\${255-2*sliderValue},0); 
        outline: none; 
    \`} type="range"
      value={sliderValue} step="1"
      onChangeCapture={(e) => setSlider(Number(e.currentTarget.value))}>
    </input>
    <motion.p
      animate={{ fontSize: sliderValue + \`px\` }}>
      Example when the text gets bigger...
    </motion.p>
      <motion.p animate={{fontSize:128-sliderValue+"px"}}>
        ...or smaller
    </motion.p>
  </>
}

export default () => <>
  <Slider />
</>
`;async function kt(r){const i=await crypto.subtle.digest("SHA-256",r),a=Array.from(new Uint8Array(i)),d=a.map(w=>("00"+w.toString(16)).slice(-2)).join("");return d}(function(r,i){typeof exports=="object"&&typeof module!="undefined"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(r=r||self,i(r.Diff={}))})(this,function(r){"use strict";function i(){}i.prototype={diff:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.callback;typeof n=="function"&&(o=n,n={}),this.options=n;var c=this;function s(x){return o?(setTimeout(function(){o(void 0,x)},0),!0):x}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var l=t.length,u=e.length,p=1,f=l+u,g=[{newPos:-1,components:[]}],k=this.extractCommon(g[0],t,e,0);if(g[0].newPos+1>=l&&k+1>=u)return s([{value:this.join(t),count:t.length}]);function m(){for(var x=-1*p;x<=p;x+=2){var b=void 0,W=g[x-1],O=g[x+1],H=(O?O.newPos:0)-x;W&&(g[x-1]=void 0);var M=W&&W.newPos+1<l,_=O&&0<=H&&H<u;if(!M&&!_){g[x]=void 0;continue}if(!M||_&&W.newPos<O.newPos?(b=d(O),c.pushComponent(b.components,void 0,!0)):(b=W,b.newPos++,c.pushComponent(b.components,!0,void 0)),H=c.extractCommon(b,t,e,x),b.newPos+1>=l&&H+1>=u)return s(a(c,b.components,t,e,c.useLongestToken));g[x]=b}p++}if(o)(function x(){setTimeout(function(){if(p>f)return o();m()||x()},0)})();else for(;p<=f;){var E=m();if(E)return E}},pushComponent:function(e,t,n){var o=e[e.length-1];o&&o.added===t&&o.removed===n?e[e.length-1]={count:o.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,o){for(var c=t.length,s=n.length,l=e.newPos,u=l-o,p=0;l+1<c&&u+1<s&&this.equals(t[l+1],n[u+1]);)l++,u++,p++;return p&&e.components.push({count:p}),e.newPos=l,u},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function a(e,t,n,o,c){for(var s=0,l=t.length,u=0,p=0;s<l;s++){var f=t[s];if(f.removed){if(f.value=e.join(o.slice(p,p+f.count)),p+=f.count,s&&t[s-1].added){var g=t[s-1];t[s-1]=t[s],t[s]=g}}else{if(!f.added&&c){var k=n.slice(u,u+f.count);k=k.map(function(E,x){var b=o[p+x];return b.length>E.length?b:E}),f.value=e.join(k)}else f.value=e.join(n.slice(u,u+f.count));u+=f.count,f.added||(p+=f.count)}}var m=t[l-1];return l>1&&typeof m.value=="string"&&(m.added||m.removed)&&e.equals("",m.value)&&(t[l-2].value+=m.value,t.pop()),t}function d(e){return{newPos:e.newPos,components:e.components.slice(0)}}var w=new i;function v(e,t,n){return w.diff(e,t,n)}function j(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var L=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,C=/\S/,B=new i;B.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!C.test(e)&&!C.test(t)},B.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&L.test(t[n])&&L.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};function y(e,t,n){return n=j(n,{ignoreWhitespace:!0}),B.diff(e,t,n)}function h(e,t,n){return B.diff(e,t,n)}var I=new i;I.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var o=0;o<n.length;o++){var c=n[o];o%2&&!this.options.newlineIsToken?t[t.length-1]+=c:(this.options.ignoreWhitespace&&(c=c.trim()),t.push(c))}return t};function F(e,t,n){return I.diff(e,t,n)}function P(e,t,n){var o=j(n,{ignoreWhitespace:!0});return I.diff(e,t,o)}var S=new i;S.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function D(e,t,n){return S.diff(e,t,n)}var T=new i;T.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function A(e,t,n){return T.diff(e,t,n)}function N(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(t){return typeof t}:N=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(e)}function z(e){return $(e)||V(e)||ne(e)||Y()}function $(e){if(Array.isArray(e))return re(e)}function V(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function ne(e,t){if(!e)return;if(typeof e=="string")return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}function re(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le=Object.prototype.toString,J=new i;J.useLongestToken=!0,J.tokenize=I.tokenize,J.castInput=function(e){var t=this.options,n=t.undefinedReplacement,o=t.stringifyReplacer,c=o===void 0?function(s,l){return typeof l=="undefined"?n:l}:o;return typeof e=="string"?e:JSON.stringify(de(e,null,null,c),c,"  ")},J.equals=function(e,t){return i.prototype.equals.call(J,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function it(e,t,n){return J.diff(e,t,n)}function de(e,t,n,o,c){t=t||[],n=n||[],o&&(e=o(c,e));var s;for(s=0;s<t.length;s+=1)if(t[s]===e)return n[s];var l;if(le.call(e)==="[object Array]"){for(t.push(e),l=new Array(e.length),n.push(l),s=0;s<e.length;s+=1)l[s]=de(e[s],t,n,o,c);return t.pop(),n.pop(),l}if(e&&e.toJSON&&(e=e.toJSON()),N(e)==="object"&&e!==null){t.push(e),l={},n.push(l);var u=[],p;for(p in e)e.hasOwnProperty(p)&&u.push(p);for(u.sort(),s=0;s<u.length;s+=1)p=u[s],l[p]=de(e[p],t,n,o,p);t.pop(),n.pop()}else l=e;return l}var ue=new i;ue.tokenize=function(e){return e.slice()},ue.join=ue.removeEmpty=function(e){return e};function st(e,t,n){return ue.diff(e,t,n)}function pe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),o=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],c=[],s=0;function l(){var f={};for(c.push(f);s<n.length;){var g=n[s];if(/^(\-\-\-|\+\+\+|@@)\s/.test(g))break;var k=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(g);k&&(f.index=k[1]),s++}for(u(f),u(f),f.hunks=[];s<n.length;){var m=n[s];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(m))break;if(/^@@/.test(m))f.hunks.push(p());else{if(m&&t.strict)throw new Error("Unknown line "+(s+1)+" "+JSON.stringify(m));s++}}}function u(f){var g=/^(---|\+\+\+)\s+(.*)$/.exec(n[s]);if(g){var k=g[1]==="---"?"old":"new",m=g[2].split("	",2),E=m[0].replace(/\\\\/g,"\\");/^".*"$/.test(E)&&(E=E.substr(1,E.length-2)),f[k+"FileName"]=E,f[k+"Header"]=(m[1]||"").trim(),s++}}function p(){var f=s,g=n[s++],k=g.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),m={oldStart:+k[1],oldLines:typeof k[2]=="undefined"?1:+k[2],newStart:+k[3],newLines:typeof k[4]=="undefined"?1:+k[4],lines:[],linedelimiters:[]};m.oldLines===0&&(m.oldStart+=1),m.newLines===0&&(m.newStart+=1);for(var E=0,x=0;s<n.length&&!(n[s].indexOf("--- ")===0&&s+2<n.length&&n[s+1].indexOf("+++ ")===0&&n[s+2].indexOf("@@")===0);s++){var b=n[s].length==0&&s!=n.length-1?" ":n[s][0];if(b==="+"||b==="-"||b===" "||b==="\\")m.lines.push(n[s]),m.linedelimiters.push(o[s]||`
`),b==="+"?E++:b==="-"?x++:b===" "&&(E++,x++);else break}if(!E&&m.newLines===1&&(m.newLines=0),!x&&m.oldLines===1&&(m.oldLines=0),t.strict){if(E!==m.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(x!==m.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return m}for(;s<n.length;)l();return c}function at(e,t,n){var o=!0,c=!1,s=!1,l=1;return function u(){if(o&&!s){if(c?l++:o=!1,e+l<=n)return l;s=!0}if(!c)return s||(o=!0),t<=e-l?-l++:(c=!0,u())}}function Oe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=pe(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var o=e.split(/\r\n|[\n\v\f\r\x85]/),c=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],s=t.hunks,l=n.compareLine||function(Se,se,ge,ee){return se===ee},u=0,p=n.fuzzFactor||0,f=0,g=0,k,m;function E(Se,se){for(var ge=0;ge<Se.lines.length;ge++){var ee=Se.lines[ge],ke=ee.length>0?ee[0]:" ",xt=ee.length>0?ee.substr(1):ee;if(ke===" "||ke==="-"){if(!l(se+1,o[se],ke,xt)&&(u++,u>p))return!1;se++}}return!0}for(var x=0;x<s.length;x++){for(var b=s[x],W=o.length-b.oldLines,O=0,H=g+b.oldStart-1,M=at(H,f,W);O!==void 0;O=M())if(E(b,H+O)){b.offset=g+=O;break}if(O===void 0)return!1;f=b.offset+b.oldStart+b.oldLines}for(var _=0,oe=0;oe<s.length;oe++){var R=s[oe],q=R.oldStart+R.offset+_-1;_+=R.newLines-R.oldLines;for(var U=0;U<R.lines.length;U++){var K=R.lines[U],Z=K.length>0?K[0]:" ",be=K.length>0?K.substr(1):K,me=R.linedelimiters[U];if(Z===" ")q++;else if(Z==="-")o.splice(q,1),c.splice(q,1);else if(Z==="+")o.splice(q,0,be),c.splice(q,0,me),q++;else if(Z==="\\"){var he=R.lines[U-1]?R.lines[U-1][0]:null;he==="+"?k=!0:he==="-"&&(m=!0)}}}if(k)for(;!o[o.length-1];)o.pop(),c.pop();else m&&(o.push(""),c.push(`
`));for(var ie=0;ie<o.length-1;ie++)o[ie]=o[ie]+c[ie];return o.join("")}function ct(e,t){typeof e=="string"&&(e=pe(e));var n=0;function o(){var c=e[n++];if(!c)return t.complete();t.loadFile(c,function(s,l){if(s)return t.complete(s);var u=Oe(l,c,t);t.patched(c,u,function(p){if(p)return t.complete(p);o()})})}o()}function we(e,t,n,o,c,s,l){l||(l={}),typeof l.context=="undefined"&&(l.context=4);var u=F(n,o,l);u.push({value:"",lines:[]});function p(O){return O.map(function(H){return" "+H})}for(var f=[],g=0,k=0,m=[],E=1,x=1,b=function(O){var H=u[O],M=H.lines||H.value.replace(/\n$/,"").split(`
`);if(H.lines=M,H.added||H.removed){var _;if(!g){var oe=u[O-1];g=E,k=x,oe&&(m=l.context>0?p(oe.lines.slice(-l.context)):[],g-=m.length,k-=m.length)}(_=m).push.apply(_,z(M.map(function(he){return(H.added?"+":"-")+he}))),H.added?x+=M.length:E+=M.length}else{if(g)if(M.length<=l.context*2&&O<u.length-2){var R;(R=m).push.apply(R,z(p(M)))}else{var q,U=Math.min(M.length,l.context);(q=m).push.apply(q,z(p(M.slice(0,U))));var K={oldStart:g,oldLines:E-g+U,newStart:k,newLines:x-k+U,lines:m};if(O>=u.length-2&&M.length<=l.context){var Z=/\n$/.test(n),be=/\n$/.test(o),me=M.length==0&&m.length>K.oldLines;!Z&&me&&n.length>0&&m.splice(K.oldLines,0,"\\ No newline at end of file"),(!Z&&!me||!be)&&m.push("\\ No newline at end of file")}f.push(K),g=0,k=0,m=[]}E+=M.length,x+=M.length}},W=0;W<u.length;W++)b(W);return{oldFileName:e,newFileName:t,oldHeader:c,newHeader:s,hunks:f}}function lt(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var o=e.hunks[n];o.oldLines===0&&(o.oldStart-=1),o.newLines===0&&(o.newStart-=1),t.push("@@ -"+o.oldStart+","+o.oldLines+" +"+o.newStart+","+o.newLines+" @@"),t.push.apply(t,o.lines)}return t.join(`
`)+`
`}function ze(e,t,n,o,c,s,l){return lt(we(e,t,n,o,c,s,l))}function dt(e,t,n,o,c,s){return ze(e,e,t,n,o,c,s)}function ut(e,t){return e.length!==t.length?!1:ye(e,t)}function ye(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function pt(e){var t=xe(e.lines),n=t.oldLines,o=t.newLines;n!==void 0?e.oldLines=n:delete e.oldLines,o!==void 0?e.newLines=o:delete e.newLines}function ft(e,t,n){e=He(e,n),t=He(t,n);var o={};(e.index||t.index)&&(o.index=e.index||t.index),(e.newFileName||t.newFileName)&&(Me(e)?Me(t)?(o.oldFileName=fe(o,e.oldFileName,t.oldFileName),o.newFileName=fe(o,e.newFileName,t.newFileName),o.oldHeader=fe(o,e.oldHeader,t.oldHeader),o.newHeader=fe(o,e.newHeader,t.newHeader)):(o.oldFileName=e.oldFileName,o.newFileName=e.newFileName,o.oldHeader=e.oldHeader,o.newHeader=e.newHeader):(o.oldFileName=t.oldFileName||e.oldFileName,o.newFileName=t.newFileName||e.newFileName,o.oldHeader=t.oldHeader||e.oldHeader,o.newHeader=t.newHeader||e.newHeader)),o.hunks=[];for(var c=0,s=0,l=0,u=0;c<e.hunks.length||s<t.hunks.length;){var p=e.hunks[c]||{oldStart:Infinity},f=t.hunks[s]||{oldStart:Infinity};if(Ae(p,f))o.hunks.push(Ne(p,l)),c++,u+=p.newLines-p.oldLines;else if(Ae(f,p))o.hunks.push(Ne(f,u)),s++,l+=f.newLines-f.oldLines;else{var g={oldStart:Math.min(p.oldStart,f.oldStart),oldLines:0,newStart:Math.min(p.newStart+l,f.oldStart+u),newLines:0,lines:[]};mt(g,p.oldStart,p.lines,f.oldStart,f.lines),s++,c++,o.hunks.push(g)}}return o}function He(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return pe(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return we(void 0,void 0,t,e)}return e}function Me(e){return e.newFileName&&e.newFileName!==e.oldFileName}function fe(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function Ae(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function Ne(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function mt(e,t,n,o,c){var s={offset:t,lines:n,index:0},l={offset:o,lines:c,index:0};for($e(e,s,l),$e(e,l,s);s.index<s.lines.length&&l.index<l.lines.length;){var u=s.lines[s.index],p=l.lines[l.index];if((u[0]==="-"||u[0]==="+")&&(p[0]==="-"||p[0]==="+"))ht(e,s,l);else if(u[0]==="+"&&p[0]===" "){var f;(f=e.lines).push.apply(f,z(Q(s)))}else if(p[0]==="+"&&u[0]===" "){var g;(g=e.lines).push.apply(g,z(Q(l)))}else u[0]==="-"&&p[0]===" "?Re(e,s,l):p[0]==="-"&&u[0]===" "?Re(e,l,s,!0):u===p?(e.lines.push(u),s.index++,l.index++):ve(e,Q(s),Q(l))}We(e,s),We(e,l),pt(e)}function ht(e,t,n){var o=Q(t),c=Q(n);if(Ue(o)&&Ue(c)){if(ye(o,c)&&Ve(n,o,o.length-c.length)){var s;(s=e.lines).push.apply(s,z(o));return}else if(ye(c,o)&&Ve(t,c,c.length-o.length)){var l;(l=e.lines).push.apply(l,z(c));return}}else if(ut(o,c)){var u;(u=e.lines).push.apply(u,z(o));return}ve(e,o,c)}function Re(e,t,n,o){var c=Q(t),s=gt(n,c);if(s.merged){var l;(l=e.lines).push.apply(l,z(s.merged))}else ve(e,o?s:c,o?c:s)}function ve(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function $e(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var o=t.lines[t.index++];e.lines.push(o),t.offset++}}function We(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function Q(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var o=e.lines[e.index];if(n==="-"&&o[0]==="+"&&(n="+"),n===o[0])t.push(o),e.index++;else break}return t}function gt(e,t){for(var n=[],o=[],c=0,s=!1,l=!1;c<t.length&&e.index<e.lines.length;){var u=e.lines[e.index],p=t[c];if(p[0]==="+")break;if(s=s||u[0]!==" ",o.push(p),c++,u[0]==="+")for(l=!0;u[0]==="+";)n.push(u),u=e.lines[++e.index];p.substr(1)===u.substr(1)?(n.push(u),e.index++):l=!0}if((t[c]||"")[0]==="+"&&s&&(l=!0),l)return n;for(;c<t.length;)o.push(t[c++]);return{merged:o,changes:n}}function Ue(e){return e.reduce(function(t,n){return t&&n[0]==="-"},!0)}function Ve(e,t,n){for(var o=0;o<n;o++){var c=t[t.length-n+o].substr(1);if(e.lines[e.index+o]!==" "+c)return!1}return e.index+=n,!0}function xe(e){var t=0,n=0;return e.forEach(function(o){if(typeof o!="string"){var c=xe(o.mine),s=xe(o.theirs);t!==void 0&&(c.oldLines===s.oldLines?t+=c.oldLines:t=void 0),n!==void 0&&(c.newLines===s.newLines?n+=c.newLines:n=void 0)}else n!==void 0&&(o[0]==="+"||o[0]===" ")&&n++,t!==void 0&&(o[0]==="-"||o[0]===" ")&&t++}),{oldLines:t,newLines:n}}function wt(e){for(var t=[],n,o,c=0;c<e.length;c++)n=e[c],n.added?o=1:n.removed?o=-1:o=0,t.push([o,n.value]);return t}function yt(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];o.added?t.push("<ins>"):o.removed&&t.push("<del>"),t.push(vt(o.value)),o.added?t.push("</ins>"):o.removed&&t.push("</del>")}return t.join("")}function vt(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}r.Diff=i,r.applyPatch=Oe,r.applyPatches=ct,r.canonicalize=de,r.convertChangesToDMP=wt,r.convertChangesToXML=yt,r.createPatch=dt,r.createTwoFilesPatch=ze,r.diffArrays=st,r.diffChars=v,r.diffCss=A,r.diffJson=it,r.diffLines=F,r.diffSentences=D,r.diffTrimmedLines=P,r.diffWords=y,r.diffWordsWithSpace=h,r.merge=ft,r.parsePatch=pe,r.structuredPatch=we,Object.defineProperty(r,"__esModule",{value:!0})});async function jt(r){const i=await crypto.subtle.digest("SHA-256",r),a=Array.from(new Uint8Array(i)),d=a.map(w=>("00"+w.toString(16)).slice(-2)).join("");return d}async function $t(r){const i=new TextEncoder().encode(r),a=await jt(i);return a.substr(0,8)}const Le=async()=>{const{openDB:r}=await import("https://unpkg.com/idb@5.0.8/build/esm/index.js"),i=r("localZedCodeStore",1,{blocked(){},blocking(){},terminated(){},upgrade(a){a.createObjectStore("codeStore")}});return{async get(a,d="string"){const w=(await i).get("codeStore",a);if(!w)return null;if(d==="json")return JSON.parse(w);if(d==="string"){const v=await w;if(typeof v===d)return v;const j=new TextDecoder,L=j.decode(v);return L}return w},async put(a,d){const w=await(await i).get(a);if(d===w)return;{const j=await j(w,d),L=[j.b,...j.c].join();console.log(L)}let v;return typeof d!="string"?v=new TextDecoder().decode(d):v=d,(await i).put("codeStore",v,a)},async delete(a){return(await i).delete("codeStore",a)},async clear(){return(await i).clear("codeStore")},async keys(){return(await i).getAllKeys("codeStore")}}},Lt=(r,i)=>i.some(a=>r instanceof a);let Je,_e;function Et(){return Je||(Je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dt(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xe=new WeakMap,Ee=new WeakMap,Ge=new WeakMap,De=new WeakMap,Ce=new WeakMap;function Ct(r){if(Ee.has(r))return;const i=new Promise((a,d)=>{const w=()=>{r.removeEventListener("complete",v),r.removeEventListener("error",j),r.removeEventListener("abort",j)},v=()=>{a(),w()},j=()=>{d(r.error||new DOMException("AbortError","AbortError")),w()};r.addEventListener("complete",v),r.addEventListener("error",j),r.addEventListener("abort",j)});Ee.set(r,i)}const Be=r=>Ce.get(r),Bt=["get","getKey","getAll","getAllKeys","count"],Tt=["put","add","delete","clear"],Te=new Map;function Ye(r,i){if(!(r instanceof IDBDatabase&&!(i in r)&&typeof i=="string"))return;if(Te.get(i))return Te.get(i);const a=i.replace(/FromIndex$/,""),d=i!==a,w=Tt.includes(a);if(!(a in(d?IDBIndex:IDBObjectStore).prototype)||!(w||Bt.includes(a)))return;const v=async function(j,...L){const C=this.transaction(j,w?"readwrite":"readonly");let B=C.store;d&&(B=B.index(L.shift()));const y=await B[a](...L);return w&&await C.done,y};return Te.set(i,v),v}var Ie=window.ReactDOM;const Pe=()=>document.location.href.includes("zed.dev")?"https://code.zed.dev":"https://code.zed.vision";let Qe=!0,X="",G=0,It=0,Ze="",et="",te="",tt;async function Pt(r,i){try{const a=`https://code.zed.vision/keys/delete/?hash=${i}`,d=await fetch(a,{headers:{"content-type":"application/json;charset=UTF-8",API_KEY:r}});return!0}catch(a){return console.log(a),!1}}async function nt(r){try{const i=`https://code.zed.vision/?h=${r}`,a=await fetch(i,{headers:{"content-type":"application/json;charset=UTF-8"}}),d=await a.json();return d.code?d.code:""}catch(i){return console.log(i),""}}async function Ft(r){try{const i=`https://code.zed.vision/?h=${r}`,a=await fetch(i,{headers:{"content-type":"application/json;charset=UTF-8"}}),d=await a.json();return d.codeTranspiled?d.codeTranspiled:""}catch(i){return console.log(i),""}}async function ot(){const r=await Le(),i=await r.get("uuid");if(!i)if(window.location.href.includes("zed.dev"))r.put("uuid","1234");else{const a=await fetch("https://code.zed.vision/register"),d=await a.json();return r.put("uuid",d.uuid),d.uuid}return i}function rt(r="root"){const i=document.createElement("div"),a=document.getElementById(r);try{Ie.unmountComponentAtNode(a)}catch(d){console.error("Error in un-mount",d)}a?a.replaceWith(i):document.body.appendChild(i),i.id=r}const Ot=async({onChange:r,code:i,language:a})=>{const d=window.document.getElementById("container");if(!d){const C=document.getElementById("container");C.id="container",document.body.appendChild(C)}const w=a==="typescript"?"file:///main.tsx":"file:///main.html";let v;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)){const C=window.document.createElement("div");C.id="ace",window.document.body.appendChild(C),await ae("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.min.js"),a==="typescript"?await ae("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-typescript.min.js"):await ae("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-html.min.js"),await ae("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/theme-monokai.min.js"),window.document.getElementById("ace").style.setProperty("display","block"),d.style.setProperty("display","none"),v=window.ace.edit("ace"),v.getSession().setMode("ace/mode/typescript");const B=y=>setTimeout(()=>{let h=window.ace.edit("ace"),I=h.getTheme();I!=="ace/theme/monokai "&&(h.setOptions({fontSize:"14pt"}),h.setTheme("ace/theme/monokai"),B(2*y))},y);B(100),v.setValue(i),v.blur()}if(window.monaco===void 0){const C="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.21.2/min/vs",{require:B}=await ae(`${C}/loader.min.js`);B.config({paths:{vs:C}}),await new Promise(y=>B(["vs/editor/editor.main"],h=>{y(h)}))}const j=window.monaco,L={monaco:j,editor:j.editor.create(window.document.getElementById("container"),{formatOnType:!0,scrollbar:{horizontal:"hidden",verticalHasArrows:!0,verticalScrollbarSize:20},minimap:{enabled:!1},folding:!1,multiCursorModifier:"alt",wordWrap:"on",wordWrapBreakAfterCharacters:">([{]))],;} ",mouseWheelZoom:!1,wordWrapColumn:80,automaticLayout:!0,scrollBeyondLastLine:!1,autoIndent:"brackets",autoClosingQuotes:"always",padding:{bottom:300},lineNumbers:"on",autoClosingBrackets:"always",autoClosingOvertype:"always",suggest:{},codeLens:!0,autoSurround:"languageDefined",trimAutoWhitespace:!0,codeActionsOnSaveTimeout:100,model:j.editor.getModel(w)||j.editor.createModel(i,a,j.Uri.parse(w)),value:i,language:a,theme:"vs-dark"})};if(L.editor.onDidChangeModelContent(()=>r(L.editor.getValue())),v&&v.session.on("change",function(){const C=v.getValue();L.editor.setValue(C),r(C)}),v&&document.getElementById("container").replaceWith(document.getElementById("ace")),L.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!0,noSemanticValidation:!0,noSyntaxValidation:!0}),a==="typescript"){const C=[{name:"react",url:"https://unpkg.com/@types/react@17.0.0/index.d.ts",depend:["global","csstype","react-dom","prop-types"]},{name:"global",url:"https://unpkg.com/@types/react@17.0.0/global.d.ts",depend:[]},{name:"prop-types",url:"https://unpkg.com/@types/prop-types@15.7.3/index.d.ts",depend:[]},{name:"react-dom",url:"https://unpkg.com/@types/react-dom@17.0.0/index.d.ts",depend:[]},{name:"csstype",url:"https://unpkg.com/csstype@3.0.5/index.d.ts",depend:[]},{name:"@emotion/styled/base.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/base.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/styled/index.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/index.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/cache/index.d.ts",url:"https://unpkg.com/@emotion/cache@11.0.0/types/index.d.ts",depend:["@emotion/utils"]},{name:"@emotion/react/index.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/index.d.ts",depend:["@emotion/cache"]},{name:"@emotion/react/jsx-namespace.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/jsx-namespace.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/css-prop.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/css-prop.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/helper.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/helper.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/theming.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/theming.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/serialize/index.d.ts",url:"https://unpkg.com/@emotion/serialize@1.0.0/types/index.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/utils/index.d.ts",url:"https://unpkg.com/@emotion/utils@1.0.0/types/index.d.ts",depend:[]},{name:"framer-motion",url:"https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.d.ts",depend:[]},{name:"popmotion",url:"https://unpkg.com/browse/popmotion@9.0.1/lib/index.d.ts"}],B=C.map(({name:y,url:h})=>(async()=>L.monaco.languages.typescript.typescriptDefaults.addExtraLib(await(await fetch(h)).text(),y.includes("@emotion")?`file:///node_modules/${y}`:`file:///node_modules/@types/${y}/index.d.ts`))());return L.monaco.languages.typescript.typescriptDefaults.setCompilerOptions({target:L.monaco.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,allowUmdGlobalAccess:!0,strict:!0,allowJs:!0,noEmitOnError:!0,allowSyntheticDefaultImports:!0,moduleResolution:L.monaco.languages.typescript.ModuleResolutionKind.Nodejs,module:L.monaco.languages.typescript.ModuleKind.CommonJS,noEmit:!0,typeRoots:["node_modules/@types"],jsx:"react-jsx",esModuleInterop:!0}),await Promise.all(B),L.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!1,noSemanticValidation:!1,noSyntaxValidation:!1}),L}};async function zt(r){const i=new TextEncoder().encode(r),a=await kt(i);return a.substr(0,8)}export const getProjects=async()=>{const r=await ot(),i=await Le(),a=await i.get(r,"json");return a||(await i.put(r,JSON.stringify([])),[])};export async function run(r="window"){const i=await Le(),a=await ot();async function d(y,h,I=!1){const F=await je(y,h);F.map(P=>P.name).map(async P=>{const S=await nt(P);if(!S)return"";const D=await Ft(P);rt("root");let T;try{if(T=B(S),T!==D){const A=/setInterval/gi,N="///",z=/debugger/gi,$="///";Ie.unmountComponentAtNode(document.getElementById("root")),w(T.replaceAll(A,N).replaceAll(z,$));const V=document.getElementById("root").innerHTML;rt("root"),w(D.replaceAll(A,N).replaceAll(z,$));const ne=document.getElementById("root").innerHTML;ne!==V&&(console.log({hash:P,code:S,html1:ne,html2:V,transpiled1:D,transpiled2:T}),I&&await Pt(y,P))}}catch(A){console.error({hash:P,code:S,transpiled:T})}})}Object.assign(window,{getKeys:je,getCode:nt,restartCode:w,regenerate:d}),qe("diffLoader.js"),r==="editor"&&St(),r=="window"&&bt(async()=>{const y=await tt();window.open(y)}),await qe("https://unpkg.com/@babel/standalone@7.12.9/babel.min.js"),(async()=>{const y=await v();te=y;const h=await Ot({language:"typescript",code:y,onChange:I});function I(S){if(!h)return;if(X=S,!G)P(X);else{const D=S,T=setInterval(()=>{(S!==X||!G)&&clearInterval(T),G||P(X)},100)}}async function F(){if(!h||!h.monaco)return;const S=h.monaco.Uri.parse("file:///main.tsx"),D=await h.monaco.languages.typescript.getTypeScriptWorker(),T=await(await D(S)).getSemanticDiagnostics("file:///main.tsx"),A=await(await D(S)).getCompilerOptionsDiagnostics("file:///main.tsx"),N=await(await D(S)).getSyntacticDiagnostics("file:///main.tsx");return[...T,...A,...N]}async function P(S){if(G===1)return;try{G=1;const D=await F(),T=document.getElementById("error");if(G=0,S!==X)return;if(D&&D.length){if(X!=S)return;if(Ze===S)return;const A=await diff(te,S);if(A.c.length<=3){h.monaco.editor.setTheme("hc-black");return}T.innerHTML=D[0].messageText.toString(),T.style.display="block",Ze=S;return}te=S,T.style.display="none",h.monaco.editor.setTheme("vs-dark"),It=0,G=0,w(B(S))}catch(D){if(G=0,S!==X)return;h.monaco.editor.setTheme("vs-light"),setTimeout(()=>{h.monaco.editor.setTheme("hc-black")},50),console.error(D)}}})(),w(B(await v()));async function w(y){const h=/import/gi,I="///",F=`
    Object.assign(window, React);
    if (window.Motion) {
        Object.assign(window, window.Motion);
    }
    if (window.emotionStyled){
      window.styled= window.emotionStyled;
    }
    ;
    `+y.replaceAll(h,I).replace("export default","DefaultElement = "),P=async()=>{const S=new Function("code",`return function(){  
          let DefaultElement;
        
        ${F}

                return ReactDOM.render(jsx(DefaultElement), document.getElementById("root"));
      }`)();S(),tt=async()=>{const D=new Function("code",`return function(){
            let DefaultElement;
  
          ${F}
  
                  return ReactDOMServer.renderToString(jsx(DefaultElement));
        }`)(),T=D(),A=Array.from(document.querySelector("head > style[data-emotion=css]").sheet.cssRules).map(Y=>Y.cssText).filter(Y=>T.includes(Y.substring(3,8))).join(`
  `);let N;if(F.includes("body{")){const Y=F.indexOf("body{"),le=F.slice(Y),J=le.indexOf("}");N=le.slice(0,J+1)}let z="",$="";F.includes("Motion")&&(z='<script crossorigin src="https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.js"></script>',$="const {motion} = Motion");const V=`<!DOCTYPE html>
        <html lang="en">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <head profile="http://www.w3.org/2005/10/profile">
        <link rel="icon" 
              type="image/png"
              href="https://zed.vision/favicon.ico">
        <style>
        ${N}
        ${A}
        </style>
        </head>
        <body>
        <div id="root">
        ${T}
        </div>
        <script crossorigin src="https://unpkg.com/react@17.0.1/umd/react.production.min.js"></script>
        ${z}
        <script crossorigin src="https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/react@11.1.1/dist/emotion-react.umd.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/styled@11.0.0/dist/emotion-styled.umd.min.js"></script>
        <script type="module">
        Object.assign(window, emotionReact);

       const styled = window["emotionStyled"];

        let DefaultElement;

        ${F}

        ReactDOM.hydrate(jsx(DefaultElement), document.body.children[0]);
        </script>
        </body>
        </html>
        `,ne=await L(V),re=await C(ne);return re}};if(!Qe){const S=async D=>{if(!location.origin.includes("zed."))return;if(D!==te)return;if(et===D)return;et=D;const T={codeTranspiled:B(te),code:te},A=JSON.stringify(T),N=new Request(Pe(),{body:A,method:"POST",headers:{"content-type":"application/json;charset=UTF-8"}}),z=fetch(N),$=await zt(A);try{const V=await i.get("codeBoXHash2");V!==$&&(await i.put("codeBoXHash2",$),await i.put($,te),j("h",$))}catch(V){}await z};S(X)}Qe=!1,P()}async function v(){const y=new URLSearchParams(window.location.search),h=y.get("h")||await i.get("codeBoXHash2");if(h){const I=await i.get(h);if(I)return I;let F;try{const P=await fetch(Pe()+"/?h="+h);F=await P.json()}catch(P){return console.error(P),Ke}return F.code}return Ke}function j(y,h){const I=new URLSearchParams(window.location.search);I.set(y,h),window.history.replaceState({},"",decodeURIComponent(`${window.location.pathname}?${I}`))}function L(y){const h=new Blob([y],{type:"text/html"});return h}async function C(y){const h=Pe(),I=new Request(h,{body:y,method:"POST",headers:{"content-type":"text/html;charset=UTF-8",SHARE:"true"}}),F=await fetch(I),{hash:P}=await F.json();return`${h}/${P}`}function B(y){const{transform:h}=window.Babel;return h(`/** @jsx jsx */

  Object.assign(window, React);
  `+y,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code}}function Ht(r){const i=new Promise((a,d)=>{const w=()=>{r.removeEventListener("success",v),r.removeEventListener("error",j)},v=()=>{a(ce(r.result)),w()},j=()=>{d(r.error),w()};r.addEventListener("success",v),r.addEventListener("error",j)});return i.then(a=>{a instanceof IDBCursor&&Xe.set(a,r)}).catch(()=>{}),Ce.set(i,r),i}let Fe={get(r,i,a){if(r instanceof IDBTransaction){if(i==="done")return Ee.get(r);if(i==="objectStoreNames")return r.objectStoreNames||Ge.get(r);if(i==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return ce(r[i])},set(r,i,a){return r[i]=a,!0},has(r,i){return r instanceof IDBTransaction&&(i==="done"||i==="store")?!0:i in r}};function Mt(r){Fe=r(Fe)}function At(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(i,...a){const d=r.call(Be(this),i,...a);return Ge.set(d,i.sort?i.sort():[i]),ce(d)}:Dt().includes(r)?function(...i){return r.apply(Be(this),i),ce(Xe.get(this))}:function(...i){return ce(r.apply(Be(this),i))}}function Nt(r){return typeof r=="function"?At(r):(r instanceof IDBTransaction&&Ct(r),Lt(r,Et())?new Proxy(r,Fe):r)}function ce(r){if(r instanceof IDBRequest)return Ht(r);if(De.has(r))return De.get(r);const i=Nt(r);return i!==r&&(De.set(r,i),Ce.set(i,r)),i}Mt(r=>({...r,get:(i,a,d)=>Ye(i,a)||r.get(i,a,d),has:(i,a)=>!!Ye(i,a)||r.has(i,a)}));
