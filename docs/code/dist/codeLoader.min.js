const b="0123456789abcdef".split(""),bt=[-2147483648,8388608,32768,128],U=[24,16,8,0],N=[];class qt{#c;#s;#a;#e;#u;#d;#l;#t=1732584193;#n=4023233417;#i=2562383102;#o=271733878;#r=3285377520;#f=0;constructor(n=!1){this.init(n)}init(n){n?(N[0]=N[16]=N[1]=N[2]=N[3]=N[4]=N[5]=N[6]=N[7]=N[8]=N[9]=N[10]=N[11]=N[12]=N[13]=N[14]=N[15]=0,this.#c=N):this.#c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.#t=1732584193,this.#n=4023233417,this.#i=2562383102,this.#o=271733878,this.#r=3285377520,this.#s=this.#a=this.#e=this.#u=0,this.#d=this.#l=!1}update(n){if(this.#d)return this;let o;n instanceof ArrayBuffer?o=new Uint8Array(n):o=n;let s=0;const d=o.length,c=this.#c;for(;s<d;){let l;if(this.#l&&(this.#l=!1,c[0]=this.#s,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),typeof o!="string")for(l=this.#a;s<d&&l<64;++s)c[l>>2]|=o[s]<<U[l++&3];else for(l=this.#a;s<d&&l<64;++s){let h=o.charCodeAt(s);h<128?c[l>>2]|=h<<U[l++&3]:h<2048?(c[l>>2]|=(192|h>>6)<<U[l++&3],c[l>>2]|=(128|h&63)<<U[l++&3]):h<55296||h>=57344?(c[l>>2]|=(224|h>>12)<<U[l++&3],c[l>>2]|=(128|h>>6&63)<<U[l++&3],c[l>>2]|=(128|h&63)<<U[l++&3]):(h=65536+((h&1023)<<10|o.charCodeAt(++s)&1023),c[l>>2]|=(240|h>>18)<<U[l++&3],c[l>>2]|=(128|h>>12&63)<<U[l++&3],c[l>>2]|=(128|h>>6&63)<<U[l++&3],c[l>>2]|=(128|h&63)<<U[l++&3])}this.#f=l,this.#e+=l-this.#a,l>=64?(this.#s=c[16],this.#a=l-64,this.hash(),this.#l=!0):this.#a=l}return this.#e>4294967295&&(this.#u+=this.#e/4294967296>>>0,this.#e=this.#e>>>0),this}finalize(){if(this.#d)return;this.#d=!0;const n=this.#c,o=this.#f;n[16]=this.#s,n[o>>2]|=bt[o&3],this.#s=n[16],o>=56&&(this.#l||this.hash(),n[0]=this.#s,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.#u<<3|this.#e>>>29,n[15]=this.#e<<3,this.hash()}hash(){let n=this.#t,o=this.#n,s=this.#i,d=this.#o,c=this.#r,l,h,m;const y=this.#c;for(h=16;h<80;++h)m=y[h-3]^y[h-8]^y[h-14]^y[h-16],y[h]=m<<1|m>>>31;for(h=0;h<20;h+=5)l=o&s|~o&d,m=n<<5|n>>>27,c=m+l+c+1518500249+y[h]>>>0,o=o<<30|o>>>2,l=n&o|~n&s,m=c<<5|c>>>27,d=m+l+d+1518500249+y[h+1]>>>0,n=n<<30|n>>>2,l=c&n|~c&o,m=d<<5|d>>>27,s=m+l+s+1518500249+y[h+2]>>>0,c=c<<30|c>>>2,l=d&c|~d&n,m=s<<5|s>>>27,o=m+l+o+1518500249+y[h+3]>>>0,d=d<<30|d>>>2,l=s&d|~s&c,m=o<<5|o>>>27,n=m+l+n+1518500249+y[h+4]>>>0,s=s<<30|s>>>2;for(;h<40;h+=5)l=o^s^d,m=n<<5|n>>>27,c=m+l+c+1859775393+y[h]>>>0,o=o<<30|o>>>2,l=n^o^s,m=c<<5|c>>>27,d=m+l+d+1859775393+y[h+1]>>>0,n=n<<30|n>>>2,l=c^n^o,m=d<<5|d>>>27,s=m+l+s+1859775393+y[h+2]>>>0,c=c<<30|c>>>2,l=d^c^n,m=s<<5|s>>>27,o=m+l+o+1859775393+y[h+3]>>>0,d=d<<30|d>>>2,l=s^d^c,m=o<<5|o>>>27,n=m+l+n+1859775393+y[h+4]>>>0,s=s<<30|s>>>2;for(;h<60;h+=5)l=o&s|o&d|s&d,m=n<<5|n>>>27,c=m+l+c-1894007588+y[h]>>>0,o=o<<30|o>>>2,l=n&o|n&s|o&s,m=c<<5|c>>>27,d=m+l+d-1894007588+y[h+1]>>>0,n=n<<30|n>>>2,l=c&n|c&o|n&o,m=d<<5|d>>>27,s=m+l+s-1894007588+y[h+2]>>>0,c=c<<30|c>>>2,l=d&c|d&n|c&n,m=s<<5|s>>>27,o=m+l+o-1894007588+y[h+3]>>>0,d=d<<30|d>>>2,l=s&d|s&c|d&c,m=o<<5|o>>>27,n=m+l+n-1894007588+y[h+4]>>>0,s=s<<30|s>>>2;for(;h<80;h+=5)l=o^s^d,m=n<<5|n>>>27,c=m+l+c-899497514+y[h]>>>0,o=o<<30|o>>>2,l=n^o^s,m=c<<5|c>>>27,d=m+l+d-899497514+y[h+1]>>>0,n=n<<30|n>>>2,l=c^n^o,m=d<<5|d>>>27,s=m+l+s-899497514+y[h+2]>>>0,c=c<<30|c>>>2,l=d^c^n,m=s<<5|s>>>27,o=m+l+o-899497514+y[h+3]>>>0,d=d<<30|d>>>2,l=s^d^c,m=o<<5|o>>>27,n=m+l+n-899497514+y[h+4]>>>0,s=s<<30|s>>>2;this.#t=this.#t+n>>>0,this.#n=this.#n+o>>>0,this.#i=this.#i+s>>>0,this.#o=this.#o+d>>>0,this.#r=this.#r+c>>>0}hex(){this.finalize();const n=this.#t,o=this.#n,s=this.#i,d=this.#o,c=this.#r;return b[n>>28&15]+b[n>>24&15]+b[n>>20&15]+b[n>>16&15]+b[n>>12&15]+b[n>>8&15]+b[n>>4&15]+b[n&15]+b[o>>28&15]+b[o>>24&15]+b[o>>20&15]+b[o>>16&15]+b[o>>12&15]+b[o>>8&15]+b[o>>4&15]+b[o&15]+b[s>>28&15]+b[s>>24&15]+b[s>>20&15]+b[s>>16&15]+b[s>>12&15]+b[s>>8&15]+b[s>>4&15]+b[s&15]+b[d>>28&15]+b[d>>24&15]+b[d>>20&15]+b[d>>16&15]+b[d>>12&15]+b[d>>8&15]+b[d>>4&15]+b[d&15]+b[c>>28&15]+b[c>>24&15]+b[c>>20&15]+b[c>>16&15]+b[c>>12&15]+b[c>>8&15]+b[c>>4&15]+b[c&15]}toString(){return this.hex()}digest(){this.finalize();const n=this.#t,o=this.#n,s=this.#i,d=this.#o,c=this.#r;return[n>>24&255,n>>16&255,n>>8&255,n&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255,d>>24&255,d>>16&255,d>>8&255,d&255,c>>24&255,c>>16&255,c>>8&255,c&255]}array(){return this.digest()}arrayBuffer(){this.finalize();const n=new ArrayBuffer(20),o=new DataView(n);return o.setUint32(0,this.#t),o.setUint32(4,this.#n),o.setUint32(8,this.#i),o.setUint32(12,this.#o),o.setUint32(16,this.#r),n}}function Gt(r,n=""){if(!r)throw new DenoStdInternalError(n)}const Kt="00000000-0000-0000-0000-000000000000",St=r=>{const n=()=>jsx(React.Fragment,null,jsx(motion.div,{css:`
            background: red;
            border: 4px solid red;
            border-radius: 8px;
          `,animate:{scale:1,top:1,left:600},dragElastic:.5,dragMomentum:!1,initial:{top:1,left:0,scale:.7},transition:{duration:.5},drag:!0,dragConstraints:{left:-window.innerWidth+200,right:0,bottom:window.innerHeight-200,top:0}},jsx("div",{css:`
      display: block;
      with: 100%;
      text-align: right;
      background: linear-gradient(0deg, darkred, red);
    `},jsx("button",{css:`
              background: darkred;
              margin-top: -4px;
              color: white;
              cursor: pointer;
              font-weight: bold;
              font-family: Roboto;
              padding: 8px 16px;
              outline: none;
              border: none;
              border-radius: 0px 8px 0px 0px;
            `,onClick:()=>r()},"\u{1F30E} SHARE")),jsx("div",{css:`  
      min-width: 200px;
      padding: 30px;
      max-width: 600px;
      background: white;
      max-height: 800px;
      border-radius: 0px 0px 8px 8px;
      overflow-y: overlay;
    `,id:"root"})));Ht.render(jsx(n),pe.getElementById("dragabbleWindow"))};function kt(){const r=new JSFrame,n=r.create({name:"Win",title:"",width:window.innerWidth/2-40,height:600,minWidth:300,minHeight:300,appearanceName:"material",appearanceParam:{titleBar:{color:"white",height:40,background:"#1e1e1e"}},style:{backgroundColor:"rgba(255,255,255,0.8)",overflow:"auto"},style:{backgroundColor:"rgba(0,0,0,0.8)",overflow:"hidden",width:"100%"},html:'<div id="container"></div>'});n.setPosition(window.innerWidth-32,32,"RIGHT_TOP"),n.setControl({maximizeButton:"maximizeButton",demaximizeButton:"restoreButton",minimizeButton:"minimizeButton",deminimizeButton:"deminimizeButton",hideButton:"closeButton",animation:!0,animationDuration:150}),n.control.on("hid",(o,s)=>{o.closeFrame()}),n.control.on("maximized",(o,s)=>{r.showToast({text:"Maximized"})}),n.control.on("demaximized",(o,s)=>{}),n.control.on("minimized",(o,s)=>{}),n.control.on("dminimized",(o,s)=>{}),n.show(),console.log(n)}function fe(r){return new Promise(function(n,o){var s;s=window.document.createElement("script"),s.src=r,s.onload=()=>n(window),s.onerror=o,window.document.head.appendChild(s)})}const jt=async r=>pe.querySelector(`script[src="${r}"]`)||new Promise(function(n,o){const s=window.document.createElement("script");s.src=r,s.onload=n,s.onerror=o,window.document.head.appendChild(s)}),Se=`import { useState } from "react";
import { css, Global } from "@emotion/react";

const Slider = () => {
  const steps = 128;
  const [sliderValue, setSlider] = useState(steps / 2);
  return <>
    <input max={steps}
      css={\`
        appearance: none;
        width: 100%;
        height: 40px; 
        background: rgb(\${255 / steps * sliderValue} \${255 / steps * (steps - sliderValue)} 0); 
        outline: none; 
    \`} type="range"
      aria-label="font size changer"
      value={sliderValue}
      step="1"
      onChangeCapture={(e) => setSlider(Number(e.currentTarget.value))}>
    </input>
    <p
      css={css\`
        font-size: \${72 / steps * sliderValue}px
        \`}>
      Example when the text gets bigger...
    </p>
    <p css={css\`
        font-size: \${72 / steps * (steps - sliderValue)}px
        \`}>
      ...or smaller
    </p>
  </>
}

export default () => <>
  <Global styles={css\`
      body{
          margin: 0;
          overflow: overlay;
        }  
    \`} />
  <Slider />
</>
`;(function(r,n){typeof exports=="object"&&typeof module!="undefined"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(r=r||self,n(r.Diff={}))})(this,function(r){"use strict";function n(){}n.prototype={diff:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={}),this.options=i;var f=this;function u(j){return a?(setTimeout(function(){a(void 0,j)},0),!0):j}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var p=t.length,g=e.length,w=1,v=p+g,k=[{newPos:-1,components:[]}],L=this.extractCommon(k[0],t,e,0);if(k[0].newPos+1>=p&&L+1>=g)return u([{value:this.join(t),count:t.length}]);function x(){for(var j=-1*w;j<=w;j+=2){var D=void 0,R=k[j-1],A=k[j+1],O=(A?A.newPos:0)-j;R&&(k[j-1]=void 0);var M=R&&R.newPos+1<p,Q=A&&0<=O&&O<g;if(!M&&!Q){k[j]=void 0;continue}if(!M||Q&&R.newPos<A.newPos?(D=s(A),f.pushComponent(D.components,void 0,!0)):(D=R,D.newPos++,f.pushComponent(D.components,!0,void 0)),O=f.extractCommon(D,t,e,j),D.newPos+1>=p&&O+1>=g)return u(o(f,D.components,t,e,f.useLongestToken));k[j]=D}w++}if(a)(function j(){setTimeout(function(){if(w>v)return a();x()||j()},0)})();else for(;w<=v;){var B=x();if(B)return B}},pushComponent:function(e,t,i){var a=e[e.length-1];a&&a.added===t&&a.removed===i?e[e.length-1]={count:a.count+1,added:t,removed:i}:e.push({count:1,added:t,removed:i})},extractCommon:function(e,t,i,a){for(var f=t.length,u=i.length,p=e.newPos,g=p-a,w=0;p+1<f&&g+1<u&&this.equals(t[p+1],i[g+1]);)p++,g++,w++;return w&&e.components.push({count:w}),e.newPos=p,g},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function o(e,t,i,a,f){for(var u=0,p=t.length,g=0,w=0;u<p;u++){var v=t[u];if(v.removed){if(v.value=e.join(a.slice(w,w+v.count)),w+=v.count,u&&t[u-1].added){var k=t[u-1];t[u-1]=t[u],t[u]=k}}else{if(!v.added&&f){var L=i.slice(g,g+v.count);L=L.map(function(B,j){var D=a[w+j];return D.length>B.length?D:B}),v.value=e.join(L)}else v.value=e.join(i.slice(g,g+v.count));g+=v.count,v.added||(w+=v.count)}}var x=t[p-1];return p>1&&typeof x.value=="string"&&(x.added||x.removed)&&e.equals("",x.value)&&(t[p-2].value+=x.value,t.pop()),t}function s(e){return{newPos:e.newPos,components:e.components.slice(0)}}var d=new n;function c(e,t,i){return d.diff(e,t,i)}function l(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}var h=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,m=/\S/,y=new n;y.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!m.test(e)&&!m.test(t)},y.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),i=0;i<t.length-1;i++)!t[i+1]&&t[i+2]&&h.test(t[i])&&h.test(t[i+2])&&(t[i]+=t[i+2],t.splice(i+1,2),i--);return t};function P(e,t,i){return i=l(i,{ignoreWhitespace:!0}),y.diff(e,t,i)}function H(e,t,i){return y.diff(e,t,i)}var z=new n;z.tokenize=function(e){var t=[],i=e.split(/(\n|\r\n)/);i[i.length-1]||i.pop();for(var a=0;a<i.length;a++){var f=i[a];a%2&&!this.options.newlineIsToken?t[t.length-1]+=f:(this.options.ignoreWhitespace&&(f=f.trim()),t.push(f))}return t};function re(e,t,i){return z.diff(e,t,i)}function De(e,t,i){var a=l(i,{ignoreWhitespace:!0});return z.diff(e,t,a)}var le=new n;le.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function S(e,t,i){return le.diff(e,t,i)}var E=new n;E.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function T(e,t,i){return E.diff(e,t,i)}function C(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(t){return typeof t}:C=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(e)}function I(e){return K(e)||F(e)||W(e)||X()}function K(e){if(Array.isArray(e))return _(e)}function F(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function W(e,t){if(!e)return;if(typeof e=="string")return _(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _(e,t)}function _(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function X(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var he=Object.prototype.toString,Z=new n;Z.useLongestToken=!0,Z.tokenize=z.tokenize,Z.castInput=function(e){var t=this.options,i=t.undefinedReplacement,a=t.stringifyReplacer,f=a===void 0?function(u,p){return typeof p=="undefined"?i:p}:a;return typeof e=="string"?e:JSON.stringify(se(e,null,null,f),f,"  ")},Z.equals=function(e,t){return n.prototype.equals.call(Z,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function me(e,t,i){return Z.diff(e,t,i)}function se(e,t,i,a,f){t=t||[],i=i||[],a&&(e=a(f,e));var u;for(u=0;u<t.length;u+=1)if(t[u]===e)return i[u];var p;if(he.call(e)==="[object Array]"){for(t.push(e),p=new Array(e.length),i.push(p),u=0;u<e.length;u+=1)p[u]=se(e[u],t,i,a,f);return t.pop(),i.pop(),p}if(e&&e.toJSON&&(e=e.toJSON()),C(e)==="object"&&e!==null){t.push(e),p={},i.push(p);var g=[],w;for(w in e)e.hasOwnProperty(w)&&g.push(w);for(g.sort(),u=0;u<g.length;u+=1)w=g[u],p[w]=se(e[w],t,i,a,w);t.pop(),i.pop()}else p=e;return p}var ae=new n;ae.tokenize=function(e){return e.slice()},ae.join=ae.removeEmpty=function(e){return e};function Le(e,t,i){return ae.diff(e,t,i)}function V(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.split(/\r\n|[\n\v\f\r\x85]/),a=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],f=[],u=0;function p(){var v={};for(f.push(v);u<i.length;){var k=i[u];if(/^(\-\-\-|\+\+\+|@@)\s/.test(k))break;var L=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(k);L&&(v.index=L[1]),u++}for(g(v),g(v),v.hunks=[];u<i.length;){var x=i[u];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(x))break;if(/^@@/.test(x))v.hunks.push(w());else{if(x&&t.strict)throw new Error("Unknown line "+(u+1)+" "+JSON.stringify(x));u++}}}function g(v){var k=/^(---|\+\+\+)\s+(.*)$/.exec(i[u]);if(k){var L=k[1]==="---"?"old":"new",x=k[2].split("	",2),B=x[0].replace(/\\\\/g,"\\");/^".*"$/.test(B)&&(B=B.substr(1,B.length-2)),v[L+"FileName"]=B,v[L+"Header"]=(x[1]||"").trim(),u++}}function w(){var v=u,k=i[u++],L=k.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),x={oldStart:+L[1],oldLines:typeof L[2]=="undefined"?1:+L[2],newStart:+L[3],newLines:typeof L[4]=="undefined"?1:+L[4],lines:[],linedelimiters:[]};x.oldLines===0&&(x.oldStart+=1),x.newLines===0&&(x.newStart+=1);for(var B=0,j=0;u<i.length&&!(i[u].indexOf("--- ")===0&&u+2<i.length&&i[u+1].indexOf("+++ ")===0&&i[u+2].indexOf("@@")===0);u++){var D=i[u].length==0&&u!=i.length-1?" ":i[u][0];if(D==="+"||D==="-"||D===" "||D==="\\")x.lines.push(i[u]),x.linedelimiters.push(a[u]||`
`),D==="+"?B++:D==="-"?j++:D===" "&&(B++,j++);else break}if(!B&&x.newLines===1&&(x.newLines=0),!j&&x.oldLines===1&&(x.oldLines=0),t.strict){if(B!==x.newLines)throw new Error("Added line count did not match for hunk at line "+(v+1));if(j!==x.oldLines)throw new Error("Removed line count did not match for hunk at line "+(v+1))}return x}for(;u<i.length;)p();return f}function ge(e,t,i){var a=!0,f=!1,u=!1,p=1;return function g(){if(a&&!u){if(f?p++:a=!1,e+p<=i)return p;u=!0}if(!f)return u||(a=!0),t<=e-p?-p++:(f=!0,g())}}function we(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=V(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var a=e.split(/\r\n|[\n\v\f\r\x85]/),f=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],u=t.hunks,p=i.compareLine||function(Pe,ue,be,oe){return ue===oe},g=0,w=i.fuzzFactor||0,v=0,k=0,L,x;function B(Pe,ue){for(var be=0;be<Pe.lines.length;be++){var oe=Pe.lines[be],Ae=oe.length>0?oe[0]:" ",xt=oe.length>0?oe.substr(1):oe;if(Ae===" "||Ae==="-"){if(!p(ue+1,a[ue],Ae,xt)&&(g++,g>w))return!1;ue++}}return!0}for(var j=0;j<u.length;j++){for(var D=u[j],R=a.length-D.oldLines,A=0,O=k+D.oldStart-1,M=ge(O,v,R);A!==void 0;A=M())if(B(D,O+A)){D.offset=k+=A;break}if(A===void 0)return!1;v=D.offset+D.oldStart+D.oldLines}for(var Q=0,ce=0;ce<u.length;ce++){var $=u[ce],q=$.oldStart+$.offset+Q-1;Q+=$.newLines-$.oldLines;for(var J=0;J<$.lines.length;J++){var G=$.lines[J],ie=G.length>0?G[0]:" ",Ie=G.length>0?G.substr(1):G,ve=$.linedelimiters[J];if(ie===" ")q++;else if(ie==="-")a.splice(q,1),f.splice(q,1);else if(ie==="+")a.splice(q,0,Ie),f.splice(q,0,ve),q++;else if(ie==="\\"){var xe=$.lines[J-1]?$.lines[J-1][0]:null;xe==="+"?L=!0:xe==="-"&&(x=!0)}}}if(L)for(;!a[a.length-1];)a.pop(),f.pop();else x&&(a.push(""),f.push(`
`));for(var de=0;de<a.length-1;de++)a[de]=a[de]+f[de];return a.join("")}function ct(e,t){typeof e=="string"&&(e=V(e));var i=0;function a(){var f=e[i++];if(!f)return t.complete();t.loadFile(f,function(u,p){if(u)return t.complete(u);var g=we(p,f,t);t.patched(f,g,function(w){if(w)return t.complete(w);a()})})}a()}function Ee(e,t,i,a,f,u,p){p||(p={}),typeof p.context=="undefined"&&(p.context=4);var g=re(i,a,p);g.push({value:"",lines:[]});function w(A){return A.map(function(O){return" "+O})}for(var v=[],k=0,L=0,x=[],B=1,j=1,D=function(A){var O=g[A],M=O.lines||O.value.replace(/\n$/,"").split(`
`);if(O.lines=M,O.added||O.removed){var Q;if(!k){var ce=g[A-1];k=B,L=j,ce&&(x=p.context>0?w(ce.lines.slice(-p.context)):[],k-=x.length,L-=x.length)}(Q=x).push.apply(Q,I(M.map(function(xe){return(O.added?"+":"-")+xe}))),O.added?j+=M.length:B+=M.length}else{if(k)if(M.length<=p.context*2&&A<g.length-2){var $;($=x).push.apply($,I(w(M)))}else{var q,J=Math.min(M.length,p.context);(q=x).push.apply(q,I(w(M.slice(0,J))));var G={oldStart:k,oldLines:B-k+J,newStart:L,newLines:j-L+J,lines:x};if(A>=g.length-2&&M.length<=p.context){var ie=/\n$/.test(i),Ie=/\n$/.test(a),ve=M.length==0&&x.length>G.oldLines;!ie&&ve&&i.length>0&&x.splice(G.oldLines,0,"\\ No newline at end of file"),(!ie&&!ve||!Ie)&&x.push("\\ No newline at end of file")}v.push(G),k=0,L=0,x=[]}B+=M.length,j+=M.length}},R=0;R<g.length;R++)D(R);return{oldFileName:e,newFileName:t,oldHeader:f,newHeader:u,hunks:v}}function lt(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var i=0;i<e.hunks.length;i++){var a=e.hunks[i];a.oldLines===0&&(a.oldStart-=1),a.newLines===0&&(a.newStart-=1),t.push("@@ -"+a.oldStart+","+a.oldLines+" +"+a.newStart+","+a.newLines+" @@"),t.push.apply(t,a.lines)}return t.join(`
`)+`
`}function Ue(e,t,i,a,f,u,p){return lt(Ee(e,t,i,a,f,u,p))}function dt(e,t,i,a,f,u){return Ue(e,e,t,i,a,f,u)}function ut(e,t){return e.length!==t.length?!1:Be(e,t)}function Be(e,t){if(t.length>e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function ft(e){var t=Te(e.lines),i=t.oldLines,a=t.newLines;i!==void 0?e.oldLines=i:delete e.oldLines,a!==void 0?e.newLines=a:delete e.newLines}function pt(e,t,i){e=We(e,i),t=We(t,i);var a={};(e.index||t.index)&&(a.index=e.index||t.index),(e.newFileName||t.newFileName)&&(Ve(e)?Ve(t)?(a.oldFileName=ye(a,e.oldFileName,t.oldFileName),a.newFileName=ye(a,e.newFileName,t.newFileName),a.oldHeader=ye(a,e.oldHeader,t.oldHeader),a.newHeader=ye(a,e.newHeader,t.newHeader)):(a.oldFileName=e.oldFileName,a.newFileName=e.newFileName,a.oldHeader=e.oldHeader,a.newHeader=e.newHeader):(a.oldFileName=t.oldFileName||e.oldFileName,a.newFileName=t.newFileName||e.newFileName,a.oldHeader=t.oldHeader||e.oldHeader,a.newHeader=t.newHeader||e.newHeader)),a.hunks=[];for(var f=0,u=0,p=0,g=0;f<e.hunks.length||u<t.hunks.length;){var w=e.hunks[f]||{oldStart:Infinity},v=t.hunks[u]||{oldStart:Infinity};if(Je(w,v))a.hunks.push(_e(w,p)),f++,g+=w.newLines-w.oldLines;else if(Je(v,w))a.hunks.push(_e(v,g)),u++,p+=v.newLines-v.oldLines;else{var k={oldStart:Math.min(w.oldStart,v.oldStart),oldLines:0,newStart:Math.min(w.newStart+p,v.oldStart+g),newLines:0,lines:[]};ht(k,w.oldStart,w.lines,v.oldStart,v.lines),u++,f++,a.hunks.push(k)}}return a}function We(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return V(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return Ee(void 0,void 0,t,e)}return e}function Ve(e){return e.newFileName&&e.newFileName!==e.oldFileName}function ye(e,t,i){return t===i?t:(e.conflict=!0,{mine:t,theirs:i})}function Je(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function _e(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function ht(e,t,i,a,f){var u={offset:t,lines:i,index:0},p={offset:a,lines:f,index:0};for(Ge(e,u,p),Ge(e,p,u);u.index<u.lines.length&&p.index<p.lines.length;){var g=u.lines[u.index],w=p.lines[p.index];if((g[0]==="-"||g[0]==="+")&&(w[0]==="-"||w[0]==="+"))mt(e,u,p);else if(g[0]==="+"&&w[0]===" "){var v;(v=e.lines).push.apply(v,I(ne(u)))}else if(w[0]==="+"&&g[0]===" "){var k;(k=e.lines).push.apply(k,I(ne(p)))}else g[0]==="-"&&w[0]===" "?qe(e,u,p):w[0]==="-"&&g[0]===" "?qe(e,p,u,!0):g===w?(e.lines.push(g),u.index++,p.index++):Ce(e,ne(u),ne(p))}Ke(e,u),Ke(e,p),ft(e)}function mt(e,t,i){var a=ne(t),f=ne(i);if(Xe(a)&&Xe(f)){if(Be(a,f)&&Ze(i,a,a.length-f.length)){var u;(u=e.lines).push.apply(u,I(a));return}else if(Be(f,a)&&Ze(t,f,f.length-a.length)){var p;(p=e.lines).push.apply(p,I(f));return}}else if(ut(a,f)){var g;(g=e.lines).push.apply(g,I(a));return}Ce(e,a,f)}function qe(e,t,i,a){var f=ne(t),u=gt(i,f);if(u.merged){var p;(p=e.lines).push.apply(p,I(u.merged))}else Ce(e,a?u:f,a?f:u)}function Ce(e,t,i){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:i})}function Ge(e,t,i){for(;t.offset<i.offset&&t.index<t.lines.length;){var a=t.lines[t.index++];e.lines.push(a),t.offset++}}function Ke(e,t){for(;t.index<t.lines.length;){var i=t.lines[t.index++];e.lines.push(i)}}function ne(e){for(var t=[],i=e.lines[e.index][0];e.index<e.lines.length;){var a=e.lines[e.index];if(i==="-"&&a[0]==="+"&&(i="+"),i===a[0])t.push(a),e.index++;else break}return t}function gt(e,t){for(var i=[],a=[],f=0,u=!1,p=!1;f<t.length&&e.index<e.lines.length;){var g=e.lines[e.index],w=t[f];if(w[0]==="+")break;if(u=u||g[0]!==" ",a.push(w),f++,g[0]==="+")for(p=!0;g[0]==="+";)i.push(g),g=e.lines[++e.index];w.substr(1)===g.substr(1)?(i.push(g),e.index++):p=!0}if((t[f]||"")[0]==="+"&&u&&(p=!0),p)return i;for(;f<t.length;)a.push(t[f++]);return{merged:a,changes:i}}function Xe(e){return e.reduce(function(t,i){return t&&i[0]==="-"},!0)}function Ze(e,t,i){for(var a=0;a<i;a++){var f=t[t.length-i+a].substr(1);if(e.lines[e.index+a]!==" "+f)return!1}return e.index+=i,!0}function Te(e){var t=0,i=0;return e.forEach(function(a){if(typeof a!="string"){var f=Te(a.mine),u=Te(a.theirs);t!==void 0&&(f.oldLines===u.oldLines?t+=f.oldLines:t=void 0),i!==void 0&&(f.newLines===u.newLines?i+=f.newLines:i=void 0)}else i!==void 0&&(a[0]==="+"||a[0]===" ")&&i++,t!==void 0&&(a[0]==="-"||a[0]===" ")&&t++}),{oldLines:t,newLines:i}}function wt(e){for(var t=[],i,a,f=0;f<e.length;f++)i=e[f],i.added?a=1:i.removed?a=-1:a=0,t.push([a,i.value]);return t}function yt(e){for(var t=[],i=0;i<e.length;i++){var a=e[i];a.added?t.push("<ins>"):a.removed&&t.push("<del>"),t.push(vt(a.value)),a.added?t.push("</ins>"):a.removed&&t.push("</del>")}return t.join("")}function vt(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}r.Diff=n,r.applyPatch=we,r.applyPatches=ct,r.canonicalize=se,r.convertChangesToDMP=wt,r.convertChangesToXML=yt,r.createPatch=dt,r.createTwoFilesPatch=Ue,r.diffArrays=Le,r.diffChars=c,r.diffCss=T,r.diffJson=me,r.diffLines=re,r.diffSentences=S,r.diffTrimmedLines=De,r.diffWords=P,r.diffWordsWithSpace=H,r.merge=pt,r.parsePatch=V,r.structuredPatch=Ee,Object.defineProperty(r,"__esModule",{value:!0})});async function Dt(r){const n=await crypto.subtle.digest("SHA-256",r),o=Array.from(new Uint8Array(n)),s=o.map(d=>("00"+d.toString(16)).slice(-2)).join("");return s}const Lt=r=>{if(r.length<10)return!1;const n=[...r.slice(0,8)].filter(s=>s<"0"||s>"f").length===0,o=r.slice(8);if(n&&o[0]==="["&&o[o.length-1]==="]"){try{return JSON.parse(o).length>1}catch{return!1}return!0}return!1},Et=(r,n)=>{const o=JSON.parse(n);let s=r.slice(),d="";return o.forEach(c=>{if(Number(c)===c){const l=Math.abs(c),h=s.slice(0,l);s=s.slice(l),c>0&&(d+=String(h))}else d+=String(c)}),d};async function Bt(r){const n=new TextEncoder().encode(r),o=await Dt(n);return o.substr(0,8)}const Ct=async(r,n)=>{const o=Bt(r),s=Diff.diffChars(r,n);return{b:await o,c:s.map(d=>d.added?d.value:d.removed?-d.count:d.count)}},Tt=(r,n)=>n.some(o=>r instanceof o);let Qe,Ye;function It(){return Qe||(Qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pt(){return Ye||(Ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const et=new WeakMap,Ne=new WeakMap,tt=new WeakMap,Oe=new WeakMap,Me=new WeakMap;function At(r){if(Ne.has(r))return;const n=new Promise((o,s)=>{const d=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",l),r.removeEventListener("abort",l)},c=()=>{o(),d()},l=()=>{s(r.error||new DOMException("AbortError","AbortError")),d()};r.addEventListener("complete",c),r.addEventListener("error",l),r.addEventListener("abort",l)});Ne.set(r,n)}const He=r=>Me.get(r),Nt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],ze=new Map;function nt(r,n){if(!(r instanceof IDBDatabase&&!(n in r)&&typeof n=="string"))return;if(ze.get(n))return ze.get(n);const o=n.replace(/FromIndex$/,""),s=n!==o,d=Ot.includes(o);if(!(o in(s?IDBIndex:IDBObjectStore).prototype)||!(d||Nt.includes(o)))return;const c=async function(l,...h){const m=this.transaction(l,d?"readwrite":"readonly");let y=m.store;s&&(y=y.index(h.shift()));const P=await y[o](...h);return d&&await m.done,P};return ze.set(n,c),c}async function Mt(r){const n=await crypto.subtle.digest("SHA-256",r),o=Array.from(new Uint8Array(n)),s=o.map(d=>("00"+d.toString(16)).slice(-2)).join("");return s}const pe=window.document;var Ht=window.ReactDOM;const Fe=()=>pe.location.href.includes("zed.dev")?"https://code.zed.dev":"https://code.zed.vision";let it=!0,Y="",ee=0,zt=0,ot="",rt="",ke="",st;function Ft(r){const n=[...r].map(o=>{const s=o.toString(16);return o<16?"0"+s:s});return[...n.slice(0,4),"-",...n.slice(4,6),"-",...n.slice(6,8),"-",...n.slice(8,10),"-",...n.slice(10,16)].join("")}function Xt(r){const n=[];return r.replace(/[a-fA-F0-9]{2}/g,o=>(n.push(parseInt(o,16)),"")),n}function Zt(r){r=unescape(encodeURIComponent(r));const n=new Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return n}function Qt(r){const n=new ArrayBuffer(r.length),o=new Uint8Array(n);for(let s=0;s<r.length;s++)o[s]=r[s];return n}const $t=function(){const r=new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$","i");function n(s){return r.test(s)}function o(){const s=crypto.getRandomValues(new Uint8Array(16));return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Ft(s)}return{validate:n,generate:o}}(),Rt=async({onChange:r,code:n,language:o})=>{if(typeof window=="undefined")return"";const s=window.document,d=window.document.getElementById("container");if(!d){const y=s.getElementById("container");y.id="container",s.body.appendChild(y)}const c=o==="typescript"?"file:///main.tsx":"file:///main.html";let l;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)){const y=window.document.createElement("div");y.id="ace",window.document.body.appendChild(y),await fe("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.min.js"),o==="typescript"?await fe("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-typescript.min.js"):await fe("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-html.min.js"),await fe("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/theme-monokai.min.js"),window.document.getElementById("ace").style.setProperty("display","block"),d.style.setProperty("display","none"),l=window.ace.edit("ace"),l.getSession().setMode("ace/mode/typescript");const P=H=>setTimeout(()=>{const z=window.ace.edit("ace"),re=z.getTheme();re!=="ace/theme/monokai "&&(z.setOptions({fontSize:"14pt"}),z.setTheme("ace/theme/monokai"),P(2*H))},H);P(100),l.setValue(n),l.blur()}if(window.monaco===void 0){const y="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.21.2/min/vs",{require:P}=await fe(`${y}/loader.min.js`);P.config({paths:{vs:y}}),await new Promise(H=>P(["vs/editor/editor.main"],z=>{H(z)}))}const h=window.monaco,m={monaco:h,editor:h.editor.create(window.document.getElementById("container"),{formatOnType:!0,scrollbar:{horizontal:"hidden",verticalHasArrows:!0,verticalScrollbarSize:20},minimap:{enabled:!1},folding:!1,multiCursorModifier:"alt",wordWrap:"on",wordWrapBreakAfterCharacters:">([{]))],;} ",mouseWheelZoom:!1,wordWrapColumn:80,automaticLayout:!0,scrollBeyondLastLine:!1,autoIndent:"brackets",autoClosingQuotes:"always",padding:{bottom:300},lineNumbers:"on",autoClosingBrackets:"always",autoClosingOvertype:"always",suggest:{},codeLens:!0,autoSurround:"languageDefined",trimAutoWhitespace:!0,codeActionsOnSaveTimeout:100,model:h.editor.getModel(c)||h.editor.createModel(n,o,h.Uri.parse(c)),value:n,language:o,theme:"vs-dark"})};if(m.editor.onDidChangeModelContent(()=>r(m.editor.getValue())),l&&l.session.on("change",function(){const y=l.getValue();m.editor.setValue(y),r(y)}),l&&s.getElementById("container").replaceWith(s.getElementById("ace")),m.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!0,noSemanticValidation:!0,noSyntaxValidation:!0}),o==="typescript"){const y=[{name:"react",url:"https://unpkg.com/@types/react@17.0.0/index.d.ts",depend:["global","csstype","react-dom","prop-types"]},{name:"global",url:"https://unpkg.com/@types/react@17.0.0/global.d.ts",depend:[]},{name:"prop-types",url:"https://unpkg.com/@types/prop-types@15.7.3/index.d.ts",depend:[]},{name:"react-dom",url:"https://unpkg.com/@types/react-dom@17.0.0/index.d.ts",depend:[]},{name:"csstype",url:"https://unpkg.com/csstype@3.0.5/index.d.ts",depend:[]},{name:"@emotion/styled/base.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/base.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/styled/index.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/index.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/cache/index.d.ts",url:"https://unpkg.com/@emotion/cache@11.0.0/types/index.d.ts",depend:["@emotion/utils"]},{name:"@emotion/react/index.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/index.d.ts",depend:["@emotion/cache"]},{name:"@emotion/react/jsx-namespace.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/jsx-namespace.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/css-prop.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/css-prop.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/helper.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/helper.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/theming.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/theming.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/serialize/index.d.ts",url:"https://unpkg.com/@emotion/serialize@1.0.0/types/index.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/utils/index.d.ts",url:"https://unpkg.com/@emotion/utils@1.0.0/types/index.d.ts",depend:[]},{name:"framer-motion",url:"https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.d.ts",depend:[]},{name:"popmotion",url:"https://unpkg.com/browse/popmotion@9.0.1/lib/index.d.ts"}],P=y.map(({name:H,url:z})=>(async()=>m.monaco.languages.typescript.typescriptDefaults.addExtraLib(await(await fetch(z)).text(),H.includes("@emotion")?`file:///node_modules/${H}`:`file:///node_modules/@types/${H}/index.d.ts`))());return m.monaco.languages.typescript.typescriptDefaults.setCompilerOptions({target:m.monaco.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,allowUmdGlobalAccess:!0,strict:!0,allowJs:!0,noEmitOnError:!0,allowSyntheticDefaultImports:!0,moduleResolution:m.monaco.languages.typescript.ModuleResolutionKind.Nodejs,module:m.monaco.languages.typescript.ModuleKind.CommonJS,noEmit:!0,typeRoots:["node_modules/@types"],jsx:"react-jsx",esModuleInterop:!0}),await Promise.all(P),m.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!1,noSemanticValidation:!1,noSyntaxValidation:!1}),m}};async function $e(r){const n=new TextEncoder().encode(r),o=await Mt(n);return o.substr(0,8)}function Ut(r){const n=new Promise((o,s)=>{const d=()=>{r.removeEventListener("success",c),r.removeEventListener("error",l)},c=()=>{o(te(r.result)),d()},l=()=>{s(r.error),d()};r.addEventListener("success",c),r.addEventListener("error",l)});return n.then(o=>{o instanceof IDBCursor&&et.set(o,r)}).catch(()=>{}),Me.set(n,r),n}let Re={get(r,n,o){if(r instanceof IDBTransaction){if(n==="done")return Ne.get(r);if(n==="objectStoreNames")return r.objectStoreNames||tt.get(r);if(n==="store")return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return te(r[n])},set(r,n,o){return r[n]=o,!0},has(r,n){return r instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in r}};function Wt(r){Re=r(Re)}function Vt(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...o){const s=r.call(He(this),n,...o);return tt.set(s,n.sort?n.sort():[n]),te(s)}:Pt().includes(r)?function(...n){return r.apply(He(this),n),te(et.get(this))}:function(...n){return te(r.apply(He(this),n))}}function Jt(r){return typeof r=="function"?Vt(r):(r instanceof IDBTransaction&&At(r),Tt(r,It())?new Proxy(r,Re):r)}function te(r){if(r instanceof IDBRequest)return Ut(r);if(Oe.has(r))return Oe.get(r);const n=Jt(r);return n!==r&&(Oe.set(r,n),Me.set(n,r)),n}function _t(r,n,{blocked:o,upgrade:s,blocking:d,terminated:c}={}){const l=indexedDB.open(r,n),h=te(l);return s&&l.addEventListener("upgradeneeded",m=>{s(te(l.result),m.oldVersion,m.newVersion,te(l.transaction))}),o&&l.addEventListener("blocked",()=>o()),h.then(m=>{c&&m.addEventListener("close",()=>c()),d&&m.addEventListener("versionchange",()=>d())}).catch(()=>{}),h}Wt(r=>({...r,get:(n,o,s)=>nt(n,o)||r.get(n,o,s),has:(n,o)=>!!nt(n,o)||r.has(n,o)}));const je=async()=>{const r=_t("localZedCodeStore",1,{upgrade(o){o.createObjectStore("codeStore")}}),n={async get(o,s="string"){let d;try{if(d=await(await r).get("codeStore",o),!d)return null}catch(c){return null}if(s==="json")return JSON.parse(d);if(s==="string"){const c=await d;if(typeof c===s){const m=c;if(Lt(c)){const y=c.slice(0,8),P=c.slice(8),H=await n.get(y);return Et(H,P)}return c}const l=new TextDecoder,h=l.decode(c);return h}return d},async put(o,s){let d;try{const l=await n.get(o);if(l.length===8&&l!==s){const h=await n.get(s),m=await n.get(l),y=await $e(m);if(y===l){const P=await Ct(h,m),H=P.b+JSON.stringify(P.c);(await r).put("codeStore",H,y)}}}catch{d=""}if(d!==""&&s===d)return data;let c;return typeof s!="string"?c=new TextDecoder().decode(s):c=s,(await r).put("codeStore",c,o)},async delete(o){return(await r).delete("codeStore",o)},async clear(){return(await r).clear("codeStore")},async keys(){return(await r).getAllKeys("codeStore")}};return n};export const getProjects=async()=>{const r=await at(),n=await je(),o=await n.get(r,"json");if(!o||!o.list){const s=$t.generate();return await n.put(r,JSON.stringify({list:[s],[s]:{created:Date.now(),lastOpen:Date.now()}})),[s]}return o.list};async function at(){const r=await je(),n=await r.get("uuid");if(!n)if(window.location.href.includes("zed.dev"))r.put("uuid","1234");else{const o=await fetch("https://code.zed.vision/register"),s=await o.json();return r.put("uuid",s.uuid),s.uuid}return n}export async function run(r="window"){await jt("https://unpkg.com/@babel/standalone@7.12.9/babel.min.js"),r==="editor"&&kt(),r=="window"&&St(async()=>{const S=await st();window.open(S)});const n=await je(),o=await at(),s=await getProjects(),d=s[0],c=await H();P(le(c)),ke=c;const l=await Rt({language:"typescript",code:c,onChange:m});async function h(S){if(ee===1)return;try{ee=1;const E=await y(),T=pe.getElementById("error");if(ee=0,S!==Y)return;if(E&&E.length){const{diff:C}=await import("../../diff/diff.min.js");if(Y!=S)return;if(ot===S)return;const I=await C(ke,S);if(I.c.length<=3){l.monaco.editor.setTheme("hc-black");return}T.innerHTML=E[0].messageText.toString(),T.style.display="block",ot=S;return}ke=S,T.style.display="none",l.monaco.editor.setTheme("vs-dark"),zt=0,ee=0,P(le(S))}catch(E){if(ee=0,S!==Y)return;l.monaco.editor.setTheme("vs-light"),setTimeout(()=>{l.monaco.editor.setTheme("hc-black")},50),console.error(E)}}function m(S){if(!l)return;if(Y=S,!ee)h(Y);else{const E=S,T=setInterval(()=>{(S!==Y||!ee)&&clearInterval(T),ee||h(Y)},100)}}async function y(){if(!l||!l.monaco)return;const S=l.monaco.Uri.parse("file:///main.tsx"),E=await l.monaco.languages.typescript.getTypeScriptWorker(),T=await(await E(S)).getSemanticDiagnostics("file:///main.tsx"),C=await(await E(S)).getCompilerOptionsDiagnostics("file:///main.tsx"),I=await(await E(S)).getSyntacticDiagnostics("file:///main.tsx");return[...T,...C,...I]}function P(S){const E=/import/gi,T="///",C=`
    Object.assign(window, React);
    if (window.Motion) {
        Object.assign(window, window.Motion);
    }
    if (window.emotionStyled){
      window.styled= window.emotionStyled;
    }
    ;
    `+S.replaceAll(E,T).replace("export default","DefaultElement = "),I=()=>{const K=new Function("code",`return function(){  
          let DefaultElement;
        
        ${C}

                return ReactDOM.render(jsx(DefaultElement), document.getElementById("root"));
      }`)();K(),st=async()=>{const F=new Function("code",`return function(){
            let DefaultElement;
  
          ${C}
  
                  return ReactDOMServer.renderToString(jsx(DefaultElement));
        }`)(),W=F(),_=Array.from(pe.querySelector("head > style[data-emotion=css]").sheet.cssRules).map(V=>V.cssText).filter(V=>W.includes(V.substring(3,8))).join(`
  `);let X;if(C.includes("body{")){const V=C.indexOf("body{"),ge=C.slice(V),we=ge.indexOf("}");X=ge.slice(0,we+1)}let he="",Z="";C.includes("Motion")&&(he='<script crossorigin src="https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.js"></script>',Z="const {motion} = Motion");let me="(code).zed.vision :)";W.indexOf("<title>")>-1&&W.indexOf("</title>")>-1&&(me=W.slice(W.indexOf("<title>")+7,W.indexOf("</title>")));const se=`<!DOCTYPE html>
        <html lang="en">
        <head>
        <title>${me}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="Description" content="Generated with code.zed.vision">
        <head profile="http://www.w3.org/2005/10/profile">
        <link rel="icon" 
              type="image/png"
              href="https://zed.vision/favicon.ico">
        <style>
        ${X}
        ${_}
        </style>
        </head>
        <body>
        <div id="root">
        ${W}
        <script crossorigin src="https://unpkg.com/react@17.0.1/umd/react.production.min.js"></script>
        ${he}
        <script crossorigin src="https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/react@11.1.2/dist/emotion-react.umd.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/styled@11.0.0/dist/emotion-styled.umd.min.js"></script>
        <script type="module">
        Object.assign(window, emotionReact);

       const styled = window["emotionStyled"];

        let DefaultElement;

        ${C}

        ReactDOM.hydrate(jsx(DefaultElement), document.body.children[0]);
        </script>
        </div>
        
        </body>
        </html>
        `,ae=await re(se),Le=await De(ae);return Le}};if(!it){const K=async F=>{if(F!==ke)return;if(rt===F)return;rt=F;const W=new Request(Fe(),{body:F,method:"POST",headers:{"content-type":"text/plain;charset=UTF-8"}}),_=await $e(F);try{const X=await n.get(d);X!==_&&(await n.put(_,F),await n.put(d,_))}catch(X){console.error(X)}};K(Y)}it=!1,I()}async function H(){const S=await je(),E=new URLSearchParams(window.location.search),T=E.get("h")||await S.get(d);if(T){let C;try{C=await S.get(T)}catch{console.error("error load key: "+T)}if(C)return C;let I;try{const K=await fetch(Fe()+"/?h="+T);I=await K.json()}catch(K){const F=await $e(Se);return S.put(F,Se),await S.put(d,F),Se}return I}return Se}function z(S,E){const T=new URLSearchParams(window.location.search);T.set(S,E),window.history.replaceState({},"",decodeURIComponent(`${window.location.pathname}?${T}`))}function re(S){const E=new Blob([S],{type:"text/html"});return E}async function De(S){const E=Fe(),T=new Request(E,{body:S,method:"POST",headers:{"content-type":"text/html;charset=UTF-8",SHARE:"true"}}),C=await fetch(T),{hash:I}=await C.json();return`${E}/${I}`}function le(S){const{transform:E}=window.Babel;return E(`/** @jsx jsx */

  Object.assign(window, React);
  `+S,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code}}
