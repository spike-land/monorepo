async function Le(r,i){try{const a=`https://code.zed.vision/keys/?prefix=${i}`,d=await fetch(a,{headers:{"content-type":"application/json;charset=UTF-8",API_KEY:r}}),h=await d.json();return h.keys}catch(a){return console.log(a),[]}}const Ut=Le,St=r=>{const i=()=>jsx(React.Fragment,null,jsx(motion.div,{css:`
            background: red;
            border: 4px solid red;
            border-radius: 8px;
          `,animate:{scale:1,top:1,left:600},dragElastic:.5,dragMomentum:!1,initial:{top:1,left:0,scale:.7},transition:{duration:.5},drag:!0,dragConstraints:{left:-window.innerWidth+200,right:0,bottom:window.innerHeight-200,top:0}},jsx("div",{css:`
      display: block;
      with: 100%;
      text-align: right;
      background: linear-gradient(0deg, darkred, red);
    `},jsx("button",{css:`
              background: darkred;
              margin-top: -4px;
              color: white;
              cursor: pointer;
              font-weight: bold;
              font-family: Roboto;
              padding: 8px 16px;
              outline: none;
              border: none;
              border-radius: 0px 8px 0px 0px;
            `,onClick:()=>r()},"\u{1F30E} SHARE")),jsx("div",{css:`  
      min-width: 200px;
      padding: 30px;
      max-width: 600px;
      background: white;
      max-height: 800px;
      border-radius: 0px 0px 8px 8px;
      overflow-y: overlay;
    `,id:"root"})));Ie.render(jsx(i),document.getElementById("dragabbleWindow"))};function kt(){const r=new JSFrame,i=r.create({name:"Win",title:"",width:window.innerWidth/2-40,height:600,minWidth:300,minHeight:300,appearanceName:"material",appearanceParam:{titleBar:{color:"white",height:40,background:"#1e1e1e"}},style:{backgroundColor:"rgba(255,255,255,0.8)",overflow:"auto"},style:{backgroundColor:"rgba(0,0,0,0.8)",overflow:"hidden",width:"100%"},html:'<div id="container"></div>'});i.setPosition(window.innerWidth-32,32,"RIGHT_TOP"),i.setControl({maximizeButton:"maximizeButton",demaximizeButton:"restoreButton",minimizeButton:"minimizeButton",deminimizeButton:"deminimizeButton",hideButton:"closeButton",animation:!0,animationDuration:150}),i.control.on("hid",(a,d)=>{a.closeFrame()}),i.control.on("maximized",(a,d)=>{r.showToast({text:"Maximized"})}),i.control.on("demaximized",(a,d)=>{}),i.control.on("minimized",(a,d)=>{}),i.control.on("dminimized",(a,d)=>{}),i.show(),console.log(i)}function ce(r){return new Promise(function(i,a){var d;d=window.document.createElement("script"),d.src=r,d.onload=()=>i(window),d.onerror=a,window.document.head.appendChild(d)})}const Je=async r=>document.querySelector(`script[src="${r}"]`)||new Promise(function(i,a){const d=window.document.createElement("script");d.src=r,d.onload=i,d.onerror=a,window.document.head.appendChild(d)}),we=`import { useState } from "react";
import { motion } from "framer-motion";
import { css, Global } from "@emotion/react";;

const Slider = () => {
  const [sliderValue, setSlider] = useState(64);

  return <>
  <Global styles={css\`
      body{
          margin: 0;
          background: rgb(\${sliderValue},\${255-sliderValue},255);
          overflow: overlay;
        }  
    \`}/>
    <input max="128"
      css={\`
        appearance: none;
        width: 100%;
        height: 40px; 
        background: rgb(\${sliderValue*2},\${255-2*sliderValue},0); 
        outline: none; 
    \`} type="range"
      value={sliderValue} step="1"
      onChangeCapture={(e) => setSlider(Number(e.currentTarget.value))}>
    </input>
    <motion.p
      animate={{ fontSize: sliderValue + \`px\` }}>
      Example when the text gets bigger...
    </motion.p>
      <motion.p animate={{fontSize:128-sliderValue+"px"}}>
        ...or smaller
    </motion.p>
  </>
}

export default () => <>
  <Slider />
</>
`;async function jt(r){const i=await crypto.subtle.digest("SHA-256",r),a=Array.from(new Uint8Array(i)),d=a.map(h=>("00"+h.toString(16)).slice(-2)).join("");return d}(function(r,i){typeof exports=="object"&&typeof module!="undefined"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(r=r||self,i(r.Diff={}))})(this,function(r){"use strict";function i(){}i.prototype={diff:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.callback;typeof n=="function"&&(o=n,n={}),this.options=n;var c=this;function s(S){return o?(setTimeout(function(){o(void 0,S)},0),!0):S}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var l=t.length,u=e.length,p=1,f=l+u,w=[{newPos:-1,components:[]}],L=this.extractCommon(w[0],t,e,0);if(w[0].newPos+1>=l&&L+1>=u)return s([{value:this.join(t),count:t.length}]);function m(){for(var S=-1*p;S<=p;S+=2){var k=void 0,W=w[S-1],F=w[S+1],M=(F?F.newPos:0)-S;W&&(w[S-1]=void 0);var A=W&&W.newPos+1<l,_=F&&0<=M&&M<u;if(!A&&!_){w[S]=void 0;continue}if(!A||_&&W.newPos<F.newPos?(k=d(F),c.pushComponent(k.components,void 0,!0)):(k=W,k.newPos++,c.pushComponent(k.components,!0,void 0)),M=c.extractCommon(k,t,e,S),k.newPos+1>=l&&M+1>=u)return s(a(c,k.components,t,e,c.useLongestToken));w[S]=k}p++}if(o)(function S(){setTimeout(function(){if(p>f)return o();m()||S()},0)})();else for(;p<=f;){var C=m();if(C)return C}},pushComponent:function(e,t,n){var o=e[e.length-1];o&&o.added===t&&o.removed===n?e[e.length-1]={count:o.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,o){for(var c=t.length,s=n.length,l=e.newPos,u=l-o,p=0;l+1<c&&u+1<s&&this.equals(t[l+1],n[u+1]);)l++,u++,p++;return p&&e.components.push({count:p}),e.newPos=l,u},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function a(e,t,n,o,c){for(var s=0,l=t.length,u=0,p=0;s<l;s++){var f=t[s];if(f.removed){if(f.value=e.join(o.slice(p,p+f.count)),p+=f.count,s&&t[s-1].added){var w=t[s-1];t[s-1]=t[s],t[s]=w}}else{if(!f.added&&c){var L=n.slice(u,u+f.count);L=L.map(function(C,S){var k=o[p+S];return k.length>C.length?k:C}),f.value=e.join(L)}else f.value=e.join(n.slice(u,u+f.count));u+=f.count,f.added||(p+=f.count)}}var m=t[l-1];return l>1&&typeof m.value=="string"&&(m.added||m.removed)&&e.equals("",m.value)&&(t[l-2].value+=m.value,t.pop()),t}function d(e){return{newPos:e.newPos,components:e.components.slice(0)}}var h=new i;function v(e,t,n){return h.diff(e,t,n)}function x(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var B=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,j=/\S/,T=new i;T.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!j.test(e)&&!j.test(t)},T.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&B.test(t[n])&&B.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};function y(e,t,n){return n=x(n,{ignoreWhitespace:!0}),T.diff(e,t,n)}function g(e,t,n){return T.diff(e,t,n)}var I=new i;I.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var o=0;o<n.length;o++){var c=n[o];o%2&&!this.options.newlineIsToken?t[t.length-1]+=c:(this.options.ignoreWhitespace&&(c=c.trim()),t.push(c))}return t};function P(e,t,n){return I.diff(e,t,n)}function O(e,t,n){var o=x(n,{ignoreWhitespace:!0});return I.diff(e,t,o)}var b=new i;b.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function E(e,t,n){return b.diff(e,t,n)}var D=new i;D.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function H(e,t,n){return D.diff(e,t,n)}function N(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(t){return typeof t}:N=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(e)}function z(e){return $(e)||V(e)||oe(e)||Q()}function $(e){if(Array.isArray(e))return ie(e)}function V(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function oe(e,t){if(!e)return;if(typeof e=="string")return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}function ie(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le=Object.prototype.toString,K=new i;K.useLongestToken=!0,K.tokenize=I.tokenize,K.castInput=function(e){var t=this.options,n=t.undefinedReplacement,o=t.stringifyReplacer,c=o===void 0?function(s,l){return typeof l=="undefined"?n:l}:o;return typeof e=="string"?e:JSON.stringify(de(e,null,null,c),c,"  ")},K.equals=function(e,t){return i.prototype.equals.call(K,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function st(e,t,n){return K.diff(e,t,n)}function de(e,t,n,o,c){t=t||[],n=n||[],o&&(e=o(c,e));var s;for(s=0;s<t.length;s+=1)if(t[s]===e)return n[s];var l;if(le.call(e)==="[object Array]"){for(t.push(e),l=new Array(e.length),n.push(l),s=0;s<e.length;s+=1)l[s]=de(e[s],t,n,o,c);return t.pop(),n.pop(),l}if(e&&e.toJSON&&(e=e.toJSON()),N(e)==="object"&&e!==null){t.push(e),l={},n.push(l);var u=[],p;for(p in e)e.hasOwnProperty(p)&&u.push(p);for(u.sort(),s=0;s<u.length;s+=1)p=u[s],l[p]=de(e[p],t,n,o,p);t.pop(),n.pop()}else l=e;return l}var ue=new i;ue.tokenize=function(e){return e.slice()},ue.join=ue.removeEmpty=function(e){return e};function at(e,t,n){return ue.diff(e,t,n)}function pe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),o=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],c=[],s=0;function l(){var f={};for(c.push(f);s<n.length;){var w=n[s];if(/^(\-\-\-|\+\+\+|@@)\s/.test(w))break;var L=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(w);L&&(f.index=L[1]),s++}for(u(f),u(f),f.hunks=[];s<n.length;){var m=n[s];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(m))break;if(/^@@/.test(m))f.hunks.push(p());else{if(m&&t.strict)throw new Error("Unknown line "+(s+1)+" "+JSON.stringify(m));s++}}}function u(f){var w=/^(---|\+\+\+)\s+(.*)$/.exec(n[s]);if(w){var L=w[1]==="---"?"old":"new",m=w[2].split("	",2),C=m[0].replace(/\\\\/g,"\\");/^".*"$/.test(C)&&(C=C.substr(1,C.length-2)),f[L+"FileName"]=C,f[L+"Header"]=(m[1]||"").trim(),s++}}function p(){var f=s,w=n[s++],L=w.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),m={oldStart:+L[1],oldLines:typeof L[2]=="undefined"?1:+L[2],newStart:+L[3],newLines:typeof L[4]=="undefined"?1:+L[4],lines:[],linedelimiters:[]};m.oldLines===0&&(m.oldStart+=1),m.newLines===0&&(m.newStart+=1);for(var C=0,S=0;s<n.length&&!(n[s].indexOf("--- ")===0&&s+2<n.length&&n[s+1].indexOf("+++ ")===0&&n[s+2].indexOf("@@")===0);s++){var k=n[s].length==0&&s!=n.length-1?" ":n[s][0];if(k==="+"||k==="-"||k===" "||k==="\\")m.lines.push(n[s]),m.linedelimiters.push(o[s]||`
`),k==="+"?C++:k==="-"?S++:k===" "&&(C++,S++);else break}if(!C&&m.newLines===1&&(m.newLines=0),!S&&m.oldLines===1&&(m.oldLines=0),t.strict){if(C!==m.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(S!==m.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return m}for(;s<n.length;)l();return c}function ct(e,t,n){var o=!0,c=!1,s=!1,l=1;return function u(){if(o&&!s){if(c?l++:o=!1,e+l<=n)return l;s=!0}if(!c)return s||(o=!0),t<=e-l?-l++:(c=!0,u())}}function ze(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=pe(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var o=e.split(/\r\n|[\n\v\f\r\x85]/),c=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],s=t.hunks,l=n.compareLine||function(ke,ae,ge,te){return ae===te},u=0,p=n.fuzzFactor||0,f=0,w=0,L,m;function C(ke,ae){for(var ge=0;ge<ke.lines.length;ge++){var te=ke.lines[ge],je=te.length>0?te[0]:" ",bt=te.length>0?te.substr(1):te;if(je===" "||je==="-"){if(!l(ae+1,o[ae],je,bt)&&(u++,u>p))return!1;ae++}}return!0}for(var S=0;S<s.length;S++){for(var k=s[S],W=o.length-k.oldLines,F=0,M=w+k.oldStart-1,A=ct(M,f,W);F!==void 0;F=A())if(C(k,M+F)){k.offset=w+=F;break}if(F===void 0)return!1;f=k.offset+k.oldStart+k.oldLines}for(var _=0,re=0;re<s.length;re++){var R=s[re],q=R.oldStart+R.offset+_-1;_+=R.newLines-R.oldLines;for(var U=0;U<R.lines.length;U++){var J=R.lines[U],ee=J.length>0?J[0]:" ",Se=J.length>0?J.substr(1):J,me=R.linedelimiters[U];if(ee===" ")q++;else if(ee==="-")o.splice(q,1),c.splice(q,1);else if(ee==="+")o.splice(q,0,Se),c.splice(q,0,me),q++;else if(ee==="\\"){var he=R.lines[U-1]?R.lines[U-1][0]:null;he==="+"?L=!0:he==="-"&&(m=!0)}}}if(L)for(;!o[o.length-1];)o.pop(),c.pop();else m&&(o.push(""),c.push(`
`));for(var se=0;se<o.length-1;se++)o[se]=o[se]+c[se];return o.join("")}function lt(e,t){typeof e=="string"&&(e=pe(e));var n=0;function o(){var c=e[n++];if(!c)return t.complete();t.loadFile(c,function(s,l){if(s)return t.complete(s);var u=ze(l,c,t);t.patched(c,u,function(p){if(p)return t.complete(p);o()})})}o()}function ye(e,t,n,o,c,s,l){l||(l={}),typeof l.context=="undefined"&&(l.context=4);var u=P(n,o,l);u.push({value:"",lines:[]});function p(F){return F.map(function(M){return" "+M})}for(var f=[],w=0,L=0,m=[],C=1,S=1,k=function(F){var M=u[F],A=M.lines||M.value.replace(/\n$/,"").split(`
`);if(M.lines=A,M.added||M.removed){var _;if(!w){var re=u[F-1];w=C,L=S,re&&(m=l.context>0?p(re.lines.slice(-l.context)):[],w-=m.length,L-=m.length)}(_=m).push.apply(_,z(A.map(function(he){return(M.added?"+":"-")+he}))),M.added?S+=A.length:C+=A.length}else{if(w)if(A.length<=l.context*2&&F<u.length-2){var R;(R=m).push.apply(R,z(p(A)))}else{var q,U=Math.min(A.length,l.context);(q=m).push.apply(q,z(p(A.slice(0,U))));var J={oldStart:w,oldLines:C-w+U,newStart:L,newLines:S-L+U,lines:m};if(F>=u.length-2&&A.length<=l.context){var ee=/\n$/.test(n),Se=/\n$/.test(o),me=A.length==0&&m.length>J.oldLines;!ee&&me&&n.length>0&&m.splice(J.oldLines,0,"\\ No newline at end of file"),(!ee&&!me||!Se)&&m.push("\\ No newline at end of file")}f.push(J),w=0,L=0,m=[]}C+=A.length,S+=A.length}},W=0;W<u.length;W++)k(W);return{oldFileName:e,newFileName:t,oldHeader:c,newHeader:s,hunks:f}}function dt(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var o=e.hunks[n];o.oldLines===0&&(o.oldStart-=1),o.newLines===0&&(o.newStart-=1),t.push("@@ -"+o.oldStart+","+o.oldLines+" +"+o.newStart+","+o.newLines+" @@"),t.push.apply(t,o.lines)}return t.join(`
`)+`
`}function Me(e,t,n,o,c,s,l){return dt(ye(e,t,n,o,c,s,l))}function ut(e,t,n,o,c,s){return Me(e,e,t,n,o,c,s)}function pt(e,t){return e.length!==t.length?!1:ve(e,t)}function ve(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ft(e){var t=be(e.lines),n=t.oldLines,o=t.newLines;n!==void 0?e.oldLines=n:delete e.oldLines,o!==void 0?e.newLines=o:delete e.newLines}function mt(e,t,n){e=Ae(e,n),t=Ae(t,n);var o={};(e.index||t.index)&&(o.index=e.index||t.index),(e.newFileName||t.newFileName)&&(He(e)?He(t)?(o.oldFileName=fe(o,e.oldFileName,t.oldFileName),o.newFileName=fe(o,e.newFileName,t.newFileName),o.oldHeader=fe(o,e.oldHeader,t.oldHeader),o.newHeader=fe(o,e.newHeader,t.newHeader)):(o.oldFileName=e.oldFileName,o.newFileName=e.newFileName,o.oldHeader=e.oldHeader,o.newHeader=e.newHeader):(o.oldFileName=t.oldFileName||e.oldFileName,o.newFileName=t.newFileName||e.newFileName,o.oldHeader=t.oldHeader||e.oldHeader,o.newHeader=t.newHeader||e.newHeader)),o.hunks=[];for(var c=0,s=0,l=0,u=0;c<e.hunks.length||s<t.hunks.length;){var p=e.hunks[c]||{oldStart:Infinity},f=t.hunks[s]||{oldStart:Infinity};if(Ne(p,f))o.hunks.push(Re(p,l)),c++,u+=p.newLines-p.oldLines;else if(Ne(f,p))o.hunks.push(Re(f,u)),s++,l+=f.newLines-f.oldLines;else{var w={oldStart:Math.min(p.oldStart,f.oldStart),oldLines:0,newStart:Math.min(p.newStart+l,f.oldStart+u),newLines:0,lines:[]};ht(w,p.oldStart,p.lines,f.oldStart,f.lines),s++,c++,o.hunks.push(w)}}return o}function Ae(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return pe(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return ye(void 0,void 0,t,e)}return e}function He(e){return e.newFileName&&e.newFileName!==e.oldFileName}function fe(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function Ne(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function Re(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function ht(e,t,n,o,c){var s={offset:t,lines:n,index:0},l={offset:o,lines:c,index:0};for(We(e,s,l),We(e,l,s);s.index<s.lines.length&&l.index<l.lines.length;){var u=s.lines[s.index],p=l.lines[l.index];if((u[0]==="-"||u[0]==="+")&&(p[0]==="-"||p[0]==="+"))gt(e,s,l);else if(u[0]==="+"&&p[0]===" "){var f;(f=e.lines).push.apply(f,z(Z(s)))}else if(p[0]==="+"&&u[0]===" "){var w;(w=e.lines).push.apply(w,z(Z(l)))}else u[0]==="-"&&p[0]===" "?$e(e,s,l):p[0]==="-"&&u[0]===" "?$e(e,l,s,!0):u===p?(e.lines.push(u),s.index++,l.index++):xe(e,Z(s),Z(l))}Ue(e,s),Ue(e,l),ft(e)}function gt(e,t,n){var o=Z(t),c=Z(n);if(Ve(o)&&Ve(c)){if(ve(o,c)&&qe(n,o,o.length-c.length)){var s;(s=e.lines).push.apply(s,z(o));return}else if(ve(c,o)&&qe(t,c,c.length-o.length)){var l;(l=e.lines).push.apply(l,z(c));return}}else if(pt(o,c)){var u;(u=e.lines).push.apply(u,z(o));return}xe(e,o,c)}function $e(e,t,n,o){var c=Z(t),s=wt(n,c);if(s.merged){var l;(l=e.lines).push.apply(l,z(s.merged))}else xe(e,o?s:c,o?c:s)}function xe(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function We(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var o=t.lines[t.index++];e.lines.push(o),t.offset++}}function Ue(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function Z(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var o=e.lines[e.index];if(n==="-"&&o[0]==="+"&&(n="+"),n===o[0])t.push(o),e.index++;else break}return t}function wt(e,t){for(var n=[],o=[],c=0,s=!1,l=!1;c<t.length&&e.index<e.lines.length;){var u=e.lines[e.index],p=t[c];if(p[0]==="+")break;if(s=s||u[0]!==" ",o.push(p),c++,u[0]==="+")for(l=!0;u[0]==="+";)n.push(u),u=e.lines[++e.index];p.substr(1)===u.substr(1)?(n.push(u),e.index++):l=!0}if((t[c]||"")[0]==="+"&&s&&(l=!0),l)return n;for(;c<t.length;)o.push(t[c++]);return{merged:o,changes:n}}function Ve(e){return e.reduce(function(t,n){return t&&n[0]==="-"},!0)}function qe(e,t,n){for(var o=0;o<n;o++){var c=t[t.length-n+o].substr(1);if(e.lines[e.index+o]!==" "+c)return!1}return e.index+=n,!0}function be(e){var t=0,n=0;return e.forEach(function(o){if(typeof o!="string"){var c=be(o.mine),s=be(o.theirs);t!==void 0&&(c.oldLines===s.oldLines?t+=c.oldLines:t=void 0),n!==void 0&&(c.newLines===s.newLines?n+=c.newLines:n=void 0)}else n!==void 0&&(o[0]==="+"||o[0]===" ")&&n++,t!==void 0&&(o[0]==="-"||o[0]===" ")&&t++}),{oldLines:t,newLines:n}}function yt(e){for(var t=[],n,o,c=0;c<e.length;c++)n=e[c],n.added?o=1:n.removed?o=-1:o=0,t.push([o,n.value]);return t}function vt(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];o.added?t.push("<ins>"):o.removed&&t.push("<del>"),t.push(xt(o.value)),o.added?t.push("</ins>"):o.removed&&t.push("</del>")}return t.join("")}function xt(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}r.Diff=i,r.applyPatch=ze,r.applyPatches=lt,r.canonicalize=de,r.convertChangesToDMP=yt,r.convertChangesToXML=vt,r.createPatch=ut,r.createTwoFilesPatch=Me,r.diffArrays=at,r.diffChars=v,r.diffCss=H,r.diffJson=st,r.diffLines=P,r.diffSentences=E,r.diffTrimmedLines=O,r.diffWords=y,r.diffWordsWithSpace=g,r.merge=mt,r.parsePatch=pe,r.structuredPatch=ye,Object.defineProperty(r,"__esModule",{value:!0})});async function Lt(r){const i=await crypto.subtle.digest("SHA-256",r),a=Array.from(new Uint8Array(i)),d=a.map(h=>("00"+h.toString(16)).slice(-2)).join("");return d}async function Et(r){const i=new TextEncoder().encode(r),a=await Lt(i);return a.substr(0,8)}const Dt=async(r,i)=>{const a=Et(r),d=Diff.diffChars(r,i);return{b:await a,c:d.map(h=>h.added?h.value:h.removed?-h.count:h.count)}},Ct=(r,i)=>i.some(a=>r instanceof a);let Ke,_e;function Bt(){return Ke||(Ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tt(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xe=new WeakMap,Ee=new WeakMap,Ge=new WeakMap,De=new WeakMap,Ce=new WeakMap;function It(r){if(Ee.has(r))return;const i=new Promise((a,d)=>{const h=()=>{r.removeEventListener("complete",v),r.removeEventListener("error",x),r.removeEventListener("abort",x)},v=()=>{a(),h()},x=()=>{d(r.error||new DOMException("AbortError","AbortError")),h()};r.addEventListener("complete",v),r.addEventListener("error",x),r.addEventListener("abort",x)});Ee.set(r,i)}const Be=r=>Ce.get(r),Pt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],Te=new Map;function Ye(r,i){if(!(r instanceof IDBDatabase&&!(i in r)&&typeof i=="string"))return;if(Te.get(i))return Te.get(i);const a=i.replace(/FromIndex$/,""),d=i!==a,h=Ot.includes(a);if(!(a in(d?IDBIndex:IDBObjectStore).prototype)||!(h||Pt.includes(a)))return;const v=async function(x,...B){const j=this.transaction(x,h?"readwrite":"readonly");let T=j.store;d&&(T=T.index(B.shift()));const y=await T[a](...B);return h&&await j.done,y};return Te.set(i,v),v}var Ie=window.ReactDOM;const Pe=()=>document.location.href.includes("zed.dev")?"https://code.zed.dev":"https://code.zed.vision";let Qe=!0,X="",G=0,Ft=0,Ze="",et="",ne="",tt;async function zt(r,i){try{const a=`https://code.zed.vision/keys/delete/?hash=${i}`,d=await fetch(a,{headers:{"content-type":"application/json;charset=UTF-8",API_KEY:r}});return!0}catch(a){return console.log(a),!1}}async function nt(r){try{const i=`https://code.zed.vision/?h=${r}`,a=await fetch(i,{headers:{"content-type":"application/json;charset=UTF-8"}}),d=await a.json();return d.code?d.code:""}catch(i){return console.log(i),""}}async function Mt(r){try{const i=`https://code.zed.vision/?h=${r}`,a=await fetch(i,{headers:{"content-type":"application/json;charset=UTF-8"}}),d=await a.json();return d.codeTranspiled?d.codeTranspiled:""}catch(i){return console.log(i),""}}function ot(r="root"){const i=document.createElement("div"),a=document.getElementById(r);try{Ie.unmountComponentAtNode(a)}catch(d){console.error("Error in un-mount",d)}a?a.replaceWith(i):document.body.appendChild(i),i.id=r}const At=async({onChange:r,code:i,language:a})=>{const d=window.document.getElementById("container");if(!d){const j=document.getElementById("container");j.id="container",document.body.appendChild(j)}const h=a==="typescript"?"file:///main.tsx":"file:///main.html";let v;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)){const j=window.document.createElement("div");j.id="ace",window.document.body.appendChild(j),await ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.min.js"),a==="typescript"?await ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-typescript.min.js"):await ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-html.min.js"),await ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/theme-monokai.min.js"),window.document.getElementById("ace").style.setProperty("display","block"),d.style.setProperty("display","none"),v=window.ace.edit("ace"),v.getSession().setMode("ace/mode/typescript");const T=y=>setTimeout(()=>{let g=window.ace.edit("ace"),I=g.getTheme();I!=="ace/theme/monokai "&&(g.setOptions({fontSize:"14pt"}),g.setTheme("ace/theme/monokai"),T(2*y))},y);T(100),v.setValue(i),v.blur()}if(window.monaco===void 0){const j="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.21.2/min/vs",{require:T}=await ce(`${j}/loader.min.js`);T.config({paths:{vs:j}}),await new Promise(y=>T(["vs/editor/editor.main"],g=>{y(g)}))}const x=window.monaco,B={monaco:x,editor:x.editor.create(window.document.getElementById("container"),{formatOnType:!0,scrollbar:{horizontal:"hidden",verticalHasArrows:!0,verticalScrollbarSize:20},minimap:{enabled:!1},folding:!1,multiCursorModifier:"alt",wordWrap:"on",wordWrapBreakAfterCharacters:">([{]))],;} ",mouseWheelZoom:!1,wordWrapColumn:80,automaticLayout:!0,scrollBeyondLastLine:!1,autoIndent:"brackets",autoClosingQuotes:"always",padding:{bottom:300},lineNumbers:"on",autoClosingBrackets:"always",autoClosingOvertype:"always",suggest:{},codeLens:!0,autoSurround:"languageDefined",trimAutoWhitespace:!0,codeActionsOnSaveTimeout:100,model:x.editor.getModel(h)||x.editor.createModel(i,a,x.Uri.parse(h)),value:i,language:a,theme:"vs-dark"})};if(B.editor.onDidChangeModelContent(()=>r(B.editor.getValue())),v&&v.session.on("change",function(){const j=v.getValue();B.editor.setValue(j),r(j)}),v&&document.getElementById("container").replaceWith(document.getElementById("ace")),B.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!0,noSemanticValidation:!0,noSyntaxValidation:!0}),a==="typescript"){const j=[{name:"react",url:"https://unpkg.com/@types/react@17.0.0/index.d.ts",depend:["global","csstype","react-dom","prop-types"]},{name:"global",url:"https://unpkg.com/@types/react@17.0.0/global.d.ts",depend:[]},{name:"prop-types",url:"https://unpkg.com/@types/prop-types@15.7.3/index.d.ts",depend:[]},{name:"react-dom",url:"https://unpkg.com/@types/react-dom@17.0.0/index.d.ts",depend:[]},{name:"csstype",url:"https://unpkg.com/csstype@3.0.5/index.d.ts",depend:[]},{name:"@emotion/styled/base.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/base.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/styled/index.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/index.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/cache/index.d.ts",url:"https://unpkg.com/@emotion/cache@11.0.0/types/index.d.ts",depend:["@emotion/utils"]},{name:"@emotion/react/index.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/index.d.ts",depend:["@emotion/cache"]},{name:"@emotion/react/jsx-namespace.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/jsx-namespace.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/css-prop.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/css-prop.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/helper.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/helper.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/theming.d.ts",url:"https://unpkg.com/@emotion/react@11.1.1/types/theming.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/serialize/index.d.ts",url:"https://unpkg.com/@emotion/serialize@1.0.0/types/index.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/utils/index.d.ts",url:"https://unpkg.com/@emotion/utils@1.0.0/types/index.d.ts",depend:[]},{name:"framer-motion",url:"https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.d.ts",depend:[]},{name:"popmotion",url:"https://unpkg.com/browse/popmotion@9.0.1/lib/index.d.ts"}],T=j.map(({name:y,url:g})=>(async()=>B.monaco.languages.typescript.typescriptDefaults.addExtraLib(await(await fetch(g)).text(),y.includes("@emotion")?`file:///node_modules/${y}`:`file:///node_modules/@types/${y}/index.d.ts`))());return B.monaco.languages.typescript.typescriptDefaults.setCompilerOptions({target:B.monaco.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,allowUmdGlobalAccess:!0,strict:!0,allowJs:!0,noEmitOnError:!0,allowSyntheticDefaultImports:!0,moduleResolution:B.monaco.languages.typescript.ModuleResolutionKind.Nodejs,module:B.monaco.languages.typescript.ModuleKind.CommonJS,noEmit:!0,typeRoots:["node_modules/@types"],jsx:"react-jsx",esModuleInterop:!0}),await Promise.all(T),B.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!1,noSemanticValidation:!1,noSyntaxValidation:!1}),B}};async function rt(r){const i=new TextEncoder().encode(r),a=await jt(i);return a.substr(0,8)}function Ht(r){const i=new Promise((a,d)=>{const h=()=>{r.removeEventListener("success",v),r.removeEventListener("error",x)},v=()=>{a(Y(r.result)),h()},x=()=>{d(r.error),h()};r.addEventListener("success",v),r.addEventListener("error",x)});return i.then(a=>{a instanceof IDBCursor&&Xe.set(a,r)}).catch(()=>{}),Ce.set(i,r),i}let Oe={get(r,i,a){if(r instanceof IDBTransaction){if(i==="done")return Ee.get(r);if(i==="objectStoreNames")return r.objectStoreNames||Ge.get(r);if(i==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Y(r[i])},set(r,i,a){return r[i]=a,!0},has(r,i){return r instanceof IDBTransaction&&(i==="done"||i==="store")?!0:i in r}};function Nt(r){Oe=r(Oe)}function Rt(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(i,...a){const d=r.call(Be(this),i,...a);return Ge.set(d,i.sort?i.sort():[i]),Y(d)}:Tt().includes(r)?function(...i){return r.apply(Be(this),i),Y(Xe.get(this))}:function(...i){return Y(r.apply(Be(this),i))}}function $t(r){return typeof r=="function"?Rt(r):(r instanceof IDBTransaction&&It(r),Ct(r,Bt())?new Proxy(r,Oe):r)}function Y(r){if(r instanceof IDBRequest)return Ht(r);if(De.has(r))return De.get(r);const i=$t(r);return i!==r&&(De.set(r,i),Ce.set(i,r)),i}function Wt(r,i,{blocked:a,upgrade:d,blocking:h,terminated:v}={}){const x=indexedDB.open(r,i),B=Y(x);return d&&x.addEventListener("upgradeneeded",j=>{d(Y(x.result),j.oldVersion,j.newVersion,Y(x.transaction))}),a&&x.addEventListener("blocked",()=>a()),B.then(j=>{v&&j.addEventListener("close",()=>v()),h&&j.addEventListener("versionchange",()=>h())}).catch(()=>{}),B}Nt(r=>({...r,get:(i,a,d)=>Ye(i,a)||r.get(i,a,d),has:(i,a)=>!!Ye(i,a)||r.has(i,a)}));const Fe=async()=>{const r=Wt("localZedCodeStore",1,{upgrade(i){i.createObjectStore("codeStore")}});return{async get(i,a="string"){let d;try{if(d=(await r).get("codeStore",i),!d)return null}catch(h){return null}if(a==="json")return JSON.parse(d);if(a==="string"){const h=await d;if(typeof h===a)return h;const v=new TextDecoder,x=v.decode(h);return x}return d},async put(i,a){let d;try{d=await(await r).get(i)}catch{d=""}if(a===d)return data;{const v=await Dt(d,a),x=[v.b,...v.c].join(",");console.log(x)}let h;return typeof a!="string"?h=new TextDecoder().decode(a):h=a,(await r).put("codeStore",h,i)},async delete(i){return(await r).delete("codeStore",i)},async clear(){return(await r).clear("codeStore")},async keys(){return(await r).getAllKeys("codeStore")}}};export const getProjects=async()=>{const r=await it(),i=await Fe(),a=await i.get(r,"json");return a||(await i.put(r,JSON.stringify([])),[])};async function it(){const r=await Fe(),i=await r.get("uuid");if(!i)if(window.location.href.includes("zed.dev"))r.put("uuid","1234");else{const a=await fetch("https://code.zed.vision/register"),d=await a.json();return r.put("uuid",d.uuid),d.uuid}return i}export async function run(r="window"){const i=await Fe(),a=await it();async function d(y,g,I=!1){const P=await Le(y,g);P.map(O=>O.name).map(async O=>{const b=await nt(O);if(!b)return"";const E=await Mt(O);ot("root");let D;try{if(D=T(b),D!==E){const H=/setInterval/gi,N="///",z=/debugger/gi,$="///";Ie.unmountComponentAtNode(document.getElementById("root")),h(D.replaceAll(H,N).replaceAll(z,$));const V=document.getElementById("root").innerHTML;ot("root"),h(E.replaceAll(H,N).replaceAll(z,$));const oe=document.getElementById("root").innerHTML;oe!==V&&(console.log({hash:O,code:b,html1:oe,html2:V,transpiled1:E,transpiled2:D}),I&&await zt(y,O))}}catch(H){console.error({hash:O,code:b,transpiled:D})}})}Object.assign(window,{getKeys:Le,getCode:nt,restartCode:h,regenerate:d}),Je("diffLoader.js"),r==="editor"&&kt(),r=="window"&&St(async()=>{const y=await tt();window.open(y)}),await Je("https://unpkg.com/@babel/standalone@7.12.9/babel.min.js"),(async()=>{const y=await v();ne=y;const g=await At({language:"typescript",code:y,onChange:I});function I(b){if(!g)return;if(X=b,!G)O(X);else{const E=b,D=setInterval(()=>{(b!==X||!G)&&clearInterval(D),G||O(X)},100)}}async function P(){if(!g||!g.monaco)return;const b=g.monaco.Uri.parse("file:///main.tsx"),E=await g.monaco.languages.typescript.getTypeScriptWorker(),D=await(await E(b)).getSemanticDiagnostics("file:///main.tsx"),H=await(await E(b)).getCompilerOptionsDiagnostics("file:///main.tsx"),N=await(await E(b)).getSyntacticDiagnostics("file:///main.tsx");return[...D,...H,...N]}async function O(b){if(G===1)return;try{G=1;const E=await P(),D=document.getElementById("error");if(G=0,b!==X)return;if(E&&E.length){if(X!=b)return;if(Ze===b)return;const H=await diff(ne,b);if(H.c.length<=3){g.monaco.editor.setTheme("hc-black");return}D.innerHTML=E[0].messageText.toString(),D.style.display="block",Ze=b;return}ne=b,D.style.display="none",g.monaco.editor.setTheme("vs-dark"),Ft=0,G=0,h(T(b))}catch(E){if(G=0,b!==X)return;g.monaco.editor.setTheme("vs-light"),setTimeout(()=>{g.monaco.editor.setTheme("hc-black")},50),console.error(E)}}})(),h(T(await v()));async function h(y){const g=/import/gi,I="///",P=`
    Object.assign(window, React);
    if (window.Motion) {
        Object.assign(window, window.Motion);
    }
    if (window.emotionStyled){
      window.styled= window.emotionStyled;
    }
    ;
    `+y.replaceAll(g,I).replace("export default","DefaultElement = "),O=async()=>{const b=new Function("code",`return function(){  
          let DefaultElement;
        
        ${P}

                return ReactDOM.render(jsx(DefaultElement), document.getElementById("root"));
      }`)();b(),tt=async()=>{const E=new Function("code",`return function(){
            let DefaultElement;
  
          ${P}
  
                  return ReactDOMServer.renderToString(jsx(DefaultElement));
        }`)(),D=E(),H=Array.from(document.querySelector("head > style[data-emotion=css]").sheet.cssRules).map(Q=>Q.cssText).filter(Q=>D.includes(Q.substring(3,8))).join(`
  `);let N;if(P.includes("body{")){const Q=P.indexOf("body{"),le=P.slice(Q),K=le.indexOf("}");N=le.slice(0,K+1)}let z="",$="";P.includes("Motion")&&(z='<script crossorigin src="https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.js"></script>',$="const {motion} = Motion");const V=`<!DOCTYPE html>
        <html lang="en">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <head profile="http://www.w3.org/2005/10/profile">
        <link rel="icon" 
              type="image/png"
              href="https://zed.vision/favicon.ico">
        <style>
        ${N}
        ${H}
        </style>
        </head>
        <body>
        <div id="root">
        ${D}
        </div>
        <script crossorigin src="https://unpkg.com/react@17.0.1/umd/react.production.min.js"></script>
        ${z}
        <script crossorigin src="https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/react@11.1.1/dist/emotion-react.umd.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/styled@11.0.0/dist/emotion-styled.umd.min.js"></script>
        <script type="module">
        Object.assign(window, emotionReact);

       const styled = window["emotionStyled"];

        let DefaultElement;

        ${P}

        ReactDOM.hydrate(jsx(DefaultElement), document.body.children[0]);
        </script>
        </body>
        </html>
        `,oe=await B(V),ie=await j(oe);return ie}};if(!Qe){const b=async E=>{if(!location.origin.includes("zed."))return;if(E!==ne)return;if(et===E)return;et=E;const D={codeTranspiled:T(ne),code:ne},H=JSON.stringify(D),N=new Request(Pe(),{body:H,method:"POST",headers:{"content-type":"application/json;charset=UTF-8"}}),z=fetch(N),$=await rt(H);try{const V=await i.get("codeBoXHash2");V!==$&&(console.log("now put"),await i.put("codeBoXHash2",$),await i.put($,ne),x("h",$))}catch(V){}await z};b(X)}Qe=!1,O()}async function v(){const y=new URLSearchParams(window.location.search),g=y.get("h")||await i.get("codeBoXHash2");if(g){const I=await i.get(g);if(I)return I;let P;try{const O=await fetch(Pe()+"/?h="+g);P=await O.json()}catch(O){const b={codeTranspiled:T(we),code:we},E=JSON.stringify(b),D=await rt(E);return codeDb.put(D,E),we}return P.code}return we}function x(y,g){const I=new URLSearchParams(window.location.search);I.set(y,g),window.history.replaceState({},"",decodeURIComponent(`${window.location.pathname}?${I}`))}function B(y){const g=new Blob([y],{type:"text/html"});return g}async function j(y){const g=Pe(),I=new Request(g,{body:y,method:"POST",headers:{"content-type":"text/html;charset=UTF-8",SHARE:"true"}}),P=await fetch(I),{hash:O}=await P.json();return`${g}/${O}`}function T(y){const{transform:g}=window.Babel;return g(`/** @jsx jsx */

  Object.assign(window, React);
  `+y,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code}}
