const yt=r=>{const s=()=>jsx(React.Fragment,null,jsx(motion.div,{css:`
            background: red;
            border: 4px solid red;
            border-radius: 8px;
          `,animate:{scale:1,top:1,left:600},dragElastic:.5,dragMomentum:!1,initial:{top:1,left:0,scale:.7},transition:{duration:.5},drag:!0,dragConstraints:{left:-window.innerWidth+200,right:0,bottom:window.innerHeight-200,top:0}},jsx("div",{css:`
      display: block;
      with: 100%;
      text-align: right;
      background: linear-gradient(0deg, darkred, red);
    `},jsx("button",{css:`
              background: darkred;
              margin-top: -4px;
              color: white;
              cursor: pointer;
              font-weight: bold;
              font-family: Roboto;
              padding: 8px 16px;
              outline: none;
              border: none;
              border-radius: 0px 8px 0px 0px;
            `,onClick:()=>r()},"\u{1F30E} SHARE")),jsx("div",{css:`  
      min-width: 200px;
      padding: 30px;
      max-width: 600px;
      background: white;
      max-height: 800px;
      border-radius: 0px 0px 8px 8px;
      overflow-y: overlay;
    `,id:"root"})));Ot.render(jsx(s),document.getElementById("dragabbleWindow"))};function vt(){const r=new JSFrame,s=r.create({name:"Win",title:"",width:window.innerWidth/2-40,height:600,minWidth:300,minHeight:300,appearanceName:"material",appearanceParam:{titleBar:{color:"white",height:40,background:"#1e1e1e"}},style:{backgroundColor:"rgba(255,255,255,0.8)",overflow:"auto"},style:{backgroundColor:"rgba(0,0,0,0.8)",overflow:"hidden",width:"100%"},html:'<div id="container"></div>'});s.setPosition(window.innerWidth-32,32,"RIGHT_TOP"),s.setControl({maximizeButton:"maximizeButton",demaximizeButton:"restoreButton",minimizeButton:"minimizeButton",deminimizeButton:"deminimizeButton",hideButton:"closeButton",animation:!0,animationDuration:150}),s.control.on("hid",(l,d)=>{l.closeFrame()}),s.control.on("maximized",(l,d)=>{r.showToast({text:"Maximized"})}),s.control.on("demaximized",(l,d)=>{}),s.control.on("minimized",(l,d)=>{}),s.control.on("dminimized",(l,d)=>{}),s.show(),console.log(s)}function ce(r){return new Promise(function(s,l){var d;d=window.document.createElement("script"),d.src=r,d.onload=()=>s(window),d.onerror=l,window.document.head.appendChild(d)})}const Ke=async r=>document.querySelector(`script[src="${r}"]`)||new Promise(function(s,l){const d=window.document.createElement("script");d.src=r,d.onload=s,d.onerror=l,window.document.head.appendChild(d)}),me=`import { useState } from "react";
import { motion } from "framer-motion";
import { css, Global } from "@emotion/react";;

const Slider = () => {
  const [sliderValue, setSlider] = useState(64);

  return <>
  <Global styles={css\`
      body{
          margin: 0;
          background: rgb(\${sliderValue},\${255-sliderValue},255);
          overflow: overlay;
        }  
    \`}/>
    <input max="128"
      css={\`
        appearance: none;
        width: 100%;
        height: 40px; 
        background: rgb(\${sliderValue*2},\${255-2*sliderValue},0); 
        outline: none; 
    \`} type="range"
      value={sliderValue} step="1"
      onChangeCapture={(e) => setSlider(Number(e.currentTarget.value))}>
    </input>
    <motion.p
      animate={{ fontSize: sliderValue + \`px\` }}>
      Example when the text gets bigger...
    </motion.p>
      <motion.p animate={{fontSize:128-sliderValue+"px"}}>
        ...or smaller
    </motion.p>
  </>
}

export default () => <>
  <Slider />
</>
`;(function(r,s){typeof exports=="object"&&typeof module!="undefined"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(r=r||self,s(r.Diff={}))})(this,function(r){"use strict";function s(){}s.prototype={diff:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.callback;typeof n=="function"&&(o=n,n={}),this.options=n;var a=this;function i(b){return o?(setTimeout(function(){o(void 0,b)},0),!0):b}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var c=t.length,u=e.length,f=1,m=c+u,v=[{newPos:-1,components:[]}],j=this.extractCommon(v[0],t,e,0);if(v[0].newPos+1>=c&&j+1>=u)return i([{value:this.join(t),count:t.length}]);function h(){for(var b=-1*f;b<=f;b+=2){var S=void 0,H=v[b-1],P=v[b+1],I=(P?P.newPos:0)-b;H&&(v[b-1]=void 0);var M=H&&H.newPos+1<c,_=P&&0<=I&&I<u;if(!M&&!_){v[b]=void 0;continue}if(!M||_&&H.newPos<P.newPos?(S=d(P),a.pushComponent(S.components,void 0,!0)):(S=H,S.newPos++,a.pushComponent(S.components,!0,void 0)),I=a.extractCommon(S,t,e,b),S.newPos+1>=c&&I+1>=u)return i(l(a,S.components,t,e,a.useLongestToken));v[b]=S}f++}if(o)(function b(){setTimeout(function(){if(f>m)return o();h()||b()},0)})();else for(;f<=m;){var D=h();if(D)return D}},pushComponent:function(e,t,n){var o=e[e.length-1];o&&o.added===t&&o.removed===n?e[e.length-1]={count:o.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,o){for(var a=t.length,i=n.length,c=e.newPos,u=c-o,f=0;c+1<a&&u+1<i&&this.equals(t[c+1],n[u+1]);)c++,u++,f++;return f&&e.components.push({count:f}),e.newPos=c,u},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function l(e,t,n,o,a){for(var i=0,c=t.length,u=0,f=0;i<c;i++){var m=t[i];if(m.removed){if(m.value=e.join(o.slice(f,f+m.count)),f+=m.count,i&&t[i-1].added){var v=t[i-1];t[i-1]=t[i],t[i]=v}}else{if(!m.added&&a){var j=n.slice(u,u+m.count);j=j.map(function(D,b){var S=o[f+b];return S.length>D.length?S:D}),m.value=e.join(j)}else m.value=e.join(n.slice(u,u+m.count));u+=m.count,m.added||(f+=m.count)}}var h=t[c-1];return c>1&&typeof h.value=="string"&&(h.added||h.removed)&&e.equals("",h.value)&&(t[c-2].value+=h.value,t.pop()),t}function d(e){return{newPos:e.newPos,components:e.components.slice(0)}}var p=new s;function g(e,t,n){return p.diff(e,t,n)}function w(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var k=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,x=/\S/,E=new s;E.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!x.test(e)&&!x.test(t)},E.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&k.test(t[n])&&k.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};function T(e,t,n){return n=w(n,{ignoreWhitespace:!0}),E.diff(e,t,n)}function F(e,t,n){return E.diff(e,t,n)}var R=new s;R.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var o=0;o<n.length;o++){var a=n[o];o%2&&!this.options.newlineIsToken?t[t.length-1]+=a:(this.options.ignoreWhitespace&&(a=a.trim()),t.push(a))}return t};function ie(e,t,n){return R.diff(e,t,n)}function y(e,t,n){var o=w(n,{ignoreWhitespace:!0});return R.diff(e,t,o)}var L=new s;L.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function B(e,t,n){return L.diff(e,t,n)}var O=new s;O.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function z(e,t,n){return O.diff(e,t,n)}function A(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(t){return typeof t}:A=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(e)}function C(e){return q(e)||J(e)||Z(e)||we()}function q(e){if(Array.isArray(e))return oe(e)}function J(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function Z(e,t){if(!e)return;if(typeof e=="string")return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}function oe(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function we(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ye=Object.prototype.toString,K=new s;K.useLongestToken=!0,K.tokenize=R.tokenize,K.castInput=function(e){var t=this.options,n=t.undefinedReplacement,o=t.stringifyReplacer,a=o===void 0?function(i,c){return typeof c=="undefined"?n:c}:o;return typeof e=="string"?e:JSON.stringify($(e,null,null,a),a,"  ")},K.equals=function(e,t){return s.prototype.equals.call(K,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function ve(e,t,n){return K.diff(e,t,n)}function $(e,t,n,o,a){t=t||[],n=n||[],o&&(e=o(a,e));var i;for(i=0;i<t.length;i+=1)if(t[i]===e)return n[i];var c;if(ye.call(e)==="[object Array]"){for(t.push(e),c=new Array(e.length),n.push(c),i=0;i<e.length;i+=1)c[i]=$(e[i],t,n,o,a);return t.pop(),n.pop(),c}if(e&&e.toJSON&&(e=e.toJSON()),A(e)==="object"&&e!==null){t.push(e),c={},n.push(c);var u=[],f;for(f in e)e.hasOwnProperty(f)&&u.push(f);for(u.sort(),i=0;i<u.length;i+=1)f=u[i],c[f]=$(e[f],t,n,o,f);t.pop(),n.pop()}else c=e;return c}var Y=new s;Y.tokenize=function(e){return e.slice()},Y.join=Y.removeEmpty=function(e){return e};function xe(e,t,n){return Y.diff(e,t,n)}function le(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),o=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=[],i=0;function c(){var m={};for(a.push(m);i<n.length;){var v=n[i];if(/^(\-\-\-|\+\+\+|@@)\s/.test(v))break;var j=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(v);j&&(m.index=j[1]),i++}for(u(m),u(m),m.hunks=[];i<n.length;){var h=n[i];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(h))break;if(/^@@/.test(h))m.hunks.push(f());else{if(h&&t.strict)throw new Error("Unknown line "+(i+1)+" "+JSON.stringify(h));i++}}}function u(m){var v=/^(---|\+\+\+)\s+(.*)$/.exec(n[i]);if(v){var j=v[1]==="---"?"old":"new",h=v[2].split("	",2),D=h[0].replace(/\\\\/g,"\\");/^".*"$/.test(D)&&(D=D.substr(1,D.length-2)),m[j+"FileName"]=D,m[j+"Header"]=(h[1]||"").trim(),i++}}function f(){var m=i,v=n[i++],j=v.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),h={oldStart:+j[1],oldLines:typeof j[2]=="undefined"?1:+j[2],newStart:+j[3],newLines:typeof j[4]=="undefined"?1:+j[4],lines:[],linedelimiters:[]};h.oldLines===0&&(h.oldStart+=1),h.newLines===0&&(h.newStart+=1);for(var D=0,b=0;i<n.length&&!(n[i].indexOf("--- ")===0&&i+2<n.length&&n[i+1].indexOf("+++ ")===0&&n[i+2].indexOf("@@")===0);i++){var S=n[i].length==0&&i!=n.length-1?" ":n[i][0];if(S==="+"||S==="-"||S===" "||S==="\\")h.lines.push(n[i]),h.linedelimiters.push(o[i]||`
`),S==="+"?D++:S==="-"?b++:S===" "&&(D++,b++);else break}if(!D&&h.newLines===1&&(h.newLines=0),!b&&h.oldLines===1&&(h.oldLines=0),t.strict){if(D!==h.newLines)throw new Error("Added line count did not match for hunk at line "+(m+1));if(b!==h.oldLines)throw new Error("Removed line count did not match for hunk at line "+(m+1))}return h}for(;i<n.length;)c();return a}function rt(e,t,n){var o=!0,a=!1,i=!1,c=1;return function u(){if(o&&!i){if(a?c++:o=!1,e+c<=n)return c;i=!0}if(!a)return i||(o=!0),t<=e-c?-c++:(a=!0,u())}}function Ne(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=le(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var o=e.split(/\r\n|[\n\v\f\r\x85]/),a=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=t.hunks,c=n.compareLine||function(De,ae,pe,ne){return ae===ne},u=0,f=n.fuzzFactor||0,m=0,v=0,j,h;function D(De,ae){for(var pe=0;pe<De.lines.length;pe++){var ne=De.lines[pe],Ee=ne.length>0?ne[0]:" ",wt=ne.length>0?ne.substr(1):ne;if(Ee===" "||Ee==="-"){if(!c(ae+1,o[ae],Ee,wt)&&(u++,u>f))return!1;ae++}}return!0}for(var b=0;b<i.length;b++){for(var S=i[b],H=o.length-S.oldLines,P=0,I=v+S.oldStart-1,M=rt(I,m,H);P!==void 0;P=M())if(D(S,I+P)){S.offset=v+=P;break}if(P===void 0)return!1;m=S.offset+S.oldStart+S.oldLines}for(var _=0,re=0;re<i.length;re++){var N=i[re],V=N.oldStart+N.offset+_-1;_+=N.newLines-N.oldLines;for(var W=0;W<N.lines.length;W++){var U=N.lines[W],te=U.length>0?U[0]:" ",Le=U.length>0?U.substr(1):U,ue=N.linedelimiters[W];if(te===" ")V++;else if(te==="-")o.splice(V,1),a.splice(V,1);else if(te==="+")o.splice(V,0,Le),a.splice(V,0,ue),V++;else if(te==="\\"){var fe=N.lines[W-1]?N.lines[W-1][0]:null;fe==="+"?j=!0:fe==="-"&&(h=!0)}}}if(j)for(;!o[o.length-1];)o.pop(),a.pop();else h&&(o.push(""),a.push(`
`));for(var se=0;se<o.length-1;se++)o[se]=o[se]+a[se];return o.join("")}function it(e,t){typeof e=="string"&&(e=le(e));var n=0;function o(){var a=e[n++];if(!a)return t.complete();t.loadFile(a,function(i,c){if(i)return t.complete(i);var u=Ne(c,a,t);t.patched(a,u,function(f){if(f)return t.complete(f);o()})})}o()}function be(e,t,n,o,a,i,c){c||(c={}),typeof c.context=="undefined"&&(c.context=4);var u=ie(n,o,c);u.push({value:"",lines:[]});function f(P){return P.map(function(I){return" "+I})}for(var m=[],v=0,j=0,h=[],D=1,b=1,S=function(P){var I=u[P],M=I.lines||I.value.replace(/\n$/,"").split(`
`);if(I.lines=M,I.added||I.removed){var _;if(!v){var re=u[P-1];v=D,j=b,re&&(h=c.context>0?f(re.lines.slice(-c.context)):[],v-=h.length,j-=h.length)}(_=h).push.apply(_,C(M.map(function(fe){return(I.added?"+":"-")+fe}))),I.added?b+=M.length:D+=M.length}else{if(v)if(M.length<=c.context*2&&P<u.length-2){var N;(N=h).push.apply(N,C(f(M)))}else{var V,W=Math.min(M.length,c.context);(V=h).push.apply(V,C(f(M.slice(0,W))));var U={oldStart:v,oldLines:D-v+W,newStart:j,newLines:b-j+W,lines:h};if(P>=u.length-2&&M.length<=c.context){var te=/\n$/.test(n),Le=/\n$/.test(o),ue=M.length==0&&h.length>U.oldLines;!te&&ue&&n.length>0&&h.splice(U.oldLines,0,"\\ No newline at end of file"),(!te&&!ue||!Le)&&h.push("\\ No newline at end of file")}m.push(U),v=0,j=0,h=[]}D+=M.length,b+=M.length}},H=0;H<u.length;H++)S(H);return{oldFileName:e,newFileName:t,oldHeader:a,newHeader:i,hunks:m}}function st(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var o=e.hunks[n];o.oldLines===0&&(o.oldStart-=1),o.newLines===0&&(o.newStart-=1),t.push("@@ -"+o.oldStart+","+o.oldLines+" +"+o.newStart+","+o.newLines+" @@"),t.push.apply(t,o.lines)}return t.join(`
`)+`
`}function ze(e,t,n,o,a,i,c){return st(be(e,t,n,o,a,i,c))}function at(e,t,n,o,a,i){return ze(e,e,t,n,o,a,i)}function ct(e,t){return e.length!==t.length?!1:Se(e,t)}function Se(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function lt(e){var t=je(e.lines),n=t.oldLines,o=t.newLines;n!==void 0?e.oldLines=n:delete e.oldLines,o!==void 0?e.newLines=o:delete e.newLines}function dt(e,t,n){e=Ae(e,n),t=Ae(t,n);var o={};(e.index||t.index)&&(o.index=e.index||t.index),(e.newFileName||t.newFileName)&&(He(e)?He(t)?(o.oldFileName=de(o,e.oldFileName,t.oldFileName),o.newFileName=de(o,e.newFileName,t.newFileName),o.oldHeader=de(o,e.oldHeader,t.oldHeader),o.newHeader=de(o,e.newHeader,t.newHeader)):(o.oldFileName=e.oldFileName,o.newFileName=e.newFileName,o.oldHeader=e.oldHeader,o.newHeader=e.newHeader):(o.oldFileName=t.oldFileName||e.oldFileName,o.newFileName=t.newFileName||e.newFileName,o.oldHeader=t.oldHeader||e.oldHeader,o.newHeader=t.newHeader||e.newHeader)),o.hunks=[];for(var a=0,i=0,c=0,u=0;a<e.hunks.length||i<t.hunks.length;){var f=e.hunks[a]||{oldStart:Infinity},m=t.hunks[i]||{oldStart:Infinity};if(Re(f,m))o.hunks.push($e(f,c)),a++,u+=f.newLines-f.oldLines;else if(Re(m,f))o.hunks.push($e(m,u)),i++,c+=m.newLines-m.oldLines;else{var v={oldStart:Math.min(f.oldStart,m.oldStart),oldLines:0,newStart:Math.min(f.newStart+c,m.oldStart+u),newLines:0,lines:[]};ut(v,f.oldStart,f.lines,m.oldStart,m.lines),i++,a++,o.hunks.push(v)}}return o}function Ae(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return le(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return be(void 0,void 0,t,e)}return e}function He(e){return e.newFileName&&e.newFileName!==e.oldFileName}function de(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function Re(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function $e(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function ut(e,t,n,o,a){var i={offset:t,lines:n,index:0},c={offset:o,lines:a,index:0};for(Ve(e,i,c),Ve(e,c,i);i.index<i.lines.length&&c.index<c.lines.length;){var u=i.lines[i.index],f=c.lines[c.index];if((u[0]==="-"||u[0]==="+")&&(f[0]==="-"||f[0]==="+"))ft(e,i,c);else if(u[0]==="+"&&f[0]===" "){var m;(m=e.lines).push.apply(m,C(ee(i)))}else if(f[0]==="+"&&u[0]===" "){var v;(v=e.lines).push.apply(v,C(ee(c)))}else u[0]==="-"&&f[0]===" "?We(e,i,c):f[0]==="-"&&u[0]===" "?We(e,c,i,!0):u===f?(e.lines.push(u),i.index++,c.index++):ke(e,ee(i),ee(c))}Ue(e,i),Ue(e,c),lt(e)}function ft(e,t,n){var o=ee(t),a=ee(n);if(qe(o)&&qe(a)){if(Se(o,a)&&Je(n,o,o.length-a.length)){var i;(i=e.lines).push.apply(i,C(o));return}else if(Se(a,o)&&Je(t,a,a.length-o.length)){var c;(c=e.lines).push.apply(c,C(a));return}}else if(ct(o,a)){var u;(u=e.lines).push.apply(u,C(o));return}ke(e,o,a)}function We(e,t,n,o){var a=ee(t),i=pt(n,a);if(i.merged){var c;(c=e.lines).push.apply(c,C(i.merged))}else ke(e,o?i:a,o?a:i)}function ke(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function Ve(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var o=t.lines[t.index++];e.lines.push(o),t.offset++}}function Ue(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function ee(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var o=e.lines[e.index];if(n==="-"&&o[0]==="+"&&(n="+"),n===o[0])t.push(o),e.index++;else break}return t}function pt(e,t){for(var n=[],o=[],a=0,i=!1,c=!1;a<t.length&&e.index<e.lines.length;){var u=e.lines[e.index],f=t[a];if(f[0]==="+")break;if(i=i||u[0]!==" ",o.push(f),a++,u[0]==="+")for(c=!0;u[0]==="+";)n.push(u),u=e.lines[++e.index];f.substr(1)===u.substr(1)?(n.push(u),e.index++):c=!0}if((t[a]||"")[0]==="+"&&i&&(c=!0),c)return n;for(;a<t.length;)o.push(t[a++]);return{merged:o,changes:n}}function qe(e){return e.reduce(function(t,n){return t&&n[0]==="-"},!0)}function Je(e,t,n){for(var o=0;o<n;o++){var a=t[t.length-n+o].substr(1);if(e.lines[e.index+o]!==" "+a)return!1}return e.index+=n,!0}function je(e){var t=0,n=0;return e.forEach(function(o){if(typeof o!="string"){var a=je(o.mine),i=je(o.theirs);t!==void 0&&(a.oldLines===i.oldLines?t+=a.oldLines:t=void 0),n!==void 0&&(a.newLines===i.newLines?n+=a.newLines:n=void 0)}else n!==void 0&&(o[0]==="+"||o[0]===" ")&&n++,t!==void 0&&(o[0]==="-"||o[0]===" ")&&t++}),{oldLines:t,newLines:n}}function mt(e){for(var t=[],n,o,a=0;a<e.length;a++)n=e[a],n.added?o=1:n.removed?o=-1:o=0,t.push([o,n.value]);return t}function ht(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];o.added?t.push("<ins>"):o.removed&&t.push("<del>"),t.push(gt(o.value)),o.added?t.push("</ins>"):o.removed&&t.push("</del>")}return t.join("")}function gt(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}r.Diff=s,r.applyPatch=Ne,r.applyPatches=it,r.canonicalize=$,r.convertChangesToDMP=mt,r.convertChangesToXML=ht,r.createPatch=at,r.createTwoFilesPatch=ze,r.diffArrays=xe,r.diffChars=g,r.diffCss=z,r.diffJson=ve,r.diffLines=ie,r.diffSentences=B,r.diffTrimmedLines=y,r.diffWords=T,r.diffWordsWithSpace=F,r.merge=dt,r.parsePatch=le,r.structuredPatch=be,Object.defineProperty(r,"__esModule",{value:!0})});async function xt(r){const s=await crypto.subtle.digest("SHA-256",r),l=Array.from(new Uint8Array(s)),d=l.map(p=>("00"+p.toString(16)).slice(-2)).join("");return d}async function bt(r){const s=new TextEncoder().encode(r),l=await xt(s);return l.substr(0,8)}const St=async(r,s)=>{const l=bt(r),d=Diff.diffChars(r,s);return{b:await l,c:d.map(p=>p.added?p.value:p.removed?-p.count:p.count)}},kt=(r,s)=>s.some(l=>r instanceof l);let _e,Ge;function jt(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lt(){return Ge||(Ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qe=new WeakMap,Ce=new WeakMap,Xe=new WeakMap,Be=new WeakMap,Oe=new WeakMap;function Dt(r){if(Ce.has(r))return;const s=new Promise((l,d)=>{const p=()=>{r.removeEventListener("complete",g),r.removeEventListener("error",w),r.removeEventListener("abort",w)},g=()=>{l(),p()},w=()=>{d(r.error||new DOMException("AbortError","AbortError")),p()};r.addEventListener("complete",g),r.addEventListener("error",w),r.addEventListener("abort",w)});Ce.set(r,s)}const Pe=r=>Oe.get(r),Et=["get","getKey","getAll","getAllKeys","count"],Ct=["put","add","delete","clear"],Te=new Map;function Ze(r,s){if(!(r instanceof IDBDatabase&&!(s in r)&&typeof s=="string"))return;if(Te.get(s))return Te.get(s);const l=s.replace(/FromIndex$/,""),d=s!==l,p=Ct.includes(l);if(!(l in(d?IDBIndex:IDBObjectStore).prototype)||!(p||Et.includes(l)))return;const g=async function(w,...k){const x=this.transaction(w,p?"readwrite":"readonly");let E=x.store;d&&(E=E.index(k.shift()));const T=await E[l](...k);return p&&await x.done,T};return Te.set(s,g),g}async function Bt(r){const s=await crypto.subtle.digest("SHA-256",r),l=Array.from(new Uint8Array(s)),d=l.map(p=>("00"+p.toString(16)).slice(-2)).join("");return d}var Ot=window.ReactDOM;const Ie=()=>document.location.href.includes("zed.dev")?"https://code.zed.dev":"https://code.zed.vision";let Ye=!0,G="",Q=0,Pt=0,et="",tt="",he="",nt;const Tt=async({onChange:r,code:s,language:l})=>{const d=window.document.getElementById("container");if(!d){const x=document.getElementById("container");x.id="container",document.body.appendChild(x)}const p=l==="typescript"?"file:///main.tsx":"file:///main.html";let g;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)){const x=window.document.createElement("div");x.id="ace",window.document.body.appendChild(x),await ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.min.js"),l==="typescript"?await ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-typescript.min.js"):await ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-html.min.js"),await ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/theme-monokai.min.js"),window.document.getElementById("ace").style.setProperty("display","block"),d.style.setProperty("display","none"),g=window.ace.edit("ace"),g.getSession().setMode("ace/mode/typescript");const E=T=>setTimeout(()=>{let F=window.ace.edit("ace"),R=F.getTheme();R!=="ace/theme/monokai "&&(F.setOptions({fontSize:"14pt"}),F.setTheme("ace/theme/monokai"),E(2*T))},T);E(100),g.setValue(s),g.blur()}if(window.monaco===void 0){const x="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.21.2/min/vs",{require:E}=await ce(`${x}/loader.min.js`);E.config({paths:{vs:x}}),await new Promise(T=>E(["vs/editor/editor.main"],F=>{T(F)}))}const w=window.monaco,k={monaco:w,editor:w.editor.create(window.document.getElementById("container"),{formatOnType:!0,scrollbar:{horizontal:"hidden",verticalHasArrows:!0,verticalScrollbarSize:20},minimap:{enabled:!1},folding:!1,multiCursorModifier:"alt",wordWrap:"on",wordWrapBreakAfterCharacters:">([{]))],;} ",mouseWheelZoom:!1,wordWrapColumn:80,automaticLayout:!0,scrollBeyondLastLine:!1,autoIndent:"brackets",autoClosingQuotes:"always",padding:{bottom:300},lineNumbers:"on",autoClosingBrackets:"always",autoClosingOvertype:"always",suggest:{},codeLens:!0,autoSurround:"languageDefined",trimAutoWhitespace:!0,codeActionsOnSaveTimeout:100,model:w.editor.getModel(p)||w.editor.createModel(s,l,w.Uri.parse(p)),value:s,language:l,theme:"vs-dark"})};if(k.editor.onDidChangeModelContent(()=>r(k.editor.getValue())),g&&g.session.on("change",function(){const x=g.getValue();k.editor.setValue(x),r(x)}),g&&document.getElementById("container").replaceWith(document.getElementById("ace")),k.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!0,noSemanticValidation:!0,noSyntaxValidation:!0}),l==="typescript"){const x=[{name:"react",url:"https://unpkg.com/@types/react@17.0.0/index.d.ts",depend:["global","csstype","react-dom","prop-types"]},{name:"global",url:"https://unpkg.com/@types/react@17.0.0/global.d.ts",depend:[]},{name:"prop-types",url:"https://unpkg.com/@types/prop-types@15.7.3/index.d.ts",depend:[]},{name:"react-dom",url:"https://unpkg.com/@types/react-dom@17.0.0/index.d.ts",depend:[]},{name:"csstype",url:"https://unpkg.com/csstype@3.0.5/index.d.ts",depend:[]},{name:"@emotion/styled/base.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/base.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/styled/index.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/index.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/cache/index.d.ts",url:"https://unpkg.com/@emotion/cache@11.0.0/types/index.d.ts",depend:["@emotion/utils"]},{name:"@emotion/react/index.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/index.d.ts",depend:["@emotion/cache"]},{name:"@emotion/react/jsx-namespace.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/jsx-namespace.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/css-prop.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/css-prop.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/helper.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/helper.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/theming.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/theming.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/serialize/index.d.ts",url:"https://unpkg.com/@emotion/serialize@1.0.0/types/index.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/utils/index.d.ts",url:"https://unpkg.com/@emotion/utils@1.0.0/types/index.d.ts",depend:[]},{name:"framer-motion",url:"https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.d.ts",depend:[]},{name:"popmotion",url:"https://unpkg.com/browse/popmotion@9.0.1/lib/index.d.ts"}],E=x.map(({name:T,url:F})=>(async()=>k.monaco.languages.typescript.typescriptDefaults.addExtraLib(await(await fetch(F)).text(),T.includes("@emotion")?`file:///node_modules/${T}`:`file:///node_modules/@types/${T}/index.d.ts`))());return k.monaco.languages.typescript.typescriptDefaults.setCompilerOptions({target:k.monaco.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,allowUmdGlobalAccess:!0,strict:!0,allowJs:!0,noEmitOnError:!0,allowSyntheticDefaultImports:!0,moduleResolution:k.monaco.languages.typescript.ModuleResolutionKind.Nodejs,module:k.monaco.languages.typescript.ModuleKind.CommonJS,noEmit:!0,typeRoots:["node_modules/@types"],jsx:"react-jsx",esModuleInterop:!0}),await Promise.all(E),k.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!1,noSemanticValidation:!1,noSyntaxValidation:!1}),k}};async function Me(r){const s=new TextEncoder().encode(r),l=await Bt(s);return l.substr(0,8)}function It(r){const s=new Promise((l,d)=>{const p=()=>{r.removeEventListener("success",g),r.removeEventListener("error",w)},g=()=>{l(X(r.result)),p()},w=()=>{d(r.error),p()};r.addEventListener("success",g),r.addEventListener("error",w)});return s.then(l=>{l instanceof IDBCursor&&Qe.set(l,r)}).catch(()=>{}),Oe.set(s,r),s}let Fe={get(r,s,l){if(r instanceof IDBTransaction){if(s==="done")return Ce.get(r);if(s==="objectStoreNames")return r.objectStoreNames||Xe.get(r);if(s==="store")return l.objectStoreNames[1]?void 0:l.objectStore(l.objectStoreNames[0])}return X(r[s])},set(r,s,l){return r[s]=l,!0},has(r,s){return r instanceof IDBTransaction&&(s==="done"||s==="store")?!0:s in r}};function Mt(r){Fe=r(Fe)}function Ft(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(s,...l){const d=r.call(Pe(this),s,...l);return Xe.set(d,s.sort?s.sort():[s]),X(d)}:Lt().includes(r)?function(...s){return r.apply(Pe(this),s),X(Qe.get(this))}:function(...s){return X(r.apply(Pe(this),s))}}function Nt(r){return typeof r=="function"?Ft(r):(r instanceof IDBTransaction&&Dt(r),kt(r,jt())?new Proxy(r,Fe):r)}function X(r){if(r instanceof IDBRequest)return It(r);if(Be.has(r))return Be.get(r);const s=Nt(r);return s!==r&&(Be.set(r,s),Oe.set(s,r)),s}function zt(r,s,{blocked:l,upgrade:d,blocking:p,terminated:g}={}){const w=indexedDB.open(r,s),k=X(w);return d&&w.addEventListener("upgradeneeded",x=>{d(X(w.result),x.oldVersion,x.newVersion,X(w.transaction))}),l&&w.addEventListener("blocked",()=>l()),k.then(x=>{g&&x.addEventListener("close",()=>g()),p&&x.addEventListener("versionchange",()=>p())}).catch(()=>{}),k}Mt(r=>({...r,get:(s,l,d)=>Ze(s,l)||r.get(s,l,d),has:(s,l)=>!!Ze(s,l)||r.has(s,l)}));const ge=async()=>{const r=zt("localZedCodeStore",1,{upgrade(d){d.createObjectStore("codeStore")}}),s=d=>{if(d.length<10)return!1;const p=[...d.slice(0,8)].filter(w=>w<0||w>"f").length>0,g=d.slice(8);return!!(p&&g[0]==="["&&g[g.length-1]==="]")},l={async get(d,p="string"){let g;try{if(g=(await r).get("codeStore",d),!g)return null}catch(w){return null}if(p==="json")return JSON.parse(g);if(p==="string"){const w=await g;if(typeof w===p)return w;const k=new TextDecoder,x=k.decode(w);return x}return g},async put(d,p){let g;try{const k=await l.get(d);if(k.length===8&&k!==p){const x=await l.get(p),E=await l.get(k),T=await Me(E);if(T===k){const F=await St(x,E),R=F.b+JSON.stringify(F.c);(await r).put("codeStore",R,T)}}}catch{g=""}if(g!==""&&p===g)return data;let w;return typeof p!="string"?w=new TextDecoder().decode(p):w=p,(await r).put("codeStore",w,d)},async delete(d){return(await r).delete("codeStore",d)},async clear(){return(await r).clear("codeStore")},async keys(){return(await r).getAllKeys("codeStore")}};return l};export const getProjects=async()=>{const r=await ot(),s=await ge(),l=await s.get(r,"json");return l||(await s.put(r,JSON.stringify([])),[])};async function ot(){const r=await ge(),s=await r.get("uuid");if(!s)if(window.location.href.includes("zed.dev"))r.put("uuid","1234");else{const l=await fetch("https://code.zed.vision/register"),d=await l.json();return r.put("uuid",d.uuid),d.uuid}return s}export async function run(r="window"){await Ke("https://unpkg.com/@babel/standalone@7.12.9/babel.min.js"),r==="editor"&&vt(),r=="window"&&yt(async()=>{const y=await nt();window.open(y)});const s=await ge(),l=await ot(),d=await E();x(ie(d)),he=d;const p=await Tt({language:"typescript",code:d,onChange:w});async function g(y){if(Q===1)return;try{Q=1;const L=await k(),B=document.getElementById("error");if(Q=0,y!==G)return;if(L&&L.length){if(G!=y)return;if(et===y)return;const O=await diff(he,y);if(O.c.length<=3){p.monaco.editor.setTheme("hc-black");return}B.innerHTML=L[0].messageText.toString(),B.style.display="block",et=y;return}he=y,B.style.display="none",p.monaco.editor.setTheme("vs-dark"),Pt=0,Q=0,x(ie(y))}catch(L){if(Q=0,y!==G)return;p.monaco.editor.setTheme("vs-light"),setTimeout(()=>{p.monaco.editor.setTheme("hc-black")},50),console.error(L)}}function w(y){if(!p)return;if(G=y,!Q)g(G);else{const L=y,B=setInterval(()=>{(y!==G||!Q)&&clearInterval(B),Q||g(G)},100)}}async function k(){if(!p||!p.monaco)return;const y=p.monaco.Uri.parse("file:///main.tsx"),L=await p.monaco.languages.typescript.getTypeScriptWorker(),B=await(await L(y)).getSemanticDiagnostics("file:///main.tsx"),O=await(await L(y)).getCompilerOptionsDiagnostics("file:///main.tsx"),z=await(await L(y)).getSyntacticDiagnostics("file:///main.tsx");return[...B,...O,...z]}Ke("diffLoader.js");async function x(y){const L=/import/gi,B="///",O=`
    Object.assign(window, React);
    if (window.Motion) {
        Object.assign(window, window.Motion);
    }
    if (window.emotionStyled){
      window.styled= window.emotionStyled;
    }
    ;
    `+y.replaceAll(L,B).replace("export default","DefaultElement = "),z=async()=>{const A=new Function("code",`return function(){  
          let DefaultElement;
        
        ${O}

                return ReactDOM.render(jsx(DefaultElement), document.getElementById("root"));
      }`)();A(),nt=async()=>{const C=new Function("code",`return function(){
            let DefaultElement;
  
          ${O}
  
                  return ReactDOMServer.renderToString(jsx(DefaultElement));
        }`)(),q=C(),J=Array.from(document.querySelector("head > style[data-emotion=css]").sheet.cssRules).map($=>$.cssText).filter($=>q.includes($.substring(3,8))).join(`
  `);let Z;if(O.includes("body{")){const $=O.indexOf("body{"),Y=O.slice($),xe=Y.indexOf("}");Z=Y.slice(0,xe+1)}let oe="",we="";O.includes("Motion")&&(oe='<script crossorigin src="https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.js"></script>',we="const {motion} = Motion");const ye=`<!DOCTYPE html>
        <html lang="en">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <head profile="http://www.w3.org/2005/10/profile">
        <link rel="icon" 
              type="image/png"
              href="https://zed.vision/favicon.ico">
        <style>
        ${Z}
        ${J}
        </style>
        </head>
        <body>
        <div id="root">
        ${q}
        </div>
        <script crossorigin src="https://unpkg.com/react@17.0.1/umd/react.production.min.js"></script>
        ${oe}
        <script crossorigin src="https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/react@11.1.2/dist/emotion-react.umd.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/styled@11.0.0/dist/emotion-styled.umd.min.js"></script>
        <script type="module">
        Object.assign(window, emotionReact);

       const styled = window["emotionStyled"];

        let DefaultElement;

        ${O}

        ReactDOM.hydrate(jsx(DefaultElement), document.body.children[0]);
        </script>
        </body>
        </html>
        `,K=await F(ye),ve=await R(K);return ve}};if(!Ye){const A=async C=>{if(C!==he)return;if(tt===C)return;tt=C;const q=new Request(Ie(),{body:C,method:"POST",headers:{"content-type":"text/plain;charset=UTF-8"}}),J=await Me(C);try{const Z=await s.get("PROJECTNAME");Z!==J&&(console.log("now put"),await s.put(J,C),await s.put("PROJECTNAME",J),T("h",J))}catch(Z){}};A(G)}Ye=!1,z()}async function E(){const y=await ge(),L=new URLSearchParams(window.location.search),B=L.get("h")||await y.get("PROJECTNAME");if(B){let O,z;try{O=await y.get(B)}catch{console.error("error json parse: "+z)}if(z)return z;let A;try{const C=await fetch(Ie()+"/?h="+B);A=await C.json()}catch(C){const q=await Me(me);return y.put(q,me),await y.put("PROJECTNAME",q),me}return A}return me}function T(y,L){const B=new URLSearchParams(window.location.search);B.set(y,L),window.history.replaceState({},"",decodeURIComponent(`${window.location.pathname}?${B}`))}function F(y){const L=new Blob([y],{type:"text/html"});return L}async function R(y){const L=Ie(),B=new Request(L,{body:y,method:"POST",headers:{"content-type":"text/html;charset=UTF-8",SHARE:"true"}}),O=await fetch(B),{hash:z}=await O.json();return`${L}/${z}`}function ie(y){const{transform:L}=window.Babel;return L(`/** @jsx jsx */

  Object.assign(window, React);
  `+y,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code}}
