var SHATEST;const corsHeaders={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,HEAD,POST,OPTIONS","Access-Control-Max-Age":"86400"};async function handleCloudRequest(e){if(e.method==="GET"){const r=new URL(e.url);if(e.url.includes("?h")){const s=r.searchParams.get("h");if(s!==null){const n=await SHATEST.get(s,"stream");if(n!==null)return new Response(n,{headers:{"content-type":"text/javascript"}})}}if(e.url.includes("?r")){const s=r.searchParams.get("r");if(s!==null){const n=await SHATEST.get(s,"stream");if(n!==null)return new Response(n,{headers:{"content-type":"text/html"}})}}return Response.redirect("https://zed.vision/code",301)}else if(e.method==="POST"){const r=await e.json(),s=new TextEncoder().encode(JSON.stringify(r)),n=await crypto.subtle.digest({name:"SHA-256"},s),a=Array.from(new Uint8Array(n)),c=a.map(l=>("00"+l.toString(16)).slice(-2)).join(""),o=c.substring(0,8);await SHATEST.put(o,s);const t=new Response(`{"hash":"${o}"}`);return t.headers.append("Access-Control-Allow-Origin","*"),t.headers.append("Access-Control-Allow-Methods","GET,HEAD,POST,OPTIONS"),t.headers.append("Access-Control-Max-Age","86400"),t}return handleOptions(e)}function handleOptions(e){const r=e.headers;let s;return new Response(e.body,{headers:{...r,...corsHeaders,"Access-Control-Allow-Headers":e.headers.get("Access-Control-Request-Headers")}})}self.runner=self.runner||"worker-cf",addEventListener("fetch",e=>{if(self.runner!=="worker-cf")return;e.respondWith(handleCloudRequest(e.request))});
