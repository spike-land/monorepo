!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).jsframe=t()}(this,function(){require("./JSFrame.css");var e=require("@riversun/event-emitter"),t=require("./CCommon.js"),n=require("./utils/WindowEventHelper.js"),r=require("./utils/Inherit.js"),a=require("./appearance/CFrameAppearance.js"),l=require("./appearance/CDomPartsBuilder.js"),o=require("./utils/CSimpleLayoutAnimator.js"),i=require("event-listener-helper"),s={yosemite:require("./presets/appearance/PresetStyleYosemite.js"),redstone:require("./presets/appearance/PresetStyleRedstone.js"),popup:require("./presets/appearance/PresetStylePopup.js"),toast:require("./presets/appearance/PresetStyleToast.js"),material:require("./presets/appearance/PresetStyleMaterial.js")},m={yosemite:require("./presets/window/PresetWindowYosemite.js")},p={};function d(e,t,n,r,a,l,o,i){var s=this;s.movable=!0,s.id=e,s.property={},s.extra={},s.parentCanvas=null,s.htmlElement=null,s.pullUpDisabled=!1,i&&(s.pullUpDisabled=i.pullUpDisabled),s.htmlElement=document.createElement(p.CBEAN.HTML_ELEMENT),s.htmlElement.id=p.CBEAN.HTML_ELEMENT_ID_PREFIX+e,s.htmlElement.style.position="absolute",s.htmlElement.style.left=parseInt(t,10)+"px",s.htmlElement.style.top=parseInt(n,10)+"px",s.htmlElement.style.width=parseInt(r,10)+"px",s.htmlElement.style.height=parseInt(a,10)+"px",null!==l&&(s.htmlElement.style.zIndex=l),s.htmlElement.style.borderColor="#000000",s.htmlElement.style.fontSize="1px",s.htmlElement.parent=s,s.htmlElement.onmousedown=s.onmouseDown,"ontouchstart"in window&&(s.htmlElement.ontouchstart=function(e){e.preventDefault(),s.onmouseDown.bind(this)(e)}),s.htmlElement.typeName=p.CBEAN.TYPE_NAME,s.htmlElement.usage="nothing",s.htmlElement.isRangeLimited=!1,s.htmlElement.argX=1,s.htmlElement.argY=1,s.externalAreaClickedListener=null,s.onMoveListener=null}function h(e,t,n,r,a,l){var o=this;o.enablePullUp=!0,o.currentObject=null,o.onTopObject=null,o.offsetX=0,o.offsetY=0,o.mouseDownSource=null,o.id=t,o.canvasElement=null,o.parentElement=e,o.beanList=new Array,o.beanIdName={},o.beanNameId={},o.eventData=new function(){this.x=0,this.y=0,this.screenX=0,this.screenY=0,this.deltaX=0,this.deltaY=0,this.isMoved=!1,this.targetTypeName=null,this.targetUsage=null,this.targetObject=null},o.baseZIndex=0,o.setBaseZIndex=function(e){o.baseZIndex=e},o.getBaseZIndex=function(){return o.baseZIndex},o.canvasElement=document.createElement(p.CANVAS.HTML_ELEMENT),o.canvasElement.style.zIndex=2e3,o.canvasElement.id=o.id,o.canvasElement.style.boxSizing="border-box",o.canvasElement.style.position="absolute",o.canvasElement.style.left=parseInt(n)+"px",o.canvasElement.style.top=parseInt(r)+"px",o.canvasElement.style.width=parseInt(a)+p.CANVAS.WIDTH_ADJUST_20180722+"px",o.canvasElement.style.height=parseInt(l)+p.CANVAS.HEIGHT_ADJUST_20180722+"px",o.canvasElement.style.backgroundColor="transparent",o.canvasElement.style.borderStyle="none",o.canvasElement.style.margin="0px",o.canvasElement.style.borderWidth="0px",o.canvasElement.style.borderColor="transparent",o.parentElement.appendChild(o.canvasElement)}function u(e,n,r,a,l,o,i,s){var m=this;u.superConstructor.call(this,e,n,r,a,l,o,i,s),m.anchor=t.LEFT_TOP,m.showTitleBar=s.showTitleBar,m.canvasNetHeight=null,m.canvasNetWidth=null,m.frameHeightAdjust=s.frameHeightAdjust,m.frameComponentMap={},m.canvas=null,m.myCanvasId=null,m.floatingButton=null,m.titleBarClassNameDefault="jsframe-titlebar-default",m.titleBarClassNameFocused="jsframe-titlebar-focused",m.titleBarHeight=s.titleBarHeight,m.titleBarCaption=s.titleBarCaption,m.titleBarCaptionLeftMargin=s.titleBarCaptionLeftMargin,m.titleBarCaptionFontSize=s.titleBarCaptionFontSize,m.titleBarCaptionFontWeight=s.titleBarCaptionFontWeight,m.titleBarBorderBottomDefault=s.titleBarBorderBottomDefault,m.titleBarBorderBottomFocused=s.titleBarBorderBottomFocused,m.titleBarCaptionTextShadow=s.titleBarCaptionTextShadow,m.titleBarCaptionTextAlign=s.titleBarCaptionTextAlign,m.titleAdjustWidth=2,m.windowId=e,m.exBorderWidth=0,m.myCanvasId=e+"_canvas";var d=document.createElement("img");if(d.src="",d.style.position="absolute",d.style.left="2px",d.style.top="2px",d.style.width="16px",d.style.height="16px",d.style.visibility="hidden",m.titleBar=document.createElement("div"),m.titleBar.className="jsframetitlebar",m.showTitleBar){if(m.titleBar.id=e+"_title",m.titleBar.style.position="absolute",m.titleBar.style.boxSizing="border-box",m.titleBar.style.top="0px",m.titleBar.style.left="0px",m.titleBar.style.width=a-m.titleAdjustWidth+p.CANVAS.WIDTH_ADJUST_20180722+"px",m.titleBar.style.userSelect="none",m.titleBarHeight){var c=0;m.titleBarBorderBottomDefault&&(c=0),m.titleBar.style.height=parseInt(m.titleBarHeight,10)+0+"px"}m.titleBarColorDefault&&(m.titleBar.style.background=m.titleBarColorDefault),m.titleBar.style.zIndex=0,m.titleBar.style.color=m.titleBarCaptionColorDefault,m.titleBar.style.fontSize=m.titleBarCaptionFontSize,m.titleBar.style.fontWeight=m.titleBarCaptionFontWeight,m.titleBar.style.textShadow=m.titleBarCaptionTextShadow,m.titleBar.style.textAlign=m.titleBarCaptionTextAlign,m.titleBar.style.lineHeight=m.titleBar.style.height,m.titleBar.style.borderBottom=m.titleBarBorderBottomDefault,m.titleBar.style.overflow="hidden";var f=document.createTextNode(""),v=document.createElement("span");v.id=m.id+"_titleBarText",null!=m.titleBarCaptionLeftMargin?(v.style.position="absolute",v.style.left=parseInt(m.titleBarCaptionLeftMargin,10)+"px"):(v.style.position="absolute",v.style.left="0px",v.style.right="0px"),v.style.top="0px",v.appendChild(f),m.titleBar.appendChild(v)}m.htmlElement.appendChild(m.titleBar);var E=parseInt(m.titleBarHeight,10)-c,g=parseInt(m.titleAdjustWidth,10);m.showTitleBar||(E=0,g=0,c=0),m.canvasNetWidth=a-g,m.canvasNetHeight=l-E-g-1-c+m.frameHeightAdjust,m.htmlElement.style.cursor="move",m.canvas=new h(m.htmlElement,m.myCanvasId,0,E,a-g,l-E-g),m.canvas.enablePullUp=!1,m.canvas.canvasElement.style.backgroundColor=p.CFRAME.CANVAS_ELEMENT_BGCOLOR,m.canvas.canvasElement.style.cursor="default",m.canvas.canvasElement.onmousedown=m.canvasMouseDown,"ontouchstart"in window&&(m.canvas.canvasElement.ontouchstart=function(e){var t=e.changedTouches[0];m.canvasMouseDown.bind(this)(t)}),m.canvas.canvasElement.parentCFrame=m;var w,C,B,x=parseInt(m.canvas.canvasElement.style.width,10),b=parseInt(m.canvas.canvasElement.style.height,10),I=s.resizeAreaWidth,T=s.resizeAreaHeight,F=s.resizeAreaOffset;s.resizeAreaVisible&&(w="rgba(255, 0, 0, 0.5)",C="rgba(0, 0, 255, 0.5)",B="rgba(0, 255, 0, 0.5)");var A=new y(m.myCanvasId+"_RD",x+F,b+F,I,T,0,"RD",w);A.htmlElement.style.cursor="se-resize",A.htmlElement.argX=0,A.htmlElement.argY=0;var M=new y(m.myCanvasId+"_DD",0,b+F,x+F,T,0,"DD",C);M.htmlElement.style.cursor="n-resize",M.htmlElement.argX=0,M.htmlElement.argY=0;var D=new y(m.myCanvasId+"_RR",x+F,0,I,b+F,0,"RR",B);for(var R in D.htmlElement.style.cursor="w-resize",D.htmlElement.argY=0,D.htmlElement.argX=0,m.canvas.addBean(A),m.canvas.addBean(M),m.canvas.addBean(D),m.removeMarkers=function(){m.canvas.removeBean(A.id),m.canvas.removeBean(M.id),m.canvas.removeBean(D.id),m.htmlElement.style.cursor="default"},m.removeMarkers2=function(){m.canvas.removeBean(A.id),m.canvas.removeBean(M.id),m.canvas.removeBean(D.id)},m.enableMarkers=function(e){e?(A.htmlElement.style.display="flex",M.htmlElement.style.display="flex",D.htmlElement.style.display="flex",A.htmlElement.style.cursor="se-resize",M.htmlElement.style.cursor="n-resize",D.htmlElement.style.cursor="w-resize"):(A.htmlElement.style.display="none",M.htmlElement.style.display="none",D.htmlElement.style.display="none")},s.frameComponents){var N=s.frameComponents[R];N.setFrame(m),"closeButton"==N.id&&(N.htmlElement.onclick=m.close),N.htmlElement.querySelector(".jsframe-child-menu")&&m.eventListenerHelper.addEventListener(N.htmlElement,"click",function(e){var t=e.target.getAttribute("component-id");if(m.hideFrameComponentChildMenus({exceptFrameComponentId:t}),t){var n=m.getFrameComponentElement(t).querySelector(".jsframe-child-menu");n?n.style.display="table"==n.style.display?"none":"table":console.error("frameComponent child menu isnt found. frameComponentId="+t)}},{listenerName:"frame-component_child-menu-listener"}),m.addFrameComponent(N)}m.htmlElement.style.backgroundColor="transparent",m.htmlElement.oncontextmenu=this.contextMenu,m.caribValue=0,m.exBorderWidth&&(m.htmlElement.style.borderWidth=m.exBorderWidth+"px"),m.htmlElement.style.width=parseInt(m.htmlElement.style.width,10)-0+"px",m.htmlElement.style.height=parseInt(m.htmlElement.style.height,10)-0+1+"px",m.htmlElement.typeName="cwindow",m.htmlElement.overflow="auto",m.htmlElement.style.boxSizing="content-box",s.frameBorderStyle&&(m.htmlElement.style.borderStyle=s.frameBorderStyle),s.frameBoxShadow&&(m.htmlElement.style.boxShadow=s.frameBoxShadow),parseInt(s.frameBorderWidthDefault,10)>=0&&(m.htmlElement.style.borderWidth=s.frameBorderWidthDefault,m.htmlElement.style.borderColor=s.frameBorderColorDefault),parseInt(s.frameBorderRadius,10)>=0&&(m.htmlElement.style.borderRadius=s.frameBorderRadius),m.onCloseFrameListener=null}function c(t,n,r,a,l,o){var s=n,m=r,p=a,d=l,h=o.zindex,u=this;this.jsFrame=null,this.control=null,this.minFrameWidth=128,this.minWindowHeight=32,this.eventListenerHelper=new i,this.overrayTransparentScreenEnabled=!1,this.overrayTransparentScreenOnResize=!0,this.titleBarColorFocused=o.titleBarColorFocused,this.titleBarColorDefault=o.titleBarColorDefault,this.titleBarCaptionColorDefault=o.titleBarCaptionColorDefault,this.titleBarCaptionColorFocused=o.titleBarCaptionColorFocused,c.superConstructor.call(u,t,s,m,p,d,h,null,o),u.frameBorderColorDefault=o.frameBorderColorDefault,u.frameBorderColorFocused=o.frameBorderColorFocused,u.frameBorderWidthDefault=o.frameBorderWidthDefault,u.frameBorderWidthFocused=o.frameBorderWidthFocused,u.iframe=null,u.ifDelta=0,u.resizable=!0,u.onMouseMoveOnIframe=null,u.onMouseUpOnIframe=null,u._hasFocus=!1,u._hasFocusTime=0,u.htmlElement.typeName="cifwindow";var f="riversun_"+t;u.dframe=document.createElement("div"),u.iframe=document.createElement("iframe"),u.iframe.name=f,u.iframe.id=f,u.iframe.frameBorder="0",u.iframe.zIndex=-1,u.iframe.allowTransparency="true",u.iframe.width=u.canvasNetWidth-u.ifDelta+0,u.iframe.height=u.canvasNetHeight-u.ifDelta+0,u.showTitleBar=o.showTitleBar,u.getFrameInnerBorderRadius=o.getFrameInnerBorderRadius,u.frameBorderRadius=o.frameBorderRadius,u.adjustFrameBorderRadius(),u.useIframe=!1,u.canvas.canvasElement.appendChild(u.iframe),u.canvas.canvasElement.appendChild(u.dframe),this.setUseIframe=function(e){u.useIframe=e,u.iframe.style.visibility="hidden",u.iframe.style.position="absolute",u.iframe.style.left="0px",u.iframe.style.top="0px",u.iframe.style.width="100%",u.iframe.style.height="100%",u.dframe.style.visibility="hidden",u.dframe.style.position="absolute",u.dframe.style.left="0px",u.dframe.style.boxSizing="content-box",u.dframe.style.top="0px",u.dframe.style.width="100%",u.dframe.style.height="100%",u.dframe.style.backgroundColor="white",e?(u.iframe.style.visibility="visible",u.dframe.style.visibility="hidden"):(u.iframe.style.visibility="hidden",u.dframe.style.visibility="visible")},u.setUseIframe(o.useIframe),(u.overrayTransparentScreenEnabled||u.overrayTransparentScreenOnResize)&&(u.transparence=document.createElement("span"),u.transparence.style.position="absolute",u.transparence.style.left="0px",u.transparence.style.top="0px",u.transparence.style.width="0px",u.transparence.style.height="0px",u.transparence.style.zIndex=4,u.transparence.style.borderWidth="0px",u.transparence.style.borderColor="#ff00ee",u.transparence.style.borderStyle="none",u.transparence.style.cursor="default",u.transparence.style.pointerEvents="none",u.canvas.canvasElement.style.backgroundColor=o.frameBackgroundColor,u.canvas.canvasElement.appendChild(u.transparence)),u.eventEmitter=new e,u.appearance=o}function f(e,t,n,r,a,l){f.superConstructor.call(this,e,t,n,r,a,l);var o=this;document.addEventListener("click",function(e){for(var t in o.beanList)o.beanList[t].onBodyClicked(e)})}function y(e,t,n,r,a,l,o,i){var s=this;y.superConstructor.call(this,e,t,n,r,a,l,o),s.htmlElement.typeName="cmarkerwindow",s.htmlElement.usage=o,s.htmlElement.isRangeLimited=!1,s.htmlElement.style.borderStyle="none",s.htmlElement.style.zIndex=1,i&&(s.htmlElement.style.background=i),s.getWindowType=function(){return"CMarkerWindow"}}function v(e){var t,n=this,r=null;function a(e){n.windowManager.windowMouseUp(e)}function l(e){n.windowManager.windowMouseMove(e)}n.isWindowManagerFixed=!0,e&&0==e.fixed&&(n.isWindowManagerFixed=!1),e&&e.parentElement&&(r=e.parentElement),n.hAlign="left",n.vAlign="top",e&&e.horizontalAlign&&(n.hAlign=e.horizontalAlign),e&&e.verticalAlign&&(n.vAlign=e.verticalAlign),n.pullToRefresh=!1,e&&"boolean"==typeof e.pullToRefresh&&(n.pullToRefresh=e.pullToRefresh),n.touchActionManipulation=!0,e&&"boolean"==typeof e.touchActionManipulation&&(n.touchActionManipulation=e.touchActionManipulation),r?n.isWindowManagerFixed?((t=document.createElement("div")).id="jsFrame_fixed_"+n.generateUUID(),t.setAttribute("style","position:fixed;"+n.hAlign+":0px;"+n.vAlign+":0px;margin:0px;padding:0px;"),r.appendChild(t)):((t=document.createElement("div")).id="jsFrame_absolute_"+n.generateUUID(),t.setAttribute("style","position:absolute;"+n.hAlign+":0px;"+n.vAlign+":0px;margin:0px;padding:0px;"),r.appendChild(t)):n.isWindowManagerFixed?((t=document.createElement("div")).id="jsFrame_fixed_"+n.generateUUID(),t.setAttribute("style","position:fixed;"+n.hAlign+":0px;"+n.vAlign+":0px;margin:0px;padding:0px;"),document.body.appendChild(t),r=t):((t=document.createElement("div")).id="jsFrame_absolute_"+n.generateUUID(),t.setAttribute("style","position:absolute;"+n.hAlign+":0px;"+n.vAlign+":0px;margin:0px;padding:0px;"),document.body.appendChild(t),r=t),document.addEventListener("mouseup",a),document.addEventListener("mousemove",l),"ontouchend"in window&&document.addEventListener("touchend",function(e){a.bind(this)(e)}),"ontouchmove"in window&&(n.touchActionManipulation&&n.doEnableTouchActionManipulation(),n.pullToRefresh||n.doDisablePullToRefresh(),document.addEventListener("touchmove",function(e){e.preventDefault(),l.bind(this)(e)})),n.windowManager=new f(r,"windowManager_"+n.generateUUID(),0,0,0,0),n.domPartsBuilder=null}return p.CBEAN={},p.CBEAN.HTML_ELEMENT="span",p.CBEAN.HTML_ELEMENT_ID_PREFIX="htmlElement_",p.CBEAN.TYPE_NAME="bean",d.prototype.getWindowType=function(){return"CBeanFrame"},d.prototype.setOnMoveListener=function(e){this.onMoveListener=e},d.prototype._onMove=function(e){this.onMoveListener&&this.onMoveListener(e)},d.prototype.setMovable=function(e){var t=this;return e?(t.htmlElement.argX=1,t.htmlElement.argY=1):(t.htmlElement.argX=0,t.htmlElement.argY=0),t.movable=e,t},d.prototype.setParentCanvas=function(e){var t=this;return t.parentCanvas=e,t.htmlElement.parentCanvas=t.parentCanvas,t},d.prototype.setOnExternalAreaClickedListener=function(e){return this.externalAreaClickedListener=e,this},d.prototype.onBodyClicked=function(e){var t=this,n=e.pageX,r=e.pageY,a=parseInt(t.htmlElement.style.left),l=parseInt(t.htmlElement.style.top),o=parseInt(t.htmlElement.style.width),i=parseInt(t.htmlElement.style.height);a<n&&n<a+o&&l<r&&r<l+i||t.externalAreaClickedListener&&t.externalAreaClickedListener()},d.prototype.onmouseDown=function(e){var t=this,n=e;if("touchstart"===e.type){if(1!==e.touches.length)return!0;n=e.changedTouches[0]}var r=t.parent;if(0==n.button||"touchstart"===e.type){if(r.pullUpDisabled)return!1;t.parentCanvas.currentObject=t,t.parentCanvas.pullUp(r.id)}else if(2==n.button)return!1;return t.parentCanvas.currentObject&&(t.parentCanvas.offsetX=n.pageX-parseInt(t.parentCanvas.currentObject.style.left,10),t.parentCanvas.offsetY=n.pageY-parseInt(t.parentCanvas.currentObject.style.top,10)),!1},p.CANVAS={},p.CANVAS.HTML_ELEMENT="div",p.CANVAS.WIDTH_ADJUST_20180722=2,p.CANVAS.HEIGHT_ADJUST_20180722=3,h.prototype.mouseMove=function(e){var t=this,n=e;if("touchmove"===e.type){if(1!==e.touches.length)return!0;n=e.changedTouches[0]}if(t.currentObject){t.eventData.targetTypeName=t.currentObject.typeName,t.eventData.targetUsage=t.currentObject.usage,t.eventData.targetObject=t.currentObject;var r=n.pageX-t.offsetX,a=n.pageY-t.offsetY,l=t.currentObject.style.left,o=t.currentObject.style.top,i=parseInt(r,10),s=parseInt(a,10),m=i+parseInt(t.currentObject.style.width,10),p=s+parseInt(t.currentObject.style.height,10),d=parseInt(t.canvasElement.style.width,10),h=parseInt(t.canvasElement.style.height,10),u=0,c=0;if(1==t.currentObject.isRangeLimited&&(i<=0||m>d||s<=0||p>h))u=0,c=0;else{u=parseInt(r,10)-parseInt(l,10),c=parseInt(a,10)-parseInt(o,10),t.currentObject.style.left=parseInt(t.currentObject.style.left)+u*t.currentObject.argX+"px",t.currentObject.style.top=parseInt(t.currentObject.style.top)+c*t.currentObject.argY+"px";var f=t.currentObject.parent;f&&f._onMove&&f._onMove()}return t.eventData.deltaX=u,t.eventData.deltaY=c,t.eventData}return null},h.prototype.mouseUp=function(e){this.currentObject=null,this.mouseDownSource=null},h.prototype.pullUp=function(e){var t=this,n=[],r=t.beanList;for(var a in r)n.push(r[a]);var l=r[e];t.enablePullUp&&t.pullUpSort(l,n,t.baseZIndex),t.onTopObject=l},h.prototype.pullUpSort=function(e,t,n){for(var r in e.htmlElement.style.zIndex=t.length+n,t.sort(function(e,t){return-parseInt(e.htmlElement.style.zIndex,10)+parseInt(t.htmlElement.style.zIndex,10)}),t)t[r].htmlElement.style.zIndex=t.length-1-r+n},h.prototype.removeBean=function(e){var t=this.beanList;this.canvasElement.removeChild(t[e].htmlElement),delete t[e]},h.prototype.addBean=function(e){var t=this,n=t.beanList,r=t.beanIdName,a=t.beanNameId;n[e.id]=e,e.property.name&&(a[e.property.name]=e.id,r[e.id]=e.property.name);var l=0;for(var o in n)l++;e.htmlElement.style.zIndex=l+t.baseZIndex,e.setParentCanvas(t),this.canvasElement.appendChild(e.htmlElement)},h.prototype.getParentElement=function(){return this.parentElement},p.CFRAME={},p.CFRAME.CANVAS_ELEMENT_BGCOLOR="transparent",p.CFRAME.MODAL_BACKGROUND_FRAME_ID_PREFIX="window__modal_window_background_",r(u,d),u.prototype.setTitleBarClassName=function(e,t){var n=this;return e&&(n.titleBarClassNameDefault=e,n.titleBarClassNameFocused=e),t&&(n.titleBarClassNameFocused=t),n},u.prototype.addFrameComponent=function(e){var t=this;return t.frameComponentMap[e.id]=e,t.canvas.canvasElement.appendChild(e.htmlElement),t},u.prototype.getFrameComponentElement=function(e){return this.frameComponentMap[e]?this.frameComponentMap[e].htmlElement:null},u.prototype.removeFrameComponentById=function(e){var t=this;t.canvas.canvasElement.removeChild(t.frameComponentMap[e].htmlElement),delete t.frameComponentMap[e]},u.prototype.showFrameComponent=function(e,t){var n=this.getFrameComponentElement(e);return n&&(n.style.display=t||"flex"),this},u.prototype.hideFrameComponent=function(e){var t=this.getFrameComponentElement(e);return t&&(t.style.display="none"),this},u.prototype.hideAllVisibleFrameComponents=function(){var e=this.frameComponentMap;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t].htmlElement;"none"===n.style.display&&(n._alreadyNone=!0),n.style.display="none"}},u.prototype.showAllVisibleFrameComponents=function(){var e=this.frameComponentMap;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t].htmlElement;n._alreadyNone?n._alreadyNone=null:n.style.display="flex"}},u.prototype.hideFrameComponentChildMenus=function(e){var t=this.frameComponentMap;for(var n in t)if(t.hasOwnProperty(n)){if(e&&e.exceptFrameComponentId&&n===e.exceptFrameComponentId)continue;var r=t[n];r.childMenu&&(r.childMenu.style.display="none")}},u.prototype.setTitle=function(e){var t=this;if(t.title=e,t.showTitleBar){var n=document.createTextNode(e);t.titleBar.firstChild.replaceChild(n,t.titleBar.firstChild.firstChild)}return t},u.prototype.resize=function(e,t,n,r){var a=this,l=parseInt(a.htmlElement.style.left,10),o=parseInt(a.htmlElement.style.top,10),i=parseInt(a.htmlElement.style.width,10),s=parseInt(a.htmlElement.style.height,10);a.htmlElement.style.left=parseInt(l+e,10)+"px",a.htmlElement.style.top=parseInt(o+t,10)+"px",a.htmlElement.style.width=parseInt(i+n,10)+"px",a.htmlElement.style.height=parseInt(s+r,10)+"px";var m=parseInt(a.canvas.canvasElement.style.width,10),p=parseInt(a.canvas.canvasElement.style.height,10);for(var d in a.canvas.canvasElement.style.width=m+n+"px",a.canvas.canvasElement.style.height=p+r+"px",a.showTitleBar&&(a.titleBar.style.width=m+n+"px"),a.canvas.beanList){var h=a.canvas.beanList[d];"cmarkerwindow"==h.htmlElement.typeName&&("RD"==h.htmlElement.usage?(h.htmlElement.style.left=parseInt(h.htmlElement.style.left,10)+n+"px",h.htmlElement.style.top=parseInt(h.htmlElement.style.top,10)+r+"px"):"DD"==h.htmlElement.usage?(h.htmlElement.style.width=parseInt(h.htmlElement.style.width,10)+n+"px",h.htmlElement.style.top=parseInt(h.htmlElement.style.top,10)+r+"px"):"RR"==h.htmlElement.usage&&(h.htmlElement.style.left=parseInt(h.htmlElement.style.left,10)+n+"px",h.htmlElement.style.height=parseInt(h.htmlElement.style.height,10)+r+"px"))}},u.prototype.canvasMouseDown=function(e){null==this.parentCFrame.parentCanvas.mouseDownSource&&(this.parentCFrame.parentCanvas.mouseDownSource="childcanvas")},u.prototype.mouseUp=function(e){this.canvas.mouseUp(e)},u.prototype.close=function(e){var t=this.parentObject.parentCanvas,n=this.parentObject;console.log('CFrame#close "'+n.title+"(@"+n.getName()+')" @'+n.windowId),n.closeInternally(e,t,n.id)},u.prototype.closeFrame=function(e){var t=this;console.log('CFrame#closeFrame "'+t.title+"("+t.getName()+')" @'+t.windowId),t.closeInternally(e,this.parentCanvas,t.windowId)},u.prototype.closeInternally=function(e,t,n){var r=this;t?(t.removeBean(n),r.modalBackgroundWindowId&&(t.removeBean(r.modalBackgroundWindowId),r.modalBackgroundWindowId=null),r.onCloseFrameListener&&r.onCloseFrameListener(r)):console.error("Window("+n+") may have been closed")},u.prototype.setOnCloseFrameListener=function(e){this.onCloseFrameListener=e},u.prototype.contextMenu=function(){return!1},u.prototype.setTitleBarTextColor=function(e){this.titleBar.style.color=e},u.prototype.setPosition=function(e,t,n){var r=this,a=r.getWidth(),l=r.getHeight();return r._setPositionInternally(e,t,n,a,l),r},u.prototype._setPositionInternally=function(e,n,r,a,l){var o=this;r&&(o.anchor=r),r&&t.LEFT_TOP!=r?t.HCENTER_TOP==r?(o.htmlElement.style.left=-a/2+e+"px",o.htmlElement.style.top=n+"px"):t.RIGHT_TOP==r?(o.htmlElement.style.left=-a+e+"px",o.htmlElement.style.top=n+"px"):t.LEFT_VCENTER==r?(o.htmlElement.style.left=e+"px",o.htmlElement.style.top=-l/2+n+"px"):t.HCENTER_VCENTER==r?(o.htmlElement.style.left=-a/2+e+"px",o.htmlElement.style.top=-l/2+n+"px"):t.RIGHT_VCENTER==r?(o.htmlElement.style.left=-a+e+"px",o.htmlElement.style.top=-l/2+n+"px"):t.LEFT_BOTTOM==r?(o.htmlElement.style.left=e+"px",o.htmlElement.style.top=-l+n+"px"):t.HCENTER_BOTTOM==r?(o.htmlElement.style.left=-a/2+e+"px",o.htmlElement.style.top=-l+n+"px"):t.RIGHT_BOTTOM==r&&(o.htmlElement.style.left=-a+e+"px",o.htmlElement.style.top=-l+n+"px"):(o.htmlElement.style.left=e+"px",o.htmlElement.style.top=n+"px")},u.prototype.getPosition=function(){var e,n,r=this,a=r.getWidth(),l=r.getHeight(),o=r.anchor;return o&&t.LEFT_TOP!=o?t.HCENTER_TOP==o?(e=parseInt(r.htmlElement.style.left,10)+a/2,n=parseInt(r.htmlElement.style.top,10)):t.RIGHT_TOP==o?(e=parseInt(r.htmlElement.style.left,10)+a,n=parseInt(r.htmlElement.style.top,10)):t.LEFT_VCENTER==o?(e=parseInt(r.htmlElement.style.left,10),n=parseInt(r.htmlElement.style.top,10)+l/2):t.HCENTER_VCENTER==o?(e=parseInt(r.htmlElement.style.left,10)+a/2,n=parseInt(r.htmlElement.style.top,10)+l/2):t.RIGHT_VCENTER==o?(e=parseInt(r.htmlElement.style.left,10)+a,n=parseInt(r.htmlElement.style.top,10)+l/2):t.LEFT_BOTTOM==o?(e=parseInt(r.htmlElement.style.left,10),n=parseInt(r.htmlElement.style.top,10)+l):t.HCENTER_BOTTOM==o?(e=parseInt(r.htmlElement.style.left,10)+a/2,n=parseInt(r.htmlElement.style.top,10)+l):t.RIGHT_BOTTOM==o&&(e=parseInt(r.htmlElement.style.left,10)+a,n=parseInt(r.htmlElement.style.top,10)+l):(e=parseInt(r.htmlElement.style.left,10),n=parseInt(r.htmlElement.style.top,10)),{x:e,y:n,anchor:o}},u.prototype.getLeft=function(){return parseInt(this.htmlElement.style.left,10)},u.prototype.getTop=function(){return parseInt(this.htmlElement.style.top,10)},u.prototype.getWidth=function(){return parseInt(this.htmlElement.style.width,10)},u.prototype.getHeight=function(){return parseInt(this.htmlElement.style.height,10)},u.prototype.getSize=function(){return{width:this.getWidth(),height:this.getHeight()}},u.prototype.setSize=function(e,t,n){var r=this,a=!0;return n&&(a=!1),r.resize(0,0,e-r.getWidth(),t-r.getHeight(),a),r},u.prototype.getWindowId=function(){return this.windowId},u.prototype.getName=function(){return this.property.name},u.prototype.setName=function(e){this.property.name=e},r(c,u),c.prototype.getFrameView=function(){return this.dframe},c.prototype.getFrameAppearance=function(){return this.appearance},c.prototype.setHTML=function(e){this.dframe.innerHTML=e},c.prototype.setFrameInFrame=function(e){var t=this,r=t.dframe?t.dframe.firstChild:null;r&&(Date.now||(Date.now=function(){return(new Date).getTime()}),e?t.eventEmitter.only("resize","fif-listener",function(){r.setAttribute(n.MATCH_PARENT_CHANGE_MARKER_ATTR,Date.now())}):(r.removeAttribute(n.MATCH_PARENT_CHANGE_MARKER_ATTR),t.eventEmitter.only("resize","fif-listener",function(){})))},c.prototype.$=function(e){var t=this;return t.useIframe?t.iframe.contentWindow.document.querySelector(e):t.dframe.querySelector(e)},c.prototype.on=function(e,t,n){var r=this,a=r.getFrameComponentElement(e);a&&r.eventListenerHelper.addEventListener(a,t,function(a){n(r,a,{type:"frameComponent",id:e,eventType:t})},{listenerName:"frame-component-listener"}),"frame"!==e&&"window"!==e||("move"!==t||r.eventEmitter.hasListenerFuncs("move")||r.setOnMoveListener(function(e){r.eventEmitter.emit("move",r._getCurrentSizePos())}),r.eventEmitter.on(t,n));var l=r.$(e);if(l&&(r.eventListenerHelper.hasEventListener(l,t,"frame-dom-listener")&&r.eventListenerHelper.removeEventListener(l,t,null,{listenerName:"frame-dom-listener"}),r.eventListenerHelper.addEventListener(l,t,function(a){n(r,a,{type:"dom",id:e,eventType:t})},{listenerName:"frame-dom-listener"})),!l){var o=r.canvas.canvasElement.querySelector(e);o&&o.addEventListener(t,function(a){n(r,a,{type:"dom",id:e,eventType:t})})}},c.prototype.adjustFrameBorderRadius=function(){var e=this;if(parseInt(e.frameBorderRadius,10)>0){var t=e.getFrameInnerBorderRadius(e,e._hasFocus),n=t.innerBorderRadius,r=parseInt(t.frameAppearance.titleBarHeight,10);e.showTitleBar?(e.canvas.canvasElement.style.borderBottomRightRadius=n,e.canvas.canvasElement.style.borderBottomLeftRadius=n,e.iframe.style.borderBottomRightRadius=n,e.iframe.style.borderBottomLeftRadius=n,e.titleBar.style.borderTopLeftRadius=n,e.titleBar.style.borderTopRightRadius=n):(e.canvas.canvasElement.style.borderRadius=n,e.iframe.style.borderRadius=n),e.dframe&&(0===r&&(e.dframe.style.borderTopRightRadius||(e.dframe.style.borderTopRightRadius=n),e.dframe.style.borderTopLeftRadius||(e.dframe.style.borderTopLeftRadius=n)),e.dframe.style.borderBottomRightRadius=n,e.dframe.style.borderBottomLeftRadius=n)}},c.prototype.handleReleasingFocus=function(e){var t=this,n=t._hasFocus;for(var r in t._hasFocus=!1,t.titleBar.className=t.titleBarClassNameDefault,t.titleBarColorDefault&&(t.titleBar.style.background=t.titleBarColorDefault),t.titleBar.style.color=t.titleBarCaptionColorDefault,t.frameBorderColorDefault&&(t.htmlElement.style.borderColor=t.frameBorderColorDefault),t.frameBorderWidthDefault&&(t.htmlElement.style.borderWidth=t.frameBorderWidthDefault,t.adjustFrameBorderRadius()),"cifwindow"==t.htmlElement.typeName&&t.overrayTransparentScreenEnabled&&(t.transparence.style.width=parseInt(t.iframe.width,10)+"px",t.transparence.style.height=parseInt(t.iframe.height,10)+"px"),t.frameComponentMap)t.frameComponentMap[r].handleReleasingFocus();return t.titleBarBorderBottomDefault&&(t.titleBar.style.borderBottom=t.titleBarBorderBottomDefault),n&&t.eventEmitter.emit("blur",{target:t}),t},c.prototype.handleTakingFocus=function(e){var t=this,n=t._hasFocus;for(var r in t._hasFocus=!0,t._hasFocus=Date.now(),t.overrayTransparentScreenEnabled&&(t.transparence.style.width="0px",t.transparence.style.height="0px"),t.titleBar.className=t.titleBarClassNameFocused,t.titleBarColorFocused&&(t.titleBar.style.background=t.titleBarColorFocused),t.titleBar.style.color=t.titleBarCaptionColorFocused,t.frameBorderColorFocused&&(t.htmlElement.style.borderColor=t.frameBorderColorFocused),t.frameBorderWidthFocused&&(t.htmlElement.style.borderWidth=t.frameBorderWidthFocused,t.adjustFrameBorderRadius()),t.titleBarBorderBottomFocused&&(t.titleBar.style.borderBottom=t.titleBarBorderBottomFocused),t.frameComponentMap)t.frameComponentMap[r].handleTakingFocus();return n||t.eventEmitter.emit("focus",{target:t}),t},u.prototype.show=function(e){var t=this;return t.htmlElement.style.display="flex",e&&0==e.requestFocus||t.requestFocus(),t},u.prototype.showModal=function(e){var t=this,n=new a;n.showTitleBar=!0,n.showCloseButton=!1,n.frameBorderRadius="0px",n.frameBorderStyle="none",n.frameBorderWidthDefault="0px",n.frameBorderWidthFocused="0px",n.frameBoxShadow=null,n.frameBackgroundColor="transparent",n.frameComponents=[],n.frameHeightAdjust=0,n.titleBarHeight="0px",n.titleBarBorderBottomFocused=null,n.titleBarCaptionLeftMargin="0px",n.onInitialize=function(){},n.pullUpDisabled=!0;var r=t.parentCanvas,l=p.CFRAME.MODAL_BACKGROUND_FRAME_ID_PREFIX+t.id,o=new c(l,0,0,1,1,n);o.setSize(window.innerWidth,window.innerHeight,!0),o.setResizable(!1),window.addEventListener("resize",function(){o.setSize(window.innerWidth,window.innerHeight,!0)}),t.modalBackgroundWindowId=l,o.hide(),r.addWindow(o),o.setTitle("").getFrameView().innerHTML='<div class="jsframe-modal-window-background"></div>',o.getFrameView().style.backgroundColor="rgba(0,0,0,0.0)",o.show(),t.show(),e&&t.setOnCloseFrameListener(e)},u.prototype.getWindowManager=function(){return this.parentCanvas},c.prototype.hide=function(){return this.htmlElement.style.display="none",this},c.prototype.onmouseDown=function(e){var t=this;document.body.ondrag=function(){return!1},t.decorator=u.prototype.onmouseDown,t.decorator(e);var n=t.parent,r=t.parentCanvas;for(var a in r.beanList){var l=r.beanList[a];a==n.getWindowId()||l.handleReleasingFocus()}n.handleTakingFocus()},c.prototype.mouseUp=function(e){var t=this;(t.overrayTransparentScreenEnabled||t.overrayTransparentScreenOnResize)&&(t.parentCanvas.onTopObject==t?(t.transparence.style.width="0px",t.transparence.style.height="0px"):t.overrayTransparentScreenEnabled&&(t.transparence.style.width=parseInt(t.iframe.width)+"px",t.transparence.style.height=parseInt(t.iframe.height)+"px")),t.decorator=u.prototype.mouseUp,t.decorator(e),document.body.ondrag=null,document.body.onselectstart=null,t.transparence.style.pointerEvents="none"},c.prototype.setMinFrameSize=function(e,t){this.minFrameWidth=e,this.minWindowHeight=t},c.prototype.resize=function(e,t,n,r,a){var l=this;if(!l.resizable&&a)return null;var o=l.getSize(),i=parseInt(l.htmlElement.style.left,10),s=parseInt(l.htmlElement.style.top,10),m=parseInt(l.htmlElement.style.width,10),p=parseInt(l.htmlElement.style.height,10);a&&m+n<l.minFrameWidth&n<0&&(l.htmlElement.style.width=m+"px",n=0),a&&p+r<l.minWindowHeight&r<0&&(l.htmlElement.style.height=p+"px",r=0),l.htmlElement.style.left=i+e+"px",l.htmlElement.style.top=s+t+"px",l.htmlElement.style.width=m+n+"px",l.htmlElement.style.height=p+r+"px";var d=parseInt(l.canvas.canvasElement.style.width,10),h=parseInt(l.canvas.canvasElement.style.height,10);for(var u in l.canvas.canvasElement.style.width=d+n+"px",l.canvas.canvasElement.style.height=h+r+"px",l.titleBar.style.width=d-l.ifDelta+n+0+"px",l.iframe.width=d-l.ifDelta+n+0+"px",l.iframe.height=h-l.ifDelta+r+l.frameHeightAdjust+"px",(l.overrayTransparentScreenEnabled||l.overrayTransparentScreenOnResize)&&(l.transparence.style.width=parseInt(l.iframe.width)+"px",l.transparence.style.height=parseInt(l.iframe.height)+"px"),l.frameComponentMap)l.frameComponentMap[u].updateAlign();for(var c in l.canvas.beanList){var f=l.canvas.beanList[c];"cmarkerwindow"==f.htmlElement.typeName&&("RD"==f.htmlElement.usage?(f.htmlElement.style.left=parseInt(f.htmlElement.style.left)+n+"px",f.htmlElement.style.top=parseInt(f.htmlElement.style.top)+r+"px"):"DD"==f.htmlElement.usage?(f.htmlElement.style.width=parseInt(f.htmlElement.style.width)+n+"px",f.htmlElement.style.top=parseInt(f.htmlElement.style.top)+r+"px"):"RR"==f.htmlElement.usage&&(f.htmlElement.style.left=parseInt(f.htmlElement.style.left)+n+"px",f.htmlElement.style.height=parseInt(f.htmlElement.style.height)+r+"px"))}var y=l.getSize();o.width===y.width&&o.height===y.height||l.eventEmitter.emit("resize",l._getCurrentSizePos())},c.prototype._getCurrentSizePos=function(){var e=this,t=e.getSize(),n=e.getPosition();return{target:e,pos:n,size:t}},c.prototype.resizeDirect=function(e,t,n){var r=this;if(!r.resizable&&n)return null;for(var a in r.htmlElement.style.width=e+"px",r.htmlElement.style.height=t+"px",r.canvas.canvasElement.style.width=e+"px",r.canvas.canvasElement.style.height=t-r.titleBar.style.height+"px",r.titleBar.style.width=e-r.ifDelta+"px",r.iframe.width=e-r.ifDelta+"px",r.iframe.height=t-r.ifDelta+r.frameHeightAdjust+"px",(r.overrayTransparentScreenEnabled||r.overrayTransparentScreenOnResize)&&(r.transparence.style.width=parseInt(r.iframe.width)+"px",r.transparence.style.height=parseInt(r.iframe.height)+"px"),r.frameComponentMap)r.frameComponentMap[a].updateAlign();for(var l in r.canvas.beanList){var o=r.canvas.beanList[l];"cmarkerwindow"==o.htmlElement.typeName&&("RD"==o.htmlElement.usage?(o.htmlElement.style.left=e+"px",o.htmlElement.style.top=t+"px"):"DD"==o.htmlElement.usage?(o.htmlElement.style.width=e+"px",o.htmlElement.style.top=t+"px"):"RR"==o.htmlElement.usage&&(o.htmlElement.style.left=e+"px",o.htmlElement.style.height=t+"px"))}},c.prototype.requestFocus=function(){var e=this,t=e.parentCanvas.beanList;for(var n in t){var r=t[n];n==e.getWindowId()?r.handleTakingFocus():r.handleReleasingFocus()}e.parentCanvas.pullUp(e.id)},c.prototype.setUrl=function(e){var t=this;return new Promise(function(n,r){e?t.setUseIframe(!0):(t.setUseIframe(!1),n()),t.iframe.src=e,t.iframe.onload=function(){var e=function(e){var n=e.pageX,r=e.pageY;if("touchmove"===e.type){var a=e.changedTouches;if(1!==e.touches.length)return!0;n=a[0].pageX,r=a[0].pageY}var l=t.getLeft(),o=t.getTop(),i=document.createEvent("MouseEvents");i.initMouseEvent("mousemove",!0,!1,window,e.detail,e.screenX,e.screenY,n+l,r+o,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),t.parentCanvas.windowMouseMove(i),t.onMouseMoveOnIframe&&t.onMouseMoveOnIframe(i)};t.iframe.contentWindow.document.onmousemove=e,t.iframe.contentWindow.document.ontouchmove=e;var r=function(e){var n=e.pageX,r=e.pageY;if("touchend"===e.type){var a=e.changedTouches;n=a[0].pageX,r=a[0].pageY}var l=t.getLeft(),o=t.getTop(),i=document.createEvent("MouseEvents");i.initMouseEvent("mouseup",!0,!1,window,e.detail,e.screenX,e.screenY,n+l,r+o,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),t.parentCanvas.windowMouseUp(i),t.onMouseUpOnIframe&&t.onMouseUpOnIframe(i)};t.iframe.contentWindow.document.onmouseup=r,t.iframe.contentWindow.document.ontouchend=r,n(t,t.iframe.contentWindow.document)}})},c.prototype.getIfDocument=function(){return this.iframe.contentWindow.document},c.prototype.setScrolling=function(e){this.iframe.scrolling=e},c.prototype.getScrolling=function(e){return this.iframe.scrolling},c.prototype.setResizable=function(e){var t=this;return t.resizable=e,t.enableMarkers(e),t},c.prototype.setControl=function(e){var t=this;e&&(e.frame=t,t.control=t.jsFrame.createWindowEventHelper(e),t.control.setupDefaultEvents())},r(f,h),f.prototype.getWindow=function(e){return this.beanList[e]},f.prototype.addWindow=function(e){var t=this,n=e.getWindowId(),r=e.getName();t.beanIdName[n]=r,t.beanNameId[r]=n,t.addBean(e)},f.prototype.containsWindowName=function(e){return!!this.beanNameId[e]},f.prototype.getWindowByName=function(e){var t=this.beanNameId[e];return t?this.getWindow(t):null},f.prototype.windowMouseMove=function(e){var t=this;if(null==t.currentObject)return null;var n=!1,r=t.beanList;for(var a in r){var l=r[a],o=l.canvas.mouseMove(e);if(n|=null!=o,null!=o&&"cmarkerwindow"==o.targetTypeName){var i=o.targetObject;l.transparence.style.pointerEvents="auto","RD"==i.usage?l.resize(0,0,o.deltaX,o.deltaY,!0):"DD"==i.usage?l.resize(0,0,0,o.deltaY,!0):"RR"==i.usage&&l.resize(0,0,o.deltaX,0,!0)}}n||"childcanvas"==this.mouseDownSource||t.mouseMove(e)},f.prototype.windowMouseUp=function(e){this.mouseUp(e);var t=this.beanList;for(var n in t)t[n].mouseUp(e)},f.prototype.removeBean=function(e){var t=this,n=t.beanList,r=n[e];if(null!=r){var a=r._hasFocus;t.canvasElement.removeChild(r.htmlElement),delete n[e];var l=t.beanIdName[e];l&&(delete t.beanIdName[e],delete t.beanNameId[l]);var o=0,i=null;if(a){for(var e in n){var s=n[e];o<=s._hasFocusTime&&!s.pullUpDisabled&&(o=s._hasFocusTime,i=s)}i&&i.requestFocus()}r.parentCanvas=null}},r(y,d),v.prototype.doEnableTouchActionManipulation=function(){var e=document.documentElement.getAttribute("style");e?e.endsWith(";")||(e+=";"):e="",-1===e.indexOf("touch-action")&&(e+="-ms-touch-action: manipulation;touch-action: manipulation;",document.documentElement.setAttribute("style",e))},v.prototype.doDisablePullToRefresh=function(){var e=document.body.getAttribute("style");e?e.endsWith(";")||(e+=";"):e="",-1===e.indexOf("overscroll-behavior-y")&&(e+="overscroll-behavior-y: contain;",document.body.setAttribute("style",e))},v.prototype.getDomPartsBuilder=function(){var e=this;return e.domPartsBuilder||(e.domPartsBuilder=new l),e.domPartsBuilder},v.prototype.create=function(e){var t={};t.name=e.name;var n,r=e.title,a=e.left,l=e.top,o=e.width,i=e.height,s=e.appearance,m=e.preset,p=e.appearanceName,d=e.appearanceParam,h=e.style,u=e.minWidth,c=e.minHeight,f=e.html,y=e.resizable,v=e.movable,E=e.url,g=e.urlLoaded,w=e.presetParam;if(m?(n=this.getPresetWindow(m).getPresetWindow(w),s=this.createPresetStyle(n.appearanceName,{appearanceParam:n.appearanceParam})):p&&(s=this.createPresetStyle(p,{appearanceParam:d})),e.clientHeight){var C=parseInt(s.titleBarHeight||0)-s.frameHeightAdjust;i=e.clientHeight+C}var B=this.createFrame(a,l,o,i,s,t);if(r&&B.setTitle(r),f&&B.setHTML(f),E){var x=B.setUrl(E);g&&x.then(g)}if(0==y&&B.setResizable(!1),0==v&&B.setMovable(!1),u&&c&&(B.minFrameWidth=u),c&&(B.minWindowHeight=c,e.clientHeight&&(B.minWindowHeight=c+C)),h){var b=B.getFrameView();for(var I in h)h.hasOwnProperty(I)&&(b.style[I]=h[I])}return n&&n.setupPresetWindow(B),B},v.prototype.createFrame=function(e,t,n,r,a,l){var o=this;a||(a=o.createFrameAppearance()),a.initialize(),e||(e=0),t||(t=0),n||(n=128),r||(r=128);var i=new c("window_"+o.generateUUID(),e,t,n,r,a);if(i.jsFrame=o,l&&l.name&&i.setName(l.name),i.hide(),o.windowManager.addWindow(i),a.getTitleBarStyle){var s=a.getTitleBarStyle();s&&i.setTitleBarClassName(s.titleBarClassNameDefault,s.titleBarClassNameFocused)}else a.titleBarClassNameDefault&&a.titleBarClassNameFocused?i.setTitleBarClassName(a.titleBarClassNameDefault,a.titleBarClassNameFocused):a.titleBarClassNameDefault&&i.setTitleBarClassName(a.titleBarClassNameDefault,a.titleBarClassNameDefault);return i},v.prototype.containsWindowName=function(e){return this.windowManager.containsWindowName(e)},v.prototype.getWindowByName=function(e){return this.windowManager.getWindowByName(e)},v.prototype.generateUUID=function(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},v.prototype.createFrameAppearance=function(){return new a},v.prototype.createAnimator=function(){return new o},v.prototype.createWindowEventHelper=function(e){return e||(e={}),e.verticalAlign=this.vAlign,e.horizontalAlign=this.hAlign,new n(e)},v.prototype.getPresetWindow=function(e,t){return m[e]?m[e]:null},v.prototype.createPresetStyle=function(e,t){var n=this.createFrameAppearance();if(t&&t.focusedFrameOnly&&(n.focusedFrameOnly=t.focusedFrameOnly),s[e]){var r=null;return t&&t.appearanceParam&&(r=t.appearanceParam),s[e].getStyle(n,r)}return console.error('[JSFrame] Preset appearance "'+e+'" not found.'),n},v.prototype.showToast=function(e){if(e){var t,n=this,r=60,a=260,l=1e3,o=window.innerHeight-10-r/2,i=window.innerHeight-20-r/2,s="",m={borderRadius:"10px",background:"rgba(0,0,0,0.8)"};e.style&&(m=e.style),e.height&&(r=e.height),e.width&&(a=e.width),e.duration&&(l=e.duration),e.align&&("top"==e.align?(o=10+r/2,i=20+r/2):"center"==e.align&&(o=window.innerHeight/2,i=window.innerHeight/2)),e.html&&(s=e.html),e.text&&(s=e.text),t=1==e.closeButton;var p=n.createPresetStyle("toast");m.borderRadius&&(p.frameBorderRadius=m.borderRadius),e.closeButtonColor&&(p.captionClor=e.closeButtonColor);var d=n.create({name:"toast_"+n.generateUUID(),width:a,height:r,movable:!1,resizable:!1,appearance:p,style:m,html:'<div id="my_element" style="box-sizing:border-box;display: flex;justify-content: center;align-items: center;padding:10px;font-size:16px;color:darkgray;height:'+r+'px">'+s+"</div>"});t||d.hideFrameComponent("closeButton");var h=window.innerWidth/2;"right"==n.hAlign&&(h=-h),"bottom"==n.vAlign&&(o-=window.innerHeight,i-=window.innerHeight),n.createAnimator().set(d).setDuration(300).fromPosition(h,o,"CENTER_CENTER").toPosition(h,i,"CENTER_CENTER").toAlpha(1).fromAlpha(0).start(0,!1).then(function(e){return e.setDuration(300).fromPosition(h,i,"CENTER_CENTER").toPosition(h,o,"CENTER_CENTER").fromAlpha(1).toAlpha(.5).start(l,!1)}).then(function(e){e.get().closeFrame()})}},Object.freeze(p),window.JSFrame=v,v});
//# sourceMappingURL=jsframe.umd.js.map
