(()=>{var Fn=Object.create,se=Object.defineProperty,Rn=Object.getPrototypeOf,zn=Object.prototype.hasOwnProperty,On=Object.getOwnPropertyNames,Ln=Object.getOwnPropertyDescriptor;var Vn=t=>se(t,"__esModule",{value:!0});var b=(t,e)=>()=>(e||(e={exports:{}},t(e.exports,e)),e.exports);var _n=(t,e,n)=>{if(Vn(t),e&&typeof e=="object"||typeof e=="function")for(let s of On(e))!zn.call(t,s)&&s!=="default"&&se(t,s,{get:()=>e[s],enumerable:!(n=Ln(e,s))||n.enumerable});return t},Pn=t=>t&&t.__esModule?t:_n(se(t!=null?Fn(Rn(t)):{},"default",{value:t,enumerable:!0}),t);var Ue=b((e0,De)=>{"use strict";function Gn(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var s=0;s<t.length;s++){var r=t.charAt(s),i=r.charCodeAt(0);if(e[i]!==255)throw new TypeError(r+" is ambiguous");e[i]=s}var o=t.length,c=t.charAt(0),x=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function A(a){if(a instanceof Uint8Array||(ArrayBuffer.isView(a)?a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength):Array.isArray(a)&&(a=Uint8Array.from(a))),!(a instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(a.length===0)return"";for(var d=0,w=0,k=0,h=a.length;k!==h&&a[k]===0;)k++,d++;for(var p=(h-k)*l+1>>>0,f=new Uint8Array(p);k!==h;){for(var g=a[k],m=0,v=p-1;(g!==0||m<w)&&v!==-1;v--,m++)g+=256*f[v]>>>0,f[v]=g%o>>>0,g=g/o>>>0;if(g!==0)throw new Error("Non-zero carry");w=m,k++}for(var E=p-w;E!==p&&f[E]===0;)E++;for(var P=c.repeat(d);E<p;++E)P+=t.charAt(f[E]);return P}function U(a){if(typeof a!="string")throw new TypeError("Expected String");if(a.length===0)return new Uint8Array;var d=0;if(a[d]!==" "){for(var w=0,k=0;a[d]===c;)w++,d++;for(var h=(a.length-d)*x+1>>>0,p=new Uint8Array(h);a[d];){var f=e[a.charCodeAt(d)];if(f===255)return;for(var g=0,m=h-1;(f!==0||g<k)&&m!==-1;m--,g++)f+=o*p[m]>>>0,p[m]=f%256>>>0,f=f/256>>>0;if(f!==0)throw new Error("Non-zero carry");k=g,d++}if(a[d]!==" "){for(var v=h-k;v!==h&&p[v]===0;)v++;for(var E=new Uint8Array(w+(h-v)),P=w;v!==h;)E[P++]=p[v++];return E}}}function R(a){var d=U(a);if(d)return d;throw new Error("Non-base"+o+" character")}return{encode:A,decodeUnsafe:U,decode:R}}De.exports=Gn});var C=b(re=>{"use strict";re.TextEncoder=TextEncoder;re.TextDecoder=TextDecoder});var G=b((n0,Te)=>{"use strict";var{TextEncoder:Qn,TextDecoder:Xn}=C(),Jn=new Xn,Kn=t=>Jn.decode(t),Hn=new Qn,$n=t=>Hn.encode(t);function Wn(t,e){let n=new Uint8Array(e),s=0;for(let r of t)n.set(r,s),s+=r.length;return n}Te.exports={decodeText:Kn,encodeText:$n,concat:Wn}});var je=b((s0,Me)=>{"use strict";var{encodeText:Zn}=G(),Ne=class{constructor(e,n,s,r){this.name=e,this.code=n,this.codeBuf=Zn(this.code),this.alphabet=r,this.codec=s(r)}encode(e){return this.codec.encode(e)}decode(e){for(let n of e)if(this.alphabet&&this.alphabet.indexOf(n)<0)throw new Error(`invalid character '${n}' in '${e}'`);return this.codec.decode(e)}};Me.exports=Ne});var Fe=b((r0,Be)=>{"use strict";var Yn=(t,e,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let r=t.length;for(;t[r-1]==="=";)--r;let i=new Uint8Array(r*n/8|0),o=0,c=0,x=0;for(let l=0;l<r;++l){let A=s[t[l]];if(A===void 0)throw new SyntaxError("Invalid character "+t[l]);c=c<<n|A,o+=n,o>=8&&(o-=8,i[x++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return i},es=(t,e,n)=>{let s=e[e.length-1]==="=",r=(1<<n)-1,i="",o=0,c=0;for(let x=0;x<t.length;++x)for(c=c<<8|t[x],o+=8;o>n;)o-=n,i+=e[r&c>>o];if(o&&(i+=e[r&c<<n-o]),s)for(;i.length*n&7;)i+="=";return i},ts=t=>e=>({encode(n){return es(n,e,t)},decode(n){return Yn(n,e,t)}});Be.exports={rfc4648:ts}});var Q=b((i0,Re)=>{"use strict";var z=Ue(),ns=je(),{rfc4648:u}=Fe(),{decodeText:ss,encodeText:rs}=G(),is=()=>({encode:ss,decode:rs}),ze=[["identity","\0",is,""],["base2","0",u(1),"01"],["base8","7",u(3),"01234567"],["base10","9",z,"0123456789"],["base16","f",u(4),"0123456789abcdef"],["base16upper","F",u(4),"0123456789ABCDEF"],["base32hex","v",u(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",u(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",u(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",u(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",u(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",u(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",u(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",u(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",u(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",z,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",z,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",z,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",z,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",u(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",u(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",u(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",u(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Oe=ze.reduce((t,e)=>(t[e[0]]=new ns(e[0],e[1],e[2],e[3]),t),{}),os=ze.reduce((t,e)=>(t[e[1]]=Oe[e[0]],t),{});Re.exports={names:Oe,codes:os}});var M=b((S,Le)=>{"use strict";var T=Q(),{encodeText:bs,decodeText:X,concat:Ve}=G();function as(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:n,codeBuf:s}=I(t);return cs(n,e),Ve([s,e],s.length+e.length)}function xs(t,e){let n=I(t),s=bs(n.encode(e));return Ve([n.codeBuf,s],n.codeBuf.length+s.length)}function ls(t){t instanceof Uint8Array&&(t=X(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),I(t[0]).decode(t.substring(1))}function ds(t){if(t instanceof Uint8Array&&(t=X(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return I(t[0]).name}catch(e){return!1}}function cs(t,e){I(t).decode(X(e))}function I(t){if(T.names[t])return T.names[t];if(T.codes[t])return T.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function ks(t){return t instanceof Uint8Array&&(t=X(t)),I(t[0])}S=Le.exports=as;S.encode=xs;S.decode=ls;S.isEncoded=ds;S.encoding=I;S.encodingFromData=ks;S.names=Object.freeze(T.names);S.codes=Object.freeze(T.codes)});var Ge=b((o0,_e)=>{_e.exports=ie;var Pe=128,us=127,fs=~us,hs=Math.pow(2,31);function ie(t,e,n){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw ie.bytes=0,new RangeError("Could not encode varint");e=e||[],n=n||0;for(var s=n;t>=hs;)e[n++]=t&255|Pe,t/=128;for(;t&fs;)e[n++]=t&255|Pe,t>>>=7;return e[n]=t|0,ie.bytes=n-s+1,e}});var Je=b((b0,Qe)=>{Qe.exports=oe;var ps=128,Xe=127;function oe(t,e){var n=0,e=e||0,s=0,r=e,i,o=t.length;do{if(r>=o||s>49)throw oe.bytes=0,new RangeError("Could not decode varint");i=t[r++],n+=s<28?(i&Xe)<<s:(i&Xe)*Math.pow(2,s),s+=7}while(i>=ps);return oe.bytes=r-e,n}});var He=b((c0,Ke)=>{var gs=Math.pow(2,7),ms=Math.pow(2,14),ws=Math.pow(2,21),vs=Math.pow(2,28),ys=Math.pow(2,35),Es=Math.pow(2,42),Ss=Math.pow(2,49),As=Math.pow(2,56),Cs=Math.pow(2,63);Ke.exports=function(t){return t<gs?1:t<ms?2:t<ws?3:t<vs?4:t<ys?5:t<Es?6:t<Ss?7:t<As?8:t<Cs?9:10}});var We=b((a0,$e)=>{$e.exports={encode:Ge(),decode:Je(),encodingLength:He()}});var Ye=b((x0,Ze)=>{"use strict";var Is=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});Ze.exports={names:Is}});var tt=b((l0,et)=>{"use strict";var{encoding:qs}=M(),{TextDecoder:Ds}=C(),Us=new Ds("utf8");function Ts(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function Ms(t,e="utf8"){return e==="utf8"||e==="utf-8"?Us.decode(t):e==="ascii"?Ts(t):qs(e).encode(t)}et.exports=Ms});var st=b((d0,nt)=>{"use strict";var{encoding:Ns}=M(),{TextEncoder:js}=C(),Bs=new js;function Fs(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function Rs(t,e="utf8"){return e==="utf8"||e==="utf-8"?Bs.encode(t):e==="ascii"?Fs(t):Ns(e).decode(t)}nt.exports=Rs});var it=b((k0,rt)=>{"use strict";function zs(t,e){e||(e=t.reduce((r,i)=>r+i.length,0));let n=new Uint8Array(e),s=0;for(let r of t)n.set(r,s),s+=r.length;return n}rt.exports=zs});var ce=b((u0,ot)=>{"use strict";var bt=M(),N=We(),{names:O}=Ye(),J=tt(),Os=st(),Ls=it(),L={};for(let t in O){let e=t;L[O[e]]=e}function Vs(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return J(t,"base16")}function _s(t){return Os(t,"base16")}function Ps(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return J(bt.encode("base58btc",t)).slice(1)}function Gs(t){let e=t instanceof Uint8Array?J(t):t;return bt.decode("z"+e)}function at(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=N.decode(t);if(!ct(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(N.decode.bytes);let n=N.decode(t);if(n<0)throw new Error(`multihash invalid length: ${n}`);if(t=t.slice(N.decode.bytes),t.length!==n)throw new Error(`multihash length inconsistent: 0x${J(t,"base16")}`);return{code:e,name:L[e],length:n,digest:t}}function Qs(t,e,n){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let s=xt(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(n==null&&(n=t.length),n&&t.length!==n)throw new Error("digest length should be equal to specified length.");let r=N.encode(s),i=N.encode(n);return Ls([r,i,t],r.length+i.length+t.length)}function xt(t){let e=t;if(typeof t=="string"){if(O[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=O[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(L[e]===void 0&&!be(e))throw new Error(`Unrecognized function code: ${e}`);return e}function be(t){return t>0&&t<16}function ct(t){return!!(be(t)||L[t])}function lt(t){at(t)}function Xs(t){return lt(t),t.subarray(0,2)}ot.exports={names:O,codes:Object.freeze(L),toHexString:Vs,fromHexString:_s,toB58String:Ps,fromB58String:Gs,decode:at,encode:Qs,coerceCode:xt,isAppCode:be,validate:lt,prefix:Xs,isValidCode:ct}});var ut=b((f0,dt)=>{dt.exports=ae;var kt=128,Js=127,Ks=~Js,Hs=Math.pow(2,31);function ae(t,e,n){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw ae.bytes=0,new RangeError("Could not encode varint");e=e||[],n=n||0;for(var s=n;t>=Hs;)e[n++]=t&255|kt,t/=128;for(;t&Ks;)e[n++]=t&255|kt,t>>>=7;return e[n]=t|0,ae.bytes=n-s+1,e}});var pt=b((h0,ft)=>{ft.exports=xe;var $s=128,ht=127;function xe(t,e){var n=0,e=e||0,s=0,r=e,i,o=t.length;do{if(r>=o||s>49)throw xe.bytes=0,new RangeError("Could not decode varint");i=t[r++],n+=s<28?(i&ht)<<s:(i&ht)*Math.pow(2,s),s+=7}while(i>=$s);return xe.bytes=r-e,n}});var mt=b((p0,gt)=>{var Ws=Math.pow(2,7),Zs=Math.pow(2,14),Ys=Math.pow(2,21),er=Math.pow(2,28),tr=Math.pow(2,35),nr=Math.pow(2,42),sr=Math.pow(2,49),rr=Math.pow(2,56),ir=Math.pow(2,63);gt.exports=function(t){return t<Ws?1:t<Zs?2:t<Ys?3:t<er?4:t<tr?5:t<nr?6:t<sr?7:t<rr?8:t<ir?9:10}});var le=b((g0,wt)=>{wt.exports={encode:ut(),decode:pt(),encodingLength:mt()}});var j=b((m0,vt)=>{"use strict";var or=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056});vt.exports={baseTable:or}});var At=b((w0,yt)=>{"use strict";var{baseTable:Et}=j(),St=new Map;for(let t in Et){let e=Et[t];St.set(e,t)}yt.exports=Object.freeze(St)});var It=b((v0,Ct)=>{"use strict";var{names:br}=Q(),{TextDecoder:cr}=C(),ar=new cr("utf8");function xr(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function lr(t,e="utf8"){if(e==="utf8"||e==="utf-8")return ar.decode(t);if(e==="ascii")return xr(t);let n=br[e];if(!n)throw new Error("Unknown base");return n.encode(t)}Ct.exports=lr});var Dt=b((y0,qt)=>{"use strict";var{names:dr}=Q(),{TextEncoder:kr}=C(),ur=new kr;function fr(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function hr(t,e="utf8"){if(e==="utf8"||e==="utf-8")return ur.encode(t);if(e==="ascii")return fr(t);let n=dr[e];if(!n)throw new Error("Unknown base");return n.decode(t)}qt.exports=hr});var de=b((E0,Ut)=>{"use strict";var Tt=le(),pr=It(),gr=Dt();Ut.exports={numberToUint8Array:mr,uint8ArrayToNumber:Mt,varintUint8ArrayEncode:wr,varintEncode:vr};function Mt(t){return parseInt(pr(t,"base16"),16)}function mr(t){let e=t.toString(16);return e.length%2==1&&(e="0"+e),gr(e,"base16")}function wr(t){return Uint8Array.from(Tt.encode(Mt(t)))}function vr(t){return Uint8Array.from(Tt.encode(t))}});var Ft=b((S0,Nt)=>{"use strict";var{baseTable:jt}=j(),yr=de().varintEncode,Bt={};for(let t in jt){let e=jt[t];Bt[t]=yr(e)}Nt.exports=Object.freeze(Bt)});var zt=b((A0,Rt)=>{"use strict";function Er(t,e){e||(e=t.reduce((r,i)=>r+i.length,0));let n=new Uint8Array(e),s=0;for(let r of t)n.set(r,s),s+=r.length;return n}Rt.exports=Er});var Vt=b((C0,Ot)=>{"use strict";var{baseTable:Sr}=j(),Lt={};for(let[t,e]of Object.entries(Sr)){let n=t.toUpperCase().replace(/-/g,"_");Lt[n]=e}Ot.exports=Object.freeze(Lt)});var Pt=b((I0,_t)=>{"use strict";var{baseTable:Ar}=j(),ke={};for(let[t,e]of Object.entries(Ar))ke[e]===void 0&&(ke[e]=t);_t.exports=Object.freeze(ke)});var Xt=b((q0,Gt)=>{"use strict";var B=le(),Qt=At(),K=Ft(),Cr=de(),Ir=zt();function qr(t,e){let n;if(t instanceof Uint8Array)n=Cr.varintUint8ArrayEncode(t);else if(K[t])n=K[t];else throw new Error("multicodec not recognized");return Ir([n,e],n.length+e.length)}function Dr(t){return B.decode(t),t.slice(B.decode.bytes)}function Ur(t){let e=B.decode(t),n=Qt.get(e);if(n===void 0)throw new Error(`Code ${e} not found`);return n}function Tr(t){return Qt.get(t)}function Mr(t){let e=K[t];if(e===void 0)throw new Error("Codec `"+t+"` not found");return B.decode(e)}function Nr(t){return B.decode(t)}function jr(t){let e=K[t];if(e===void 0)throw new Error("Codec `"+t+"` not found");return e}function Br(t){return B.encode(t)}var Fr=Vt(),Rr=Pt();Gt.exports={addPrefix:qr,rmPrefix:Dr,getCodec:Ur,getName:Tr,getNumber:Mr,getCode:Nr,getCodeVarint:jr,getVarint:Br,print:Rr,...Fr}});var Kt=b((D0,Jt)=>{"use strict";var zr=ce(),Or={checkCIDComponents:function(t){if(t==null)return"null values are not valid CIDs";if(!(t.version===0||t.version===1))return"Invalid version, must be a number equal to 1 or 0";if(typeof t.codec!="string")return"codec must be string";if(t.version===0){if(t.codec!=="dag-pb")return"codec must be 'dag-pb' for CIDv0";if(t.multibaseName!=="base58btc")return"multibaseName must be 'base58btc' for CIDv0"}if(!(t.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{zr.validate(t.multihash)}catch(e){let n=e.message;return n||(n="Multihash validation failed"),n}}};Jt.exports=Or});var $t=b((U0,Ht)=>{"use strict";function Lr(t,e){e||(e=t.reduce((r,i)=>r+i.length,0));let n=new Uint8Array(e),s=0;for(let r of t)n.set(r,s),s+=r.length;return n}Ht.exports=Lr});var Zt=b((T0,Wt)=>{"use strict";var{encoding:Vr}=M(),{TextDecoder:_r}=C(),Pr=new _r("utf8");function Gr(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function Qr(t,e="utf8"){return e==="utf8"||e==="utf-8"?Pr.decode(t):e==="ascii"?Gr(t):Vr(e).encode(t)}Wt.exports=Qr});var en=b((M0,Yt)=>{"use strict";function Xr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}Yt.exports=Xr});var fe=b((N0,tn)=>{"use strict";var H=ce(),ue=M(),F=Xt(),{baseTable:$}=j(),Jr=Kt(),nn=$t(),Kr=Zt(),Hr=en(),$r=Object.keys($).reduce((t,e)=>(t[$[e]]=e,t),{}),sn=Symbol.for("@ipld/js-cid/CID"),y=class{constructor(e,n,s,r){if(this.version,this.codec,this.multihash,Object.defineProperty(this,sn,{value:!0}),y.isCID(e)){let i=e;this.version=i.version,this.codec=i.codec,this.multihash=i.multihash,this.multibaseName=i.multibaseName||(i.version===0?"base58btc":"base32");return}if(typeof e=="string"){let i=ue.isEncoded(e);if(i){let o=ue.decode(e);this.version=parseInt(o[0].toString(),16),this.codec=F.getCodec(o.slice(1)),this.multihash=F.rmPrefix(o.slice(1)),this.multibaseName=i}else this.version=0,this.codec="dag-pb",this.multihash=H.fromB58String(e),this.multibaseName="base58btc";y.validateCID(this),Object.defineProperty(this,"string",{value:e});return}if(e instanceof Uint8Array){let i=parseInt(e[0].toString(),16);if(i===1){let o=e;this.version=i,this.codec=F.getCodec(o.slice(1)),this.multihash=F.rmPrefix(o.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";y.validateCID(this);return}this.version=e,typeof n=="number"&&(n=$r[n]),this.codec=n,this.multihash=s,this.multibaseName=r||(e===0?"base58btc":"base32"),y.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(this.version===0)e=this.multihash;else if(this.version===1){let n=F.getCodeVarint(this.codec);e=nn([[1],n,this.multihash],1+n.byteLength+this.multihash.byteLength)}else throw new Error("unsupported version");Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){let e=F.getCodeVarint(this.codec),n=H.prefix(this.multihash);return nn([[this.version],e,n],1+e.byteLength+n.byteLength)}get code(){return $[this.codec]}toV0(){if(this.codec!=="dag-pb")throw new Error("Cannot convert a non dag-pb CID to CIDv0");let{name:e,length:n}=H.decode(this.multihash);if(e!=="sha2-256")throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(n!==32)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new y(0,this.codec,this.multihash)}toV1(){return new y(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&this.string.length!==0&&e===this.multibaseName)return this.string;let n;if(this.version===0){if(e!=="base58btc")throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");n=H.toB58String(this.multihash)}else if(this.version===1)n=Kr(ue.encode(e,this.bytes));else throw new Error("unsupported version");return e===this.multibaseName&&Object.defineProperty(this,"string",{value:n}),n}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&Hr(this.multihash,e.multihash)}static validateCID(e){let n=Jr.checkCIDComponents(e);if(n)throw new Error(n)}static isCID(e){return e instanceof y||Boolean(e&&e[sn])}};y.codecs=$;tn.exports=y});var q=b(W=>{"use strict";var rn=fe(),Wr=(t,e)=>(e&&e.push(t.multihash.buffer),t);W.encodeCID=Wr;var Zr=t=>{let e=t;return Object.setPrototypeOf(e.multihash,Uint8Array.prototype),Object.setPrototypeOf(e,rn.prototype),Object.defineProperty(e,Symbol.for("@ipld/js-cid/CID"),{value:!0}),e};W.decodeCID=Zr;W.CID=rn});var on=b(he=>{"use strict";var{encodeCID:Yr,decodeCID:ei,CID:ti}=q(),ni=({dagNode:t,cids:e})=>{for(let n of e)ei(n);return t};he.decodeNode=ni;var si=(t,e)=>{let n=[];return pe(t,n,e),{dagNode:t,cids:n}};he.encodeNode=si;var pe=(t,e,n)=>{if(t!=null&&typeof t=="object")if(ti.isCID(t))e.push(t),Yr(t,n);else if(t instanceof ArrayBuffer)n&&n.push(t);else if(ArrayBuffer.isView(t))n&&n.push(t.buffer);else if(Array.isArray(t))for(let s of t)pe(s,e,n);else for(let s of Object.values(t))pe(s,e,n)}});var ge=b((F0,bn)=>{"use strict";var ri=async t=>{let e=[];for await(let n of t)e.push(n);return e};bn.exports=ri});var me=b(cn=>{"use strict";var{encodeCID:an,decodeCID:Z}=q(),{decodeNode:ii,encodeNode:oi}=on(),bi=ge();cn.DAGService=class{constructor(e){this.ipfs=e}async put(e){let n=ii(e.dagNode),s=await this.ipfs.dag.put(n,{...e,cid:e.cid?Z(e.cid):void 0});return an(s)}async get(e){let{cid:n,path:s,localResolve:r,timeout:i,signal:o}=e,{value:c,remainderPath:x}=await this.ipfs.dag.get(Z(n),{path:s,localResolve:r,timeout:i,signal:o}),l=[];return{remainderPath:x,value:oi(c,l),transfer:l}}async resolve(e){let{cid:n,remainderPath:s}=await this.ipfs.dag.resolve(ci(e.cid),e);return{cid:an(n),remainderPath:s}}async tree(e){let{cid:n,path:s,recursive:r,timeout:i,signal:o}=e,c=await this.ipfs.dag.tree(Z(n),{path:s,recursive:r,timeout:i,signal:o});return await bi(c)}};var ci=t=>typeof t=="string"?t:Z(t)});var Y=b(we=>{"use strict";var ai=t=>{let{name:e,message:n,stack:s,code:r,detail:i}=t;return{name:e,message:n,stack:s,code:r,detail:i}};we.encodeError=ai;var li=t=>{if(t instanceof Error)return t;{let{name:e,message:n,stack:s,code:r}=t;return Object.assign(xi(e,n),{name:e,stack:s,code:r})}};we.decodeError=li;var xi=(t,e)=>{switch(t){case"RangeError":return new RangeError(e);case"ReferenceError":return ReferenceError(e);case"SyntaxError":return new SyntaxError(e);case"TypeError":return new TypeError(e);case"URIError":return new URIError(e);default:return new Error(e)}}});var xn=b(V=>{"use strict";var{encodeError:di,decodeError:ki}=Y(),ui=async function*({port:t},e){let n=o=>{},s=()=>new Promise(o=>n=o),r=()=>(t.postMessage({method:"next"}),s());t.onmessage=o=>n(o.data);let i=!1;try{for(;!i;){let{done:o,value:c,error:x}=await r();if(i=o,x!=null)throw ki(x);c!=null&&(yield e(c))}}finally{i||t.postMessage({method:"return"}),t.close()}};V.decodeIterable=ui;var hi=(t,e,n)=>{let{port1:s,port2:r}=new MessageChannel,i=[],o=fi(t);return s.onmessage=async({data:{method:c}})=>{switch(c){case"next":{try{let{done:x,value:l}=await o.next();x?(s.postMessage({type:"next",done:!0}),s.close()):(i.length=0,s.postMessage({type:"next",done:!1,value:e(l,i)},i))}catch(x){s.postMessage({type:"throw",error:di(x)}),s.close()}break}case"return":{s.close(),o.return&&o.return();break}default:break}},s.start(),n.push(r),{type:"RemoteIterable",port:r}};V.encodeIterable=hi;var fi=t=>{if(t!=null){if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]()}throw TypeError("Value must be async or sync iterable")},pi=(t,e)=>{let{port1:n,port2:s}=new MessageChannel;return n.onmessage=({data:r})=>t.apply(null,r),e.push(s),{type:"RemoteCallback",port:s}};V.encodeCallback=pi;var gi=({port:t})=>(n,s=[])=>{t.postMessage(n,[...new Set(s)])};V.decodeCallback=gi});var Ae=b(ln=>{"use strict";var{decodeIterable:ve,encodeIterable:ye,decodeCallback:dn}=xn(),{decodeCID:kn,encodeCID:un}=q();ln.CoreService=class{constructor(e){this.ipfs=e}addAll(e){let{input:n}=e,{chunker:s,cidVersion:r,enableShardingExperiment:i,hashAlg:o,onlyHash:c,pin:x,progress:l,rawLeaves:A,shardSplitThreshold:U,trickle:R,wrapWithDirectory:a,timeout:d,signal:w}=e,k;if(l){let f=dn(l);k=(g,m)=>f([g,m])}let h={chunker:s,cidVersion:r,enableShardingExperiment:i,hashAlg:o,onlyHash:c,pin:x,rawLeaves:A,shardSplitThreshold:U,trickle:R,wrapWithDirectory:a,timeout:d,progress:k,signal:w},p=mi(n);return vi(this.ipfs.addAll(p,h))}async add(e){let{input:n}=e,{chunker:s,cidVersion:r,enableShardingExperiment:i,hashAlg:o,onlyHash:c,pin:x,progress:l,rawLeaves:A,shardSplitThreshold:U,trickle:R,wrapWithDirectory:a,timeout:d,signal:w}=e,k;if(l){let f=dn(l);k=(g,m)=>f([g,m])}let h={chunker:s,cidVersion:r,enableShardingExperiment:i,hashAlg:o,onlyHash:c,pin:x,rawLeaves:A,shardSplitThreshold:U,trickle:R,wrapWithDirectory:a,timeout:d,progress:k,signal:w},p=wi(n);return yi(await this.ipfs.add(p,h))}cat(e){let{path:n,offset:s,length:r,timeout:i,signal:o}=e,c=typeof n=="string"?n:kn(n),x=this.ipfs.cat(c,{offset:s,length:r,timeout:i,signal:o});return Ei(x)}ls(e){let{path:n,recursive:s,preload:r,timeout:i,signal:o}=e,c=typeof n=="string"?n:kn(n),x=this.ipfs.ls(c,{recursive:s,preload:r,timeout:i,signal:o});return Si(x)}};var mi=t=>ve(t,Ee),wi=t=>Se(t,e=>e.type==="RemoteIterable"?{content:ve(e,Ee)}:Ee(e)),Ee=t=>Se(t,e=>({...e,content:e.content&&Ai(e.content)})),Ai=t=>Se(t,e=>ve(e,Ci)),Se=(t,e)=>typeof t=="string"||t instanceof ArrayBuffer||t instanceof Blob||ArrayBuffer.isView(t)?t:e(t),vi=t=>{let e=[];return{data:ye(t,fn,e),transfer:e}},yi=t=>{let e=[];return{data:fn(t,e),transfer:e}},Ei=t=>{let e=[];return{data:ye(t,Ii,e),transfer:e}},Si=t=>{let e=[];return{data:ye(t,qi,e),transfer:e}},qi=({depth:t,name:e,path:n,size:s,cid:r,type:i,mode:o,mtime:c})=>({cid:un(r),type:i,name:e,path:n,mode:o,mtime:c,size:s,depth:t}),Ii=(t,e)=>(e.push(t.buffer),t),fn=(t,e)=>({...t,cid:un(t.cid)}),Ci=t=>t});var Ce=b(hn=>{"use strict";var{encodeCID:Di}=q();hn.FilesService=class{constructor(e){this.ipfs=e}async stat(e){let n=await this.ipfs.files.stat(e.path,e),s=[];return{stat:{...n,cid:Di(n.cid,s)},transfer:s}}}});var gn=b((Q0,pn)=>{pn.exports={name:"ipld-block",version:"0.11.0",description:"JavaScript Implementation of IPLD Block",leadMaintainer:"Volker Mische <volker.mische@gmail.com>",main:"src/index.js",scripts:{lint:"aegir lint",check:"tsc --noEmit --noErrorTruncation",build:"npm run build:js && npm run build:types","build:js":"aegir build","build:types":"tsc --emitDeclarationOnly --declarationDir dist",test:"aegir test","test:node":"aegir test --target node","test:browser":"aegir test --target browser",release:"aegir release --docs","release-minor":"aegir release --type minor --docs","release-major":"aegir release --type major --docs",coverage:"aegir coverage","coverage-publish":"aegir coverage --provider coveralls",docs:"aegir docs",prepare:"npm run build:types"},"pre-push":["lint","test"],repository:{type:"git",url:"git+https://github.com/ipld/js-ipld-block.git"},keywords:["IPLD"],license:"MIT",bugs:{url:"https://github.com/ipld/js-ipld-block/issues"},homepage:"https://github.com/ipld/js-ipld-block#readme",devDependencies:{aegir:"^27.0.0",uint8arrays:"^1.0.0",typescript:"^4.0.3"},dependencies:{cids:"^1.0.0"},engines:{node:">=6.0.0",npm:">=3.0.0"},typesVersions:{"*":{"*":["dist/*"]}},contributors:["David Dias <daviddias.p@gmail.com>","Volker Mische <volker.mische@gmail.com>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Irakli Gozalishvili <contact@gozala.io>","achingbrain <alex@achingbrain.net>","\u1D20\u026A\u1D04\u1D1B\u1D0F\u0280 \u0299\u1D0A\u1D07\u029F\u1D0B\u029C\u1D0F\u029F\u1D0D <victorbjelkholm@gmail.com>","Alan Shaw <alan.shaw@protocol.ai>","Charlie <the_charlie_daly@hotmail.co.uk>","Diogo Silva <fsdiogo@gmail.com>","Hugo Dias <hugomrdias@gmail.com>","Mikeal Rogers <mikeal.rogers@gmail.com>","Richard Littauer <richard.littauer@gmail.com>","Richard Schneider <makaretu@gmail.com>","Xmader <xmader@outlook.com>"]}});var Sn=b((X0,mn)=>{"use strict";var Ui=fe(),{version:Ti}=gn(),wn=Symbol.for("@ipld/js-ipld-block/block"),vn={writable:!1,configurable:!1,enumerable:!0},yn=class{constructor(e,n){if(!e||!(e instanceof Uint8Array))throw new Error("first argument  must be a Uint8Array");if(!n||!Ui.isCID(n))throw new Error("second argument must be a CID");this.data=e,this.cid=n,Object.defineProperties(this,{data:vn,cid:vn})}get _data(){return Ni(),this.data}get _cid(){return Mi(),this.cid}get[Symbol.toStringTag](){return"Block"}get[wn](){return!0}static isBlock(e){return Boolean(e&&e[wn])}},En=(t,e)=>{let n=!1;return()=>{if(t.test(Ti))n||(n=!0,console.warn(e));else throw new Error(e)}},Mi=En(/^0\.10|^0\.11/,"block._cid is deprecated and will be removed in 0.12 release. Please use block.cid instead"),Ni=En(/^0\.10|^0.11/,"block._data is deprecated and will be removed in 0.12 release. Please use block.data instead");mn.exports=yn});var Cn=b(ee=>{"use strict";var{encodeCID:ji,decodeCID:Bi}=q(),An=Sn(),Fi=({cid:t,data:e},n)=>(n&&n.push(e.buffer),{cid:ji(t,n),data:e});ee.encodeBlock=Fi;var Ri=({cid:t,data:e})=>new An(e,Bi(t));ee.decodeBlock=Ri;ee.Block=An});var Ie=b(In=>{"use strict";var zi=ge(),{encodeError:Oi}=Y(),{decodeCID:te,encodeCID:qn}=q(),{decodeBlock:Li,encodeBlock:Dn}=Cn();In.BlockService=class{constructor(e){this.ipfs=e}async get(e){let n=te(e.cid),s=await this.ipfs.block.get(n,e),r=[];return{transfer:r,block:Dn(s,r)}}async put(e){let n=e.block,s=n instanceof Uint8Array?n:Li(n),r=await this.ipfs.block.put(s,{...e,cid:e.cid?te(e.cid):e.cid}),i=[];return{transfer:i,block:Dn(r,i)}}async rm(e){let n=[];return(await zi(this.ipfs.block.rm(e.cids.map(te),e))).map(r=>Vi(r,n))}async stat(e){let n=te(e.cid),s=await this.ipfs.block.stat(n,e);return{...s,cid:qn(s.cid)}}};var Vi=(t,e)=>{let n=qn(t.cid,e);return t.error?{cid:n,error:Oi(t.error)}:{cid:n}}});var Tn=b(Un=>{"use strict";var{DAGService:_i}=me(),{CoreService:Pi}=Ae(),{FilesService:Gi}=Ce(),{BlockService:Qi}=Ie();Un.IPFSService=class{constructor(e){this.dag=new _i(e),this.core=new Pi(e),this.files=new Gi(e),this.block=new Qi(e)}}});var jn=b(_=>{"use strict";var{encodeError:Xi}=Y(),qe=class{constructor(e,n,s){this.result=new Promise((r,i)=>{this.succeed=r,this.fail=i,this.namespace=e,this.method=n,this.input=s,this.abortController=new AbortController,this.signal=this.abortController.signal})}abort(){this.abortController.abort(),this.fail(new Mn)}};_.Query=qe;_.Server=class{constructor(e){this.services=e,this.queries=Object.create(null)}connect(e){e.addEventListener("message",this),e.start()}disconnect(e){e.removeEventListener("message",this),e.close()}handleEvent(e){let n=e.data;switch(n.type){case"query":{this.handleQuery(n.id,new qe(n.namespace,n.method,n.input),e.target);return}case"abort":return this.abort(n.id);default:throw new Nn(e)}}abort(e){let n=this.queries[e];n&&(delete this.queries[e],n.abort())}async handleQuery(e,n,s){if(this.queries[e]=n,await this.run(n),delete this.queries[e],!n.signal.aborted)try{let r=await n.result,i=[...new Set(r.transfer||[])];delete r.transfer,s.postMessage({type:"result",id:e,result:{ok:!0,value:r}},i)}catch(r){s.postMessage({type:"result",id:e,result:{ok:!1,error:Xi(r)}})}}run(e){let{services:n}=this,{namespace:s,method:r}=e,i=n[s];if(i)if(typeof i[r]=="function")try{let o=i[r]({...e.input,signal:e.signal});Promise.resolve(o).then(e.succeed,e.fail)}catch(o){e.fail(o)}else e.fail(new RangeError(`Method '${r}' is not found`));else e.fail(new RangeError(`Namespace '${s}' is not found`))}execute(e){let n=new qe(e.namespace,e.method,e.input);return this.run(n),n.result}};var Nn=class extends RangeError{constructor(e){super("Unexpected message was received by the server");this.event=e}get name(){return this.constructor.name}};_.UnsupportedMessageError=Nn;var Mn=class extends Error{get name(){return this.constructor.name}};_.AbortError=Mn});var Bn=b(D=>{"use strict";var{DAGService:Ji}=me();D.DAGService=Ji;var{CoreService:Ki}=Ae();D.CoreService=Ki;var{FilesService:Hi}=Ce();D.FilesService=Hi;var{BlockService:$i}=Ie();D.BlockService=$i;var{IPFSService:Wi}=Tn();D.IPFSService=Wi;var{Server:Zi}=jn();D.Server=Zi});var ne=Pn(Bn());globalThis.IPFSService=ne.IPFSService;globalThis.Server=ne.Server;})();
