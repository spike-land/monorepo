var Se,lt=new Uint8Array(16);function ct(){if(!Se&&(Se=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Se))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Se(lt)}const dt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ut(r){return typeof r=="string"&&dt.test(r)}for(var B=[],Be=0;Be<256;++Be)B.push((Be+256).toString(16).substr(1));function pt(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=(B[r[s+0]]+B[r[s+1]]+B[r[s+2]]+B[r[s+3]]+"-"+B[r[s+4]]+B[r[s+5]]+"-"+B[r[s+6]]+B[r[s+7]]+"-"+B[r[s+8]]+B[r[s+9]]+"-"+B[r[s+10]]+B[r[s+11]]+B[r[s+12]]+B[r[s+13]]+B[r[s+14]]+B[r[s+15]]).toLowerCase();if(!ut(u))throw TypeError("Stringified UUID is invalid");return u}function ft(r,s,u){r=r||{};var d=r.random||(r.rng||ct)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,s){u=u||0;for(var h=0;h<16;++h)s[u+h]=d[h];return s}return pt(d)}const mt=r=>{const s=()=>jsx(React.Fragment,null,jsx(motion.div,{css:`
            background: red;
            border: 4px solid red;
            border-radius: 8px;
          `,animate:{scale:1,top:1,left:600},dragElastic:.5,dragMomentum:!1,initial:{top:1,left:0,scale:.7},transition:{duration:.5},drag:!0,dragConstraints:{left:-window.innerWidth+200,right:0,bottom:window.innerHeight-200,top:0}},jsx("div",{css:`
      display: block;
      with: 100%;
      text-align: right;
      background: linear-gradient(0deg, darkred, red);
    `},jsx("button",{css:`
              background: darkred;
              margin-top: -4px;
              margin-right: -4px;
              color: white;
              cursor: pointer;
              font-weight: bold;
              font-family: Roboto;
              padding: 8px 16px;
              outline: none;
              border: none;
              border-radius: 0px 8px 0px 0px;
            `,onClick:()=>r()},"\u{1F30E} SHARE")),jsx("div",{css:`  
      min-width: 200px;
      padding: 30px;
      max-width: 600px;
      background: white;
      max-height: 800px;
      border-radius: 0px 0px 8px 8px;
      overflow-y: overlay;
    `,id:"root"})));kt.render(jsx(s),me.getElementById("dragabbleWindow"))};function ht(){const r=new JSFrame,s=r.create({name:"Win",title:"",width:window.innerWidth/2-40,height:600,minWidth:300,minHeight:300,appearanceName:"material",appearanceParam:{titleBar:{color:"white",height:40,background:"#1e1e1e"}},style:{backgroundColor:"rgba(255,255,255,0.8)",overflow:"auto"},style:{backgroundColor:"rgba(0,0,0,0.8)",overflow:"hidden",width:"100%"},html:'<div id="container"></div>'});s.setPosition(window.innerWidth-32,32,"RIGHT_TOP"),s.setControl({maximizeButton:"maximizeButton",demaximizeButton:"restoreButton",minimizeButton:"minimizeButton",deminimizeButton:"deminimizeButton",hideButton:"closeButton",animation:!0,animationDuration:150}),s.control.on("hid",(u,d)=>{u.closeFrame()}),s.control.on("maximized",(u,d)=>{r.showToast({text:"Maximized"})}),s.control.on("demaximized",(u,d)=>{}),s.control.on("minimized",(u,d)=>{}),s.control.on("dminimized",(u,d)=>{}),s.show(),console.log(s)}function fe(r){return new Promise(function(s,u){var d;d=window.document.createElement("script"),d.src=r,d.onload=()=>s(window),d.onerror=u,window.document.head.appendChild(d)})}const gt=async r=>me.querySelector(`script[src="${r}"]`)||new Promise(function(s,u){const d=window.document.createElement("script");d.src=r,d.onload=s,d.onerror=u,window.document.head.appendChild(d)}),ke=`import { useState } from "react";
import { css, Global } from "@emotion/react";

const Slider = () => {
  const steps = 128;
  const [sliderValue, setSlider] = useState(steps / 2);
  return <>
    <input max={steps}
      css={\`
        appearance: none;
        width: 100%;
        height: 40px; 
        background: rgb(\${255 / steps * sliderValue} \${255 / steps * (steps - sliderValue)} 0); 
        outline: none; 
    \`} type="range"
      aria-label="font size changer"
      value={sliderValue}
      step="1"
      onChangeCapture={(e) => setSlider(Number(e.currentTarget.value))}>
    </input>
    <p
      css={css\`
        font-size: \${72 / steps * sliderValue}px
        \`}>
      Example when the text gets bigger...
    </p>
    <p css={css\`
        font-size: \${72 / steps * (steps - sliderValue)}px
        \`}>
      ...or smaller
    </p>
  </>
}

export default () => <>
  <Global styles={css\`
      body{
          margin: 0;
          overflow: overlay;
        }  
    \`} />
  <Slider />
</>
`;(function(r,s){typeof exports=="object"&&typeof module!="undefined"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(r=r||self,s(r.Diff={}))})(this,function(r){"use strict";function s(){}s.prototype={diff:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.callback;typeof n=="function"&&(o=n,n={}),this.options=n;var a=this;function i(v){return o?(setTimeout(function(){o(void 0,v)},0),!0):v}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var l=t.length,c=e.length,p=1,f=l+c,y=[{newPos:-1,components:[]}],S=this.extractCommon(y[0],t,e,0);if(y[0].newPos+1>=l&&S+1>=c)return i([{value:this.join(t),count:t.length}]);function m(){for(var v=-1*p;v<=p;v+=2){var x=void 0,A=y[v-1],H=y[v+1],N=(H?H.newPos:0)-v;A&&(y[v-1]=void 0);var z=A&&A.newPos+1<l,G=H&&0<=N&&N<c;if(!z&&!G){y[v]=void 0;continue}if(!z||G&&A.newPos<H.newPos?(x=d(H),a.pushComponent(x.components,void 0,!0)):(x=A,x.newPos++,a.pushComponent(x.components,!0,void 0)),N=a.extractCommon(x,t,e,v),x.newPos+1>=l&&N+1>=c)return i(u(a,x.components,t,e,a.useLongestToken));y[v]=x}p++}if(o)(function v(){setTimeout(function(){if(p>f)return o();m()||v()},0)})();else for(;p<=f;){var D=m();if(D)return D}},pushComponent:function(e,t,n){var o=e[e.length-1];o&&o.added===t&&o.removed===n?e[e.length-1]={count:o.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,o){for(var a=t.length,i=n.length,l=e.newPos,c=l-o,p=0;l+1<a&&c+1<i&&this.equals(t[l+1],n[c+1]);)l++,c++,p++;return p&&e.components.push({count:p}),e.newPos=l,c},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function u(e,t,n,o,a){for(var i=0,l=t.length,c=0,p=0;i<l;i++){var f=t[i];if(f.removed){if(f.value=e.join(o.slice(p,p+f.count)),p+=f.count,i&&t[i-1].added){var y=t[i-1];t[i-1]=t[i],t[i]=y}}else{if(!f.added&&a){var S=n.slice(c,c+f.count);S=S.map(function(D,v){var x=o[p+v];return x.length>D.length?x:D}),f.value=e.join(S)}else f.value=e.join(n.slice(c,c+f.count));c+=f.count,f.added||(p+=f.count)}}var m=t[l-1];return l>1&&typeof m.value=="string"&&(m.added||m.removed)&&e.equals("",m.value)&&(t[l-2].value+=m.value,t.pop()),t}function d(e){return{newPos:e.newPos,components:e.components.slice(0)}}var h=new s;function j(e,t,n){return h.diff(e,t,n)}function g(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var C=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,R=/\S/,L=new s;L.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!R.test(e)&&!R.test(t)},L.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&C.test(t[n])&&C.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};function E(e,t,n){return n=g(n,{ignoreWhitespace:!0}),L.diff(e,t,n)}function P(e,t,n){return L.diff(e,t,n)}var T=new s;T.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var o=0;o<n.length;o++){var a=n[o];o%2&&!this.options.newlineIsToken?t[t.length-1]+=a:(this.options.ignoreWhitespace&&(a=a.trim()),t.push(a))}return t};function V(e,t,n){return T.diff(e,t,n)}function ce(e,t,n){var o=g(n,{ignoreWhitespace:!0});return T.diff(e,t,o)}var de=new s;de.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function w(e,t,n){return de.diff(e,t,n)}var k=new s;k.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function O(e,t,n){return k.diff(e,t,n)}function F(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?F=function(t){return typeof t}:F=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(e)}function b(e){return oe(e)||_(e)||I(e)||M()}function oe(e){if(Array.isArray(e))return ie(e)}function _(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function I(e,t){if(!e)return;if(typeof e=="string")return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}function ie(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function M(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var K=Object.prototype.toString,W=new s;W.useLongestToken=!0,W.tokenize=T.tokenize,W.castInput=function(e){var t=this.options,n=t.undefinedReplacement,o=t.stringifyReplacer,a=o===void 0?function(i,l){return typeof l=="undefined"?n:l}:o;return typeof e=="string"?e:JSON.stringify(re(e,null,null,a),a,"  ")},W.equals=function(e,t){return s.prototype.equals.call(W,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function he(e,t,n){return W.diff(e,t,n)}function re(e,t,n,o,a){t=t||[],n=n||[],o&&(e=o(a,e));var i;for(i=0;i<t.length;i+=1)if(t[i]===e)return n[i];var l;if(K.call(e)==="[object Array]"){for(t.push(e),l=new Array(e.length),n.push(l),i=0;i<e.length;i+=1)l[i]=re(e[i],t,n,o,a);return t.pop(),n.pop(),l}if(e&&e.toJSON&&(e=e.toJSON()),F(e)==="object"&&e!==null){t.push(e),l={},n.push(l);var c=[],p;for(p in e)e.hasOwnProperty(p)&&c.push(p);for(c.sort(),i=0;i<c.length;i+=1)p=c[i],l[p]=re(e[p],t,n,o,p);t.pop(),n.pop()}else l=e;return l}var X=new s;X.tokenize=function(e){return e.slice()},X.join=X.removeEmpty=function(e){return e};function ge(e,t,n){return X.diff(e,t,n)}function se(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),o=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=[],i=0;function l(){var f={};for(a.push(f);i<n.length;){var y=n[i];if(/^(\-\-\-|\+\+\+|@@)\s/.test(y))break;var S=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(y);S&&(f.index=S[1]),i++}for(c(f),c(f),f.hunks=[];i<n.length;){var m=n[i];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(m))break;if(/^@@/.test(m))f.hunks.push(p());else{if(m&&t.strict)throw new Error("Unknown line "+(i+1)+" "+JSON.stringify(m));i++}}}function c(f){var y=/^(---|\+\+\+)\s+(.*)$/.exec(n[i]);if(y){var S=y[1]==="---"?"old":"new",m=y[2].split("	",2),D=m[0].replace(/\\\\/g,"\\");/^".*"$/.test(D)&&(D=D.substr(1,D.length-2)),f[S+"FileName"]=D,f[S+"Header"]=(m[1]||"").trim(),i++}}function p(){var f=i,y=n[i++],S=y.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),m={oldStart:+S[1],oldLines:typeof S[2]=="undefined"?1:+S[2],newStart:+S[3],newLines:typeof S[4]=="undefined"?1:+S[4],lines:[],linedelimiters:[]};m.oldLines===0&&(m.oldStart+=1),m.newLines===0&&(m.newStart+=1);for(var D=0,v=0;i<n.length&&!(n[i].indexOf("--- ")===0&&i+2<n.length&&n[i+1].indexOf("+++ ")===0&&n[i+2].indexOf("@@")===0);i++){var x=n[i].length==0&&i!=n.length-1?" ":n[i][0];if(x==="+"||x==="-"||x===" "||x==="\\")m.lines.push(n[i]),m.linedelimiters.push(o[i]||`
`),x==="+"?D++:x==="-"?v++:x===" "&&(D++,v++);else break}if(!D&&m.newLines===1&&(m.newLines=0),!v&&m.oldLines===1&&(m.oldLines=0),t.strict){if(D!==m.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(v!==m.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return m}for(;i<n.length;)l();return a}function Ee(e,t,n){var o=!0,a=!1,i=!1,l=1;return function c(){if(o&&!i){if(a?l++:o=!1,e+l<=n)return l;i=!0}if(!a)return i||(o=!0),t<=e-l?-l++:(a=!0,c())}}function we(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=se(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var o=e.split(/\r\n|[\n\v\f\r\x85]/),a=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=t.hunks,l=n.compareLine||function(Ne,pe,be,ne){return pe===ne},c=0,p=n.fuzzFactor||0,f=0,y=0,S,m;function D(Ne,pe){for(var be=0;be<Ne.lines.length;be++){var ne=Ne.lines[be],ze=ne.length>0?ne[0]:" ",at=ne.length>0?ne.substr(1):ne;if(ze===" "||ze==="-"){if(!l(pe+1,o[pe],ze,at)&&(c++,c>p))return!1;pe++}}return!0}for(var v=0;v<i.length;v++){for(var x=i[v],A=o.length-x.oldLines,H=0,N=y+x.oldStart-1,z=Ee(N,f,A);H!==void 0;H=z())if(D(x,N+H)){x.offset=y+=H;break}if(H===void 0)return!1;f=x.offset+x.oldStart+x.oldLines}for(var G=0,le=0;le<i.length;le++){var $=i[le],q=$.oldStart+$.offset+G-1;G+=$.newLines-$.oldLines;for(var U=0;U<$.lines.length;U++){var J=$.lines[U],te=J.length>0?J[0]:" ",He=J.length>0?J.substr(1):J,ve=$.linedelimiters[U];if(te===" ")q++;else if(te==="-")o.splice(q,1),a.splice(q,1);else if(te==="+")o.splice(q,0,He),a.splice(q,0,ve),q++;else if(te==="\\"){var xe=$.lines[U-1]?$.lines[U-1][0]:null;xe==="+"?S=!0:xe==="-"&&(m=!0)}}}if(S)for(;!o[o.length-1];)o.pop(),a.pop();else m&&(o.push(""),a.push(`
`));for(var ue=0;ue<o.length-1;ue++)o[ue]=o[ue]+a[ue];return o.join("")}function Y(e,t){typeof e=="string"&&(e=se(e));var n=0;function o(){var a=e[n++];if(!a)return t.complete();t.loadFile(a,function(i,l){if(i)return t.complete(i);var c=we(l,a,t);t.patched(a,c,function(p){if(p)return t.complete(p);o()})})}o()}function ae(e,t,n,o,a,i,l){l||(l={}),typeof l.context=="undefined"&&(l.context=4);var c=V(n,o,l);c.push({value:"",lines:[]});function p(H){return H.map(function(N){return" "+N})}for(var f=[],y=0,S=0,m=[],D=1,v=1,x=function(H){var N=c[H],z=N.lines||N.value.replace(/\n$/,"").split(`
`);if(N.lines=z,N.added||N.removed){var G;if(!y){var le=c[H-1];y=D,S=v,le&&(m=l.context>0?p(le.lines.slice(-l.context)):[],y-=m.length,S-=m.length)}(G=m).push.apply(G,b(z.map(function(xe){return(N.added?"+":"-")+xe}))),N.added?v+=z.length:D+=z.length}else{if(y)if(z.length<=l.context*2&&H<c.length-2){var $;($=m).push.apply($,b(p(z)))}else{var q,U=Math.min(z.length,l.context);(q=m).push.apply(q,b(p(z.slice(0,U))));var J={oldStart:y,oldLines:D-y+U,newStart:S,newLines:v-S+U,lines:m};if(H>=c.length-2&&z.length<=l.context){var te=/\n$/.test(n),He=/\n$/.test(o),ve=z.length==0&&m.length>J.oldLines;!te&&ve&&n.length>0&&m.splice(J.oldLines,0,"\\ No newline at end of file"),(!te&&!ve||!He)&&m.push("\\ No newline at end of file")}f.push(J),y=0,S=0,m=[]}D+=z.length,v+=z.length}},A=0;A<c.length;A++)x(A);return{oldFileName:e,newFileName:t,oldHeader:a,newHeader:i,hunks:f}}function De(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var o=e.hunks[n];o.oldLines===0&&(o.oldStart-=1),o.newLines===0&&(o.newStart-=1),t.push("@@ -"+o.oldStart+","+o.oldLines+" +"+o.newStart+","+o.newLines+" @@"),t.push.apply(t,o.lines)}return t.join(`
`)+`
`}function Re(e,t,n,o,a,i,l){return De(ae(e,t,n,o,a,i,l))}function Ke(e,t,n,o,a,i){return Re(e,e,t,n,o,a,i)}function Xe(e,t){return e.length!==t.length?!1:Ce(e,t)}function Ce(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ye(e){var t=Te(e.lines),n=t.oldLines,o=t.newLines;n!==void 0?e.oldLines=n:delete e.oldLines,o!==void 0?e.newLines=o:delete e.newLines}function et(e,t,n){e=Me(e,n),t=Me(t,n);var o={};(e.index||t.index)&&(o.index=e.index||t.index),(e.newFileName||t.newFileName)&&($e(e)?$e(t)?(o.oldFileName=ye(o,e.oldFileName,t.oldFileName),o.newFileName=ye(o,e.newFileName,t.newFileName),o.oldHeader=ye(o,e.oldHeader,t.oldHeader),o.newHeader=ye(o,e.newHeader,t.newHeader)):(o.oldFileName=e.oldFileName,o.newFileName=e.newFileName,o.oldHeader=e.oldHeader,o.newHeader=e.newHeader):(o.oldFileName=t.oldFileName||e.oldFileName,o.newFileName=t.newFileName||e.newFileName,o.oldHeader=t.oldHeader||e.oldHeader,o.newHeader=t.newHeader||e.newHeader)),o.hunks=[];for(var a=0,i=0,l=0,c=0;a<e.hunks.length||i<t.hunks.length;){var p=e.hunks[a]||{oldStart:Infinity},f=t.hunks[i]||{oldStart:Infinity};if(Ae(p,f))o.hunks.push(Ve(p,l)),a++,c+=p.newLines-p.oldLines;else if(Ae(f,p))o.hunks.push(Ve(f,c)),i++,l+=f.newLines-f.oldLines;else{var y={oldStart:Math.min(p.oldStart,f.oldStart),oldLines:0,newStart:Math.min(p.newStart+l,f.oldStart+c),newLines:0,lines:[]};tt(y,p.oldStart,p.lines,f.oldStart,f.lines),i++,a++,o.hunks.push(y)}}return o}function Me(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return se(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return ae(void 0,void 0,t,e)}return e}function $e(e){return e.newFileName&&e.newFileName!==e.oldFileName}function ye(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function Ae(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function Ve(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function tt(e,t,n,o,a){var i={offset:t,lines:n,index:0},l={offset:o,lines:a,index:0};for(Ue(e,i,l),Ue(e,l,i);i.index<i.lines.length&&l.index<l.lines.length;){var c=i.lines[i.index],p=l.lines[l.index];if((c[0]==="-"||c[0]==="+")&&(p[0]==="-"||p[0]==="+"))nt(e,i,l);else if(c[0]==="+"&&p[0]===" "){var f;(f=e.lines).push.apply(f,b(ee(i)))}else if(p[0]==="+"&&c[0]===" "){var y;(y=e.lines).push.apply(y,b(ee(l)))}else c[0]==="-"&&p[0]===" "?Ie(e,i,l):p[0]==="-"&&c[0]===" "?Ie(e,l,i,!0):c===p?(e.lines.push(c),i.index++,l.index++):Oe(e,ee(i),ee(l))}We(e,i),We(e,l),Ye(e)}function nt(e,t,n){var o=ee(t),a=ee(n);if(qe(o)&&qe(a)){if(Ce(o,a)&&Je(n,o,o.length-a.length)){var i;(i=e.lines).push.apply(i,b(o));return}else if(Ce(a,o)&&Je(t,a,a.length-o.length)){var l;(l=e.lines).push.apply(l,b(a));return}}else if(Xe(o,a)){var c;(c=e.lines).push.apply(c,b(o));return}Oe(e,o,a)}function Ie(e,t,n,o){var a=ee(t),i=ot(n,a);if(i.merged){var l;(l=e.lines).push.apply(l,b(i.merged))}else Oe(e,o?i:a,o?a:i)}function Oe(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function Ue(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var o=t.lines[t.index++];e.lines.push(o),t.offset++}}function We(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function ee(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var o=e.lines[e.index];if(n==="-"&&o[0]==="+"&&(n="+"),n===o[0])t.push(o),e.index++;else break}return t}function ot(e,t){for(var n=[],o=[],a=0,i=!1,l=!1;a<t.length&&e.index<e.lines.length;){var c=e.lines[e.index],p=t[a];if(p[0]==="+")break;if(i=i||c[0]!==" ",o.push(p),a++,c[0]==="+")for(l=!0;c[0]==="+";)n.push(c),c=e.lines[++e.index];p.substr(1)===c.substr(1)?(n.push(c),e.index++):l=!0}if((t[a]||"")[0]==="+"&&i&&(l=!0),l)return n;for(;a<t.length;)o.push(t[a++]);return{merged:o,changes:n}}function qe(e){return e.reduce(function(t,n){return t&&n[0]==="-"},!0)}function Je(e,t,n){for(var o=0;o<n;o++){var a=t[t.length-n+o].substr(1);if(e.lines[e.index+o]!==" "+a)return!1}return e.index+=n,!0}function Te(e){var t=0,n=0;return e.forEach(function(o){if(typeof o!="string"){var a=Te(o.mine),i=Te(o.theirs);t!==void 0&&(a.oldLines===i.oldLines?t+=a.oldLines:t=void 0),n!==void 0&&(a.newLines===i.newLines?n+=a.newLines:n=void 0)}else n!==void 0&&(o[0]==="+"||o[0]===" ")&&n++,t!==void 0&&(o[0]==="-"||o[0]===" ")&&t++}),{oldLines:t,newLines:n}}function it(e){for(var t=[],n,o,a=0;a<e.length;a++)n=e[a],n.added?o=1:n.removed?o=-1:o=0,t.push([o,n.value]);return t}function rt(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];o.added?t.push("<ins>"):o.removed&&t.push("<del>"),t.push(st(o.value)),o.added?t.push("</ins>"):o.removed&&t.push("</del>")}return t.join("")}function st(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}r.Diff=s,r.applyPatch=we,r.applyPatches=Y,r.canonicalize=re,r.convertChangesToDMP=it,r.convertChangesToXML=rt,r.createPatch=Ke,r.createTwoFilesPatch=Re,r.diffArrays=ge,r.diffChars=j,r.diffCss=O,r.diffJson=he,r.diffLines=V,r.diffSentences=w,r.diffTrimmedLines=ce,r.diffWords=E,r.diffWordsWithSpace=P,r.merge=et,r.parsePatch=se,r.structuredPatch=ae,Object.defineProperty(r,"__esModule",{value:!0})});async function wt(r){const s=await crypto.subtle.digest("SHA-256",r),u=Array.from(new Uint8Array(s)),d=u.map(h=>("00"+h.toString(16)).slice(-2)).join("");return d}const yt=r=>{if(r.length<10)return!1;const s=[...r.slice(0,8)].filter(d=>d<"0"||d>"f").length===0,u=r.slice(8);if(s&&u[0]==="["&&u[u.length-1]==="]")try{return JSON.parse(u).length>1}catch{return!1}return!1},vt=(r,s)=>{const u=JSON.parse(s);let d=r.slice(),h="";return u.forEach(j=>{if(Number(j)===j){const g=Math.abs(j),C=d.slice(0,g);d=d.slice(g),j>0&&(h+=String(C))}else h+=String(j)}),h};async function xt(r){const s=new TextEncoder().encode(r),u=await wt(s);return u.substr(0,8)}const bt=async(r,s)=>{const u=xt(r),d=Diff.diffChars(r,s);return{b:await u,c:d.map(h=>h.added?h.value:h.removed?-h.count:h.count)}};async function St(r){const s=await crypto.subtle.digest("SHA-256",r),u=Array.from(new Uint8Array(s)),d=u.map(h=>("00"+h.toString(16)).slice(-2)).join("");return d}const me=window.document;var kt=window.ReactDOM;const Pe=()=>(me.location.href.includes("zed.dev"),"https://code.zed.vision");let _e=!0,Z="",Q=0,jt=0,Ge="",Ze="",je="",Qe;const Lt=async({onChange:r,code:s,language:u})=>{if(typeof window=="undefined")return{monaco:{},editor:{}};const d=window.document,h=window.document.getElementById("container");if(!h){const E=d.getElementById("container");E.id="container",d.body.appendChild(E)}const j=u==="typescript"?"file:///main.tsx":"file:///main.html";let g;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)){const E=window.document.createElement("div");E.id="ace",window.document.body.appendChild(E),await fe("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.min.js"),u==="typescript"?await fe("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-typescript.min.js"):await fe("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-html.min.js"),await fe("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/theme-monokai.min.js"),window.document.getElementById("ace").style.setProperty("display","block"),h.style.setProperty("display","none"),g=window.ace.edit("ace"),g.getSession().setMode("ace/mode/typescript");const P=T=>setTimeout(()=>{const V=window.ace.edit("ace"),ce=V.getTheme();ce!=="ace/theme/monokai "&&(V.setOptions({fontSize:"14pt"}),V.setTheme("ace/theme/monokai"),P(2*T))},T);P(100),g.setValue(s),g.blur()}if(window.monaco===void 0){const E="https://unpkg.com/@zedvision/monaco-editor@0.21.2/release/min/vs",{require:P}=await fe(`${E}/loader.js`);P.config({paths:{vs:E}}),await new Promise(T=>P(["vs/editor/editor.main"],T))}const C=window.monaco;let R;try{R=C.editor.getModel(j),R.getValue()!==s&&R.setValue(s)}catch{R=await C.editor.createModel(s,u,C.Uri.parse(j))}const L={monaco:C,editor:C.editor.create(window.document.getElementById("container"),{formatOnType:!0,scrollbar:{horizontal:"hidden",verticalHasArrows:!0,verticalScrollbarSize:20},minimap:{enabled:!1},folding:!1,multiCursorModifier:"alt",wordWrap:"on",wordWrapBreakAfterCharacters:">([{]))],;} ",mouseWheelZoom:!1,wordWrapColumn:80,automaticLayout:!0,scrollBeyondLastLine:!1,autoIndent:"brackets",autoClosingQuotes:"always",padding:{bottom:300},lineNumbers:"on",autoClosingBrackets:"always",autoClosingOvertype:"always",suggest:{},codeLens:!0,autoSurround:"languageDefined",trimAutoWhitespace:!0,codeActionsOnSaveTimeout:100,model:R,value:s,language:u,theme:"vs-dark"})};if(L.editor.onDidChangeModelContent(()=>r(L.editor.getValue())),g&&g.session.on("change",function(){const E=g.getValue();L.editor.setValue(E),r(E)}),g&&d.getElementById("container").replaceWith(d.getElementById("ace")),L.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!0,noSemanticValidation:!0,noSyntaxValidation:!0}),u==="typescript"){const E=[{name:"react",url:"https://unpkg.com/@types/react@17.0.0/index.d.ts",depend:["global","csstype","react-dom","prop-types"]},{name:"global",url:"https://unpkg.com/@types/react@17.0.0/global.d.ts",depend:[]},{name:"prop-types",url:"https://unpkg.com/@types/prop-types@15.7.3/index.d.ts",depend:[]},{name:"react-dom",url:"https://unpkg.com/@types/react-dom@17.0.0/index.d.ts",depend:[]},{name:"csstype",url:"https://unpkg.com/csstype@3.0.5/index.d.ts",depend:[]},{name:"@emotion/styled/base.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/base.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/styled/index.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/index.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/cache/index.d.ts",url:"https://unpkg.com/@emotion/cache@11.0.0/types/index.d.ts",depend:["@emotion/utils"]},{name:"@emotion/react/index.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/index.d.ts",depend:["@emotion/cache"]},{name:"@emotion/react/jsx-namespace.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/jsx-namespace.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/css-prop.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/css-prop.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/helper.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/helper.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/theming.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/theming.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/serialize/index.d.ts",url:"https://unpkg.com/@emotion/serialize@1.0.0/types/index.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/utils/index.d.ts",url:"https://unpkg.com/@emotion/utils@1.0.0/types/index.d.ts",depend:[]},{name:"framer-motion",url:"https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.d.ts",depend:[]},{name:"popmotion",url:"https://unpkg.com/popmotion@9.0.1/lib/index.d.ts"},{name:"@zedvision/qrious/index.d.ts",url:"https://unpkg.com/@zedvision/qrious@8.4.2/dist/qrious.d.ts"}],P=E.map(({name:T,url:V})=>(async()=>L.monaco.languages.typescript.typescriptDefaults.addExtraLib(await(await fetch(V)).text(),T.includes("@")?`file:///node_modules/${T}`:`file:///node_modules/@types/${T}/index.d.ts`))());return L.monaco.languages.typescript.typescriptDefaults.setCompilerOptions({target:L.monaco.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,allowUmdGlobalAccess:!0,strict:!0,allowJs:!0,noEmitOnError:!0,allowSyntheticDefaultImports:!0,moduleResolution:L.monaco.languages.typescript.ModuleResolutionKind.Nodejs,module:L.monaco.languages.typescript.ModuleKind.CommonJS,noEmit:!0,typeRoots:["node_modules/@types"],jsx:"react-jsx",esModuleInterop:!0}),await Promise.all(P),L.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!1,noSemanticValidation:!1,noSyntaxValidation:!1}),L}};async function Fe(r){const s=new TextEncoder().encode(r),u=await St(s);return u.substr(0,8)}const Et=(r,s=!1)=>{const u={async get(d,h="string"){let j;try{if(s?j=await(await r).get("codeStore",d):j=await r.get(d),!j)return null}catch(g){return null}if(h==="json")return JSON.parse(j);if(h==="string"){const g=await j;if(typeof g=="string"&&h==="string"){const L=g;if(yt(g)){const E=g.slice(0,8),P=g.slice(8),T=await u.get(E);return vt(T,P)}return g}const C=new TextDecoder,R=C.decode(g);return R}return j},async put(d,h){let j;try{const C=await u.get(d);if(typeof C=="string"&&typeof h=="string"&&C.length===8&&C!==h){const R=await u.get(h),L=await u.get(C);if(typeof L=="string"){const E=await Fe(L);if(E===C){const P=await bt(R,L),T=P.b+JSON.stringify(P.c);u.put(E,T)}}}}catch{j=""}if(j!==""&&h===j)return h;let g;return typeof h!="string"?g=new TextDecoder().decode(h):g=h,s?(await r).put("codeStore",g,d):await r.put(d,g)},async delete(d){return(await r).delete("codeStore",d)},async clear(){return(await r).clear("codeStore")},async keys(){return(await r).getAllKeys("codeStore")}};return u},Le=async()=>{const{openDB:r}=await"https://unpkg.com/idb@5.0.8/build/esm/index.js",s=r("localZedCodeStore",1,{upgrade(u){u.createObjectStore("codeStore")},blocked(){},blocking(){},terminated(){}});return Et(s,!0)};export async function getUserId(){const r=await Le(),s=await r.get("uuid");if(!s)if(window.location.href.includes("zed.dev"))r.put("uuid","1234");else{const u=await fetch("https://code.zed.vision/register"),d=await u.json();return r.put("uuid",d.uuid),d.uuid}return s}export const getProjects=async()=>{const r=await getUserId(),s=await Le(),u=await s.get(r,"json");if(!u||!u.list){const d=ft();return await s.put(r,JSON.stringify({list:[d],[d]:{created:Date.now(),lastOpen:Date.now()}})),[d]}return u.list};export async function run(r="window"){await gt("https://unpkg.com/@babel/standalone@7.12.10/babel.min.js"),r==="editor"&&ht(),r=="window"&&mt(async()=>{const w=await Qe();window.open(w)});const s=await Le(),u=await getUserId(),d=await getProjects(),h=d[0],j=await P();E(de(j)),je=j;const g=await Lt({language:"typescript",code:j,onChange:R});async function C(w){if(Q===1)return;try{Q=1;const k=await L(),O=me.getElementById("error");if(Q=0,w!==Z)return;if(k&&k.length){const{diff:F}=await import("../../diff/dist/diff.min.js");if(Z!=w)return;if(Ge===w)return;const b=await F(je,w);if(b.c.length<=3){g.monaco.editor.setTheme("hc-black");return}O.innerHTML=k[0].messageText.toString(),O.style.display="block",Ge=w;return}je=w,O.style.display="none",g.monaco.editor.setTheme("vs-dark"),jt=0,Q=0,E(de(w))}catch(k){if(Q=0,w!==Z)return;g.monaco.editor.setTheme("vs-light"),setTimeout(()=>{g.monaco.editor.setTheme("hc-black")},50),console.error(k)}}function R(w){if(!g)return;if(Z=w,!Q)C(Z);else{const k=w,O=setInterval(()=>{(w!==Z||!Q)&&clearInterval(O),Q||C(Z)},100)}}async function L(){if(console.log("GET ERRORS"),!g||!g.monaco)return;const w=g.monaco.Uri.parse("file:///main.tsx"),k=await g.monaco.languages.typescript.getTypeScriptWorker(),O=await(await k(w)).getSemanticDiagnostics("file:///main.tsx"),F=await(await k(w)).getCompilerOptionsDiagnostics("file:///main.tsx"),b=await(await k(w)).getSyntacticDiagnostics("file:///main.tsx");return[...O,...F,...b]}function E(w){const k=/import/gi,O=/export /gi,F="///",b=`
    Object.assign(window, React);
    if (window.Motion) {
        Object.assign(window, window.Motion);
    }
    if (window.emotionStyled){
      window.styled= window.emotionStyled;
    }
    ;
    `+w.replaceAll(k,F).replace("export default","DefaultElement = ").replaceAll(O,""),oe=()=>{const _=r==="window"?b.replace("body{","#root{"):b,I=new Function(`return function(){  
          let DefaultElement;
          ${_}
          return ReactDOM.render(jsx(DefaultElement), document.getElementById("root"));
      }`)();I(),Qe=async()=>{const ie=new Function(`return function(){
            let DefaultElement;
            ${b}
            return ReactDOMServer.renderToString(jsx(DefaultElement));
        }`)(),M=ie(),K=Array.from(me.querySelector("head > style[data-emotion=css]").sheet.cssRules).map(Y=>Y.cssText).filter(Y=>M.includes(Y.substring(3,8))).join(`
  `);let W;if(b.includes("body{")){const Y=b.indexOf("body{"),ae=b.slice(Y),De=ae.indexOf("}");W=ae.slice(0,De+1)}let he="",re="";b.indexOf("framer-motion")>-1&&(he='<script crossorigin src="https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.js"></script>',re="const {motion} = Motion");let X="";b.indexOf("QRious")>-1&&(X='<script crossorigin src="https://unpkg.com/@zedvision/qrious@8.4.2/dist/qrious.min.js"></script>');let ge="(code).zed.vision :)";M.indexOf("<title>")>-1&&M.indexOf("</title>")>-1&&(ge=M.slice(M.indexOf("<title>")+7,M.indexOf("</title>")));const se=`<!DOCTYPE html>
        <html lang="en">
        <head>
        <title>${ge}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="Description" content="Generated with code.zed.vision">
        <head profile="http://www.w3.org/2005/10/profile">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" />
        <link rel="preload" href="https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js" as="script">
        <link rel="icon" 
              type="image/png"
              href="https://zed.vision/favicon.ico">
        <style>
        ${W}
        
        ${K}
        </style>
        </head>
        <body>
        <div id="root">
        ${M}
        </div>
        <script crossorigin src="https://unpkg.com/react@17.0.1/umd/react.production.min.js"></script>
        ${he}
        ${X}
        <script crossorigin src="https://unpkg.com/react-dom@17.0.1/umd/react-dom-server.browser.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/react@11.1.2/dist/emotion-react.umd.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/styled@11.0.0/dist/emotion-styled.umd.min.js"></script>
        <script type="module">
        Object.assign(window, emotionReact);

        const styled = window["emotionStyled"];

        let DefaultElement;

        ${b}
        
        console.log(ReactDOMServer.renderToString(jsx(DefaultElement)));
        
        document.body.children[0].innerHTML = ReactDOMServer.renderToString(jsx(DefaultElement));
        
        const s = window.document.createElement("script");
        s.src = "https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js";
        s.onload = ()=> ReactDOM.hydrate(jsx(DefaultElement), document.body.children[0]);
        window.document.head.appendChild(s);

        </script>
        </body>
        </html>
        `,Ee=await V(se),we=await ce(Ee);return we}};if(!_e){const _=async I=>{if(I!==je)return;if(Ze===I)return;Ze=I;const ie=new Request(Pe(),{body:I,method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"}}),M=await Fe(I);try{const K=await s.get(h);K!==M&&(await s.put(M,I),await s.put(h,M))}catch(K){console.error(K)}};_(Z)}_e=!1,oe()}async function P(){const w=await Le(),k=new URLSearchParams(window.location.search),O=k.get("h")||await w.get(h);if(O){let F;try{F=await w.get(O)}catch{console.error("error load key: "+O)}if(F)return F;let b;try{const oe=await fetch(Pe()+"/?h="+O);b=await oe.json()}catch(oe){const _=await Fe(ke);return w.put(_,ke),await w.put(h,_),ke}return b}return ke}function T(w,k){const O=new URLSearchParams(window.location.search);O.set(w,k),window.history.replaceState({},"",decodeURIComponent(`${window.location.pathname}?${O}`))}function V(w){const k=new Blob([w],{type:"text/html"});return k}async function ce(w){const k=Pe(),O=new Request(k,{body:w,method:"POST",headers:{"Content-Type":"text/html;charset=UTF-8",SHARE:"true"}}),F=await fetch(O),{hash:b}=await F.json();return`${k}/${b}`}function de(w){const{transform:k}=window.Babel;return k(`/** @jsx jsx */

  Object.assign(window, React);
  `+w,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code}}
