!function(o,a){typeof exports=="object"&&typeof module!="undefined"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):a((o=typeof globalThis!="undefined"?globalThis:o||self).uuid={})}(this,function(o){"use strict";var a=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),g=new Uint8Array(16);function v(){if(!a)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(g)}var j=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function C(f){return typeof f=="string"&&j.test(f)}for(var k,F,D=[],P=0;P<256;++P)D.push((P+256).toString(16).substr(1));function U(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,p=(D[f[m+0]]+D[f[m+1]]+D[f[m+2]]+D[f[m+3]]+"-"+D[f[m+4]]+D[f[m+5]]+"-"+D[f[m+6]]+D[f[m+7]]+"-"+D[f[m+8]]+D[f[m+9]]+"-"+D[f[m+10]]+D[f[m+11]]+D[f[m+12]]+D[f[m+13]]+D[f[m+14]]+D[f[m+15]]).toLowerCase();if(!C(p))throw TypeError("Stringified UUID is invalid");return p}var J=0,G=0;function oe(f){if(!C(f))throw TypeError("Invalid UUID");var m,p=new Uint8Array(16);return p[0]=(m=parseInt(f.slice(0,8),16))>>>24,p[1]=m>>>16&255,p[2]=m>>>8&255,p[3]=255&m,p[4]=(m=parseInt(f.slice(9,13),16))>>>8,p[5]=255&m,p[6]=(m=parseInt(f.slice(14,18),16))>>>8,p[7]=255&m,p[8]=(m=parseInt(f.slice(19,23),16))>>>8,p[9]=255&m,p[10]=(m=parseInt(f.slice(24,36),16))/1099511627776&255,p[11]=m/4294967296&255,p[12]=m>>>24&255,p[13]=m>>>16&255,p[14]=m>>>8&255,p[15]=255&m,p}function ve(f,m,p){function s(b,l,i,c){if(typeof b=="string"&&(b=function(V){V=unescape(encodeURIComponent(V));for(var X=[],W=0;W<V.length;++W)X.push(V.charCodeAt(W));return X}(b)),typeof l=="string"&&(l=oe(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+b.length);if(d.set(l),d.set(b,l.length),(d=p(d))[6]=15&d[6]|m,d[8]=63&d[8]|128,i){c=c||0;for(var h=0;h<16;++h)i[c+h]=d[h];return i}return U(d)}try{s.name=f}catch(b){}return s.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",s}function le(f){return 14+(f+64>>>9<<4)+1}function I(f,m){var p=(65535&f)+(65535&m);return(f>>16)+(m>>16)+(p>>16)<<16|65535&p}function N(f,m,p,s,b,l){return I((i=I(I(m,f),I(s,l)))<<(c=b)|i>>>32-c,p);var i,c}function T(f,m,p,s,b,l,i){return N(m&p|~m&s,f,m,b,l,i)}function B(f,m,p,s,b,l,i){return N(m&s|p&~s,f,m,b,l,i)}function M(f,m,p,s,b,l,i){return N(m^p^s,f,m,b,l,i)}function R(f,m,p,s,b,l,i){return N(p^(m|~s),f,m,b,l,i)}var Q=ve("v3",48,function(f){if(typeof f=="string"){var m=unescape(encodeURIComponent(f));f=new Uint8Array(m.length);for(var p=0;p<m.length;++p)f[p]=m.charCodeAt(p)}return function(s){for(var b=[],l=32*s.length,i="0123456789abcdef",c=0;c<l;c+=8){var d=s[c>>5]>>>c%32&255,h=parseInt(i.charAt(d>>>4&15)+i.charAt(15&d),16);b.push(h)}return b}(function(s,b){s[b>>5]|=128<<b%32,s[le(b)-1]=b;for(var l=1732584193,i=-271733879,c=-1732584194,d=271733878,h=0;h<s.length;h+=16){var V=l,X=i,W=c,Y=d;l=T(l,i,c,d,s[h],7,-680876936),d=T(d,l,i,c,s[h+1],12,-389564586),c=T(c,d,l,i,s[h+2],17,606105819),i=T(i,c,d,l,s[h+3],22,-1044525330),l=T(l,i,c,d,s[h+4],7,-176418897),d=T(d,l,i,c,s[h+5],12,1200080426),c=T(c,d,l,i,s[h+6],17,-1473231341),i=T(i,c,d,l,s[h+7],22,-45705983),l=T(l,i,c,d,s[h+8],7,1770035416),d=T(d,l,i,c,s[h+9],12,-1958414417),c=T(c,d,l,i,s[h+10],17,-42063),i=T(i,c,d,l,s[h+11],22,-1990404162),l=T(l,i,c,d,s[h+12],7,1804603682),d=T(d,l,i,c,s[h+13],12,-40341101),c=T(c,d,l,i,s[h+14],17,-1502002290),l=B(l,i=T(i,c,d,l,s[h+15],22,1236535329),c,d,s[h+1],5,-165796510),d=B(d,l,i,c,s[h+6],9,-1069501632),c=B(c,d,l,i,s[h+11],14,643717713),i=B(i,c,d,l,s[h],20,-373897302),l=B(l,i,c,d,s[h+5],5,-701558691),d=B(d,l,i,c,s[h+10],9,38016083),c=B(c,d,l,i,s[h+15],14,-660478335),i=B(i,c,d,l,s[h+4],20,-405537848),l=B(l,i,c,d,s[h+9],5,568446438),d=B(d,l,i,c,s[h+14],9,-1019803690),c=B(c,d,l,i,s[h+3],14,-187363961),i=B(i,c,d,l,s[h+8],20,1163531501),l=B(l,i,c,d,s[h+13],5,-1444681467),d=B(d,l,i,c,s[h+2],9,-51403784),c=B(c,d,l,i,s[h+7],14,1735328473),l=M(l,i=B(i,c,d,l,s[h+12],20,-1926607734),c,d,s[h+5],4,-378558),d=M(d,l,i,c,s[h+8],11,-2022574463),c=M(c,d,l,i,s[h+11],16,1839030562),i=M(i,c,d,l,s[h+14],23,-35309556),l=M(l,i,c,d,s[h+1],4,-1530992060),d=M(d,l,i,c,s[h+4],11,1272893353),c=M(c,d,l,i,s[h+7],16,-155497632),i=M(i,c,d,l,s[h+10],23,-1094730640),l=M(l,i,c,d,s[h+13],4,681279174),d=M(d,l,i,c,s[h],11,-358537222),c=M(c,d,l,i,s[h+3],16,-722521979),i=M(i,c,d,l,s[h+6],23,76029189),l=M(l,i,c,d,s[h+9],4,-640364487),d=M(d,l,i,c,s[h+12],11,-421815835),c=M(c,d,l,i,s[h+15],16,530742520),l=R(l,i=M(i,c,d,l,s[h+2],23,-995338651),c,d,s[h],6,-198630844),d=R(d,l,i,c,s[h+7],10,1126891415),c=R(c,d,l,i,s[h+14],15,-1416354905),i=R(i,c,d,l,s[h+5],21,-57434055),l=R(l,i,c,d,s[h+12],6,1700485571),d=R(d,l,i,c,s[h+3],10,-1894986606),c=R(c,d,l,i,s[h+10],15,-1051523),i=R(i,c,d,l,s[h+1],21,-2054922799),l=R(l,i,c,d,s[h+8],6,1873313359),d=R(d,l,i,c,s[h+15],10,-30611744),c=R(c,d,l,i,s[h+6],15,-1560198380),i=R(i,c,d,l,s[h+13],21,1309151649),l=R(l,i,c,d,s[h+4],6,-145523070),d=R(d,l,i,c,s[h+11],10,-1120210379),c=R(c,d,l,i,s[h+2],15,718787259),i=R(i,c,d,l,s[h+9],21,-343485551),l=I(l,V),i=I(i,X),c=I(c,W),d=I(d,Y)}return[l,i,c,d]}(function(s){if(s.length===0)return[];for(var b=8*s.length,l=new Uint32Array(le(b)),i=0;i<b;i+=8)l[i>>5]|=(255&s[i/8])<<i%32;return l}(f),8*f.length))});function xe(f,m,p,s){switch(f){case 0:return m&p^~m&s;case 1:return m^p^s;case 2:return m&p^m&s^p&s;case 3:return m^p^s}}function q(f,m){return f<<m|f>>>32-m}var re=ve("v5",80,function(f){var m=[1518500249,1859775393,2400959708,3395469782],p=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof f=="string"){var s=unescape(encodeURIComponent(f));f=[];for(var b=0;b<s.length;++b)f.push(s.charCodeAt(b))}else Array.isArray(f)||(f=Array.prototype.slice.call(f));f.push(128);for(var l=f.length/4+2,i=Math.ceil(l/16),c=new Array(i),d=0;d<i;++d){for(var h=new Uint32Array(16),V=0;V<16;++V)h[V]=f[64*d+4*V]<<24|f[64*d+4*V+1]<<16|f[64*d+4*V+2]<<8|f[64*d+4*V+3];c[d]=h}c[i-1][14]=8*(f.length-1)/Math.pow(2,32),c[i-1][14]=Math.floor(c[i-1][14]),c[i-1][15]=8*(f.length-1)&4294967295;for(var X=0;X<i;++X){for(var W=new Uint32Array(80),Y=0;Y<16;++Y)W[Y]=c[X][Y];for(var ie=16;ie<80;++ie)W[ie]=q(W[ie-3]^W[ie-8]^W[ie-14]^W[ie-16],1);for(var de=p[0],be=p[1],Se=p[2],he=p[3],ke=p[4],se=0;se<80;++se){var De=Math.floor(se/20),Be=q(de,5)+xe(De,be,Se,he)+ke+m[De]+W[se]>>>0;ke=he,he=Se,Se=q(be,30)>>>0,be=de,de=Be}p[0]=p[0]+de>>>0,p[1]=p[1]+be>>>0,p[2]=p[2]+Se>>>0,p[3]=p[3]+he>>>0,p[4]=p[4]+ke>>>0}return[p[0]>>24&255,p[0]>>16&255,p[0]>>8&255,255&p[0],p[1]>>24&255,p[1]>>16&255,p[1]>>8&255,255&p[1],p[2]>>24&255,p[2]>>16&255,p[2]>>8&255,255&p[2],p[3]>>24&255,p[3]>>16&255,p[3]>>8&255,255&p[3],p[4]>>24&255,p[4]>>16&255,p[4]>>8&255,255&p[4]]});o.NIL="00000000-0000-0000-0000-000000000000",o.parse=oe,o.stringify=U,o.v1=function(f,m,p){var s=m&&p||0,b=m||new Array(16),l=(f=f||{}).node||k,i=f.clockseq!==void 0?f.clockseq:F;if(l==null||i==null){var c=f.random||(f.rng||v)();l==null&&(l=k=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),i==null&&(i=F=16383&(c[6]<<8|c[7]))}var d=f.msecs!==void 0?f.msecs:Date.now(),h=f.nsecs!==void 0?f.nsecs:G+1,V=d-J+(h-G)/1e4;if(V<0&&f.clockseq===void 0&&(i=i+1&16383),(V<0||d>J)&&f.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");J=d,G=h,F=i;var X=(1e4*(268435455&(d+=122192928e5))+h)%4294967296;b[s++]=X>>>24&255,b[s++]=X>>>16&255,b[s++]=X>>>8&255,b[s++]=255&X;var W=d/4294967296*1e4&268435455;b[s++]=W>>>8&255,b[s++]=255&W,b[s++]=W>>>24&15|16,b[s++]=W>>>16&255,b[s++]=i>>>8|128,b[s++]=255&i;for(var Y=0;Y<6;++Y)b[s+Y]=l[Y];return m||U(b)},o.v3=Q,o.v4=function(f,m,p){var s=(f=f||{}).random||(f.rng||v)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,m){p=p||0;for(var b=0;b<16;++b)m[p+b]=s[b];return m}return U(s)},o.v5=re,o.validate=C,o.version=function(f){if(!C(f))throw TypeError("Invalid UUID");return parseInt(f.substr(14,1),16)},Object.defineProperty(o,"__esModule",{value:!0})});const yt=o=>{const a=()=>jsx(React.Fragment,null,jsx(motion.div,{css:`
            background: red;
            border: 4px solid red;
            border-radius: 8px;
          `,animate:{scale:1,top:1,left:600},dragElastic:.5,dragMomentum:!1,initial:{top:1,left:0,scale:.7},transition:{duration:.5},drag:!0,dragConstraints:{left:-window.innerWidth+200,right:0,bottom:window.innerHeight-200,top:0}},jsx("div",{css:`
      display: block;
      with: 100%;
      text-align: right;
      background: linear-gradient(0deg, darkred, red);
    `},jsx("button",{css:`
              background: darkred;
              margin-top: -4px;
              color: white;
              cursor: pointer;
              font-weight: bold;
              font-family: Roboto;
              padding: 8px 16px;
              outline: none;
              border: none;
              border-radius: 0px 8px 0px 0px;
            `,onClick:()=>o()},"\u{1F30E} SHARE")),jsx("div",{css:`  
      min-width: 200px;
      padding: 30px;
      max-width: 600px;
      background: white;
      max-height: 800px;
      border-radius: 0px 0px 8px 8px;
      overflow-y: overlay;
    `,id:"root"})));At.render(jsx(a),Ie.getElementById("dragabbleWindow"))};function vt(){const o=new JSFrame,a=o.create({name:"Win",title:"",width:window.innerWidth/2-40,height:600,minWidth:300,minHeight:300,appearanceName:"material",appearanceParam:{titleBar:{color:"white",height:40,background:"#1e1e1e"}},style:{backgroundColor:"rgba(255,255,255,0.8)",overflow:"auto"},style:{backgroundColor:"rgba(0,0,0,0.8)",overflow:"hidden",width:"100%"},html:'<div id="container"></div>'});a.setPosition(window.innerWidth-32,32,"RIGHT_TOP"),a.setControl({maximizeButton:"maximizeButton",demaximizeButton:"restoreButton",minimizeButton:"minimizeButton",deminimizeButton:"deminimizeButton",hideButton:"closeButton",animation:!0,animationDuration:150}),a.control.on("hid",(g,v)=>{g.closeFrame()}),a.control.on("maximized",(g,v)=>{o.showToast({text:"Maximized"})}),a.control.on("demaximized",(g,v)=>{}),a.control.on("minimized",(g,v)=>{}),a.control.on("dminimized",(g,v)=>{}),a.show(),console.log(a)}function Ce(o){return new Promise(function(a,g){var v;v=window.document.createElement("script"),v.src=o,v.onload=()=>a(window),v.onerror=g,window.document.head.appendChild(v)})}const xt=async o=>Ie.querySelector(`script[src="${o}"]`)||new Promise(function(a,g){const v=window.document.createElement("script");v.src=o,v.onload=a,v.onerror=g,window.document.head.appendChild(v)}),Pe=`import { useState } from "react";
import { css, Global } from "@emotion/react";

const Slider = () => {
  const steps = 128;
  const [sliderValue, setSlider] = useState(steps / 2);
  return <>
    <input max={steps}
      css={\`
        appearance: none;
        width: 100%;
        height: 40px; 
        background: rgb(\${255 / steps * sliderValue} \${255 / steps * (steps - sliderValue)} 0); 
        outline: none; 
    \`} type="range"
      aria-label="font size changer"
      value={sliderValue}
      step="1"
      onChangeCapture={(e) => setSlider(Number(e.currentTarget.value))}>
    </input>
    <p
      css={css\`
        font-size: \${72 / steps * sliderValue}px
        \`}>
      Example when the text gets bigger...
    </p>
    <p css={css\`
        font-size: \${72 / steps * (steps - sliderValue)}px
        \`}>
      ...or smaller
    </p>
  </>
}

export default () => <>
  <Global styles={css\`
      body{
          margin: 0;
          overflow: overlay;
        }  
    \`} />
  <Slider />
</>
`;(function(o,a){typeof exports=="object"&&typeof module!="undefined"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(o=o||self,a(o.Diff={}))})(this,function(o){"use strict";function a(){}a.prototype={diff:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.callback;typeof n=="function"&&(r=n,n={}),this.options=n;var w=this;function u(O){return r?(setTimeout(function(){r(void 0,O)},0),!0):O}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var y=t.length,x=e.length,S=1,L=y+x,A=[{newPos:-1,components:[]}],z=this.extractCommon(A[0],t,e,0);if(A[0].newPos+1>=y&&z+1>=x)return u([{value:this.join(t),count:t.length}]);function E(){for(var O=-1*S;O<=S;O+=2){var H=void 0,te=A[O-1],_=A[O+1],K=(_?_.newPos:0)-O;te&&(A[O-1]=void 0);var Z=te&&te.newPos+1<y,ue=_&&0<=K&&K<x;if(!Z&&!ue){A[O]=void 0;continue}if(!Z||ue&&te.newPos<_.newPos?(H=v(_),w.pushComponent(H.components,void 0,!0)):(H=te,H.newPos++,w.pushComponent(H.components,!0,void 0)),K=w.extractCommon(H,t,e,O),H.newPos+1>=y&&K+1>=x)return u(g(w,H.components,t,e,w.useLongestToken));A[O]=H}S++}if(r)(function O(){setTimeout(function(){if(S>L)return r();E()||O()},0)})();else for(;S<=L;){var $=E();if($)return $}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){for(var w=t.length,u=n.length,y=e.newPos,x=y-r,S=0;y+1<w&&x+1<u&&this.equals(t[y+1],n[x+1]);)y++,x++,S++;return S&&e.components.push({count:S}),e.newPos=y,x},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function g(e,t,n,r,w){for(var u=0,y=t.length,x=0,S=0;u<y;u++){var L=t[u];if(L.removed){if(L.value=e.join(r.slice(S,S+L.count)),S+=L.count,u&&t[u-1].added){var A=t[u-1];t[u-1]=t[u],t[u]=A}}else{if(!L.added&&w){var z=n.slice(x,x+L.count);z=z.map(function($,O){var H=r[S+O];return H.length>$.length?H:$}),L.value=e.join(z)}else L.value=e.join(n.slice(x,x+L.count));x+=L.count,L.added||(S+=L.count)}}var E=t[y-1];return y>1&&typeof E.value=="string"&&(E.added||E.removed)&&e.equals("",E.value)&&(t[y-2].value+=E.value,t.pop()),t}function v(e){return{newPos:e.newPos,components:e.components.slice(0)}}var j=new a;function C(e,t,n){return j.diff(e,t,n)}function k(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var F=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,D=/\S/,P=new a;P.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!D.test(e)&&!D.test(t)},P.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&F.test(t[n])&&F.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};function U(e,t,n){return n=k(n,{ignoreWhitespace:!0}),P.diff(e,t,n)}function J(e,t,n){return P.diff(e,t,n)}var G=new a;G.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var w=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=w:(this.options.ignoreWhitespace&&(w=w.trim()),t.push(w))}return t};function oe(e,t,n){return G.diff(e,t,n)}function ve(e,t,n){var r=k(n,{ignoreWhitespace:!0});return G.diff(e,t,r)}var le=new a;le.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function I(e,t,n){return le.diff(e,t,n)}var N=new a;N.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function T(e,t,n){return N.diff(e,t,n)}function B(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(t){return typeof t}:B=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(e)}function M(e){return R(e)||Q(e)||xe(e)||re()}function R(e){if(Array.isArray(e))return q(e)}function Q(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function xe(e,t){if(!e)return;if(typeof e=="string")return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}function q(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=Object.prototype.toString,m=new a;m.useLongestToken=!0,m.tokenize=G.tokenize,m.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,w=r===void 0?function(u,y){return typeof y=="undefined"?n:y}:r;return typeof e=="string"?e:JSON.stringify(s(e,null,null,w),w,"  ")},m.equals=function(e,t){return a.prototype.equals.call(m,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function p(e,t,n){return m.diff(e,t,n)}function s(e,t,n,r,w){t=t||[],n=n||[],r&&(e=r(w,e));var u;for(u=0;u<t.length;u+=1)if(t[u]===e)return n[u];var y;if(f.call(e)==="[object Array]"){for(t.push(e),y=new Array(e.length),n.push(y),u=0;u<e.length;u+=1)y[u]=s(e[u],t,n,r,w);return t.pop(),n.pop(),y}if(e&&e.toJSON&&(e=e.toJSON()),B(e)==="object"&&e!==null){t.push(e),y={},n.push(y);var x=[],S;for(S in e)e.hasOwnProperty(S)&&x.push(S);for(x.sort(),u=0;u<x.length;u+=1)S=x[u],y[S]=s(e[S],t,n,r,S);t.pop(),n.pop()}else y=e;return y}var b=new a;b.tokenize=function(e){return e.slice()},b.join=b.removeEmpty=function(e){return e};function l(e,t,n){return b.diff(e,t,n)}function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],w=[],u=0;function y(){var L={};for(w.push(L);u<n.length;){var A=n[u];if(/^(\-\-\-|\+\+\+|@@)\s/.test(A))break;var z=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(A);z&&(L.index=z[1]),u++}for(x(L),x(L),L.hunks=[];u<n.length;){var E=n[u];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(E))break;if(/^@@/.test(E))L.hunks.push(S());else{if(E&&t.strict)throw new Error("Unknown line "+(u+1)+" "+JSON.stringify(E));u++}}}function x(L){var A=/^(---|\+\+\+)\s+(.*)$/.exec(n[u]);if(A){var z=A[1]==="---"?"old":"new",E=A[2].split("	",2),$=E[0].replace(/\\\\/g,"\\");/^".*"$/.test($)&&($=$.substr(1,$.length-2)),L[z+"FileName"]=$,L[z+"Header"]=(E[1]||"").trim(),u++}}function S(){var L=u,A=n[u++],z=A.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),E={oldStart:+z[1],oldLines:typeof z[2]=="undefined"?1:+z[2],newStart:+z[3],newLines:typeof z[4]=="undefined"?1:+z[4],lines:[],linedelimiters:[]};E.oldLines===0&&(E.oldStart+=1),E.newLines===0&&(E.newStart+=1);for(var $=0,O=0;u<n.length&&!(n[u].indexOf("--- ")===0&&u+2<n.length&&n[u+1].indexOf("+++ ")===0&&n[u+2].indexOf("@@")===0);u++){var H=n[u].length==0&&u!=n.length-1?" ":n[u][0];if(H==="+"||H==="-"||H===" "||H==="\\")E.lines.push(n[u]),E.linedelimiters.push(r[u]||`
`),H==="+"?$++:H==="-"?O++:H===" "&&($++,O++);else break}if(!$&&E.newLines===1&&(E.newLines=0),!O&&E.oldLines===1&&(E.oldLines=0),t.strict){if($!==E.newLines)throw new Error("Added line count did not match for hunk at line "+(L+1));if(O!==E.oldLines)throw new Error("Removed line count did not match for hunk at line "+(L+1))}return E}for(;u<n.length;)y();return w}function c(e,t,n){var r=!0,w=!1,u=!1,y=1;return function x(){if(r&&!u){if(w?y++:r=!1,e+y<=n)return y;u=!0}if(!w)return u||(r=!0),t<=e-y?-y++:(w=!0,x())}}function d(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=i(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var r=e.split(/\r\n|[\n\v\f\r\x85]/),w=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],u=t.hunks,y=n.compareLine||function(Re,Ee,Ae,ye){return Ee===ye},x=0,S=n.fuzzFactor||0,L=0,A=0,z,E;function $(Re,Ee){for(var Ae=0;Ae<Re.lines.length;Ae++){var ye=Re.lines[Ae],Ue=ye.length>0?ye[0]:" ",wt=ye.length>0?ye.substr(1):ye;if(Ue===" "||Ue==="-"){if(!y(Ee+1,r[Ee],Ue,wt)&&(x++,x>S))return!1;Ee++}}return!0}for(var O=0;O<u.length;O++){for(var H=u[O],te=r.length-H.oldLines,_=0,K=A+H.oldStart-1,Z=c(K,L,te);_!==void 0;_=Z())if($(H,K+_)){H.offset=A+=_;break}if(_===void 0)return!1;L=H.offset+H.oldStart+H.oldLines}for(var ue=0,je=0;je<u.length;je++){var ee=u[je],ae=ee.oldStart+ee.offset+ue-1;ue+=ee.newLines-ee.oldLines;for(var ne=0;ne<ee.lines.length;ne++){var ce=ee.lines[ne],we=ce.length>0?ce[0]:" ",ze=ce.length>0?ce.substr(1):ce,Te=ee.linedelimiters[ne];if(we===" ")ae++;else if(we==="-")r.splice(ae,1),w.splice(ae,1);else if(we==="+")r.splice(ae,0,ze),w.splice(ae,0,Te),ae++;else if(we==="\\"){var Me=ee.lines[ne-1]?ee.lines[ne-1][0]:null;Me==="+"?z=!0:Me==="-"&&(E=!0)}}}if(z)for(;!r[r.length-1];)r.pop(),w.pop();else E&&(r.push(""),w.push(`
`));for(var Le=0;Le<r.length-1;Le++)r[Le]=r[Le]+w[Le];return r.join("")}function h(e,t){typeof e=="string"&&(e=i(e));var n=0;function r(){var w=e[n++];if(!w)return t.complete();t.loadFile(w,function(u,y){if(u)return t.complete(u);var x=d(y,w,t);t.patched(w,x,function(S){if(S)return t.complete(S);r()})})}r()}function V(e,t,n,r,w,u,y){y||(y={}),typeof y.context=="undefined"&&(y.context=4);var x=oe(n,r,y);x.push({value:"",lines:[]});function S(_){return _.map(function(K){return" "+K})}for(var L=[],A=0,z=0,E=[],$=1,O=1,H=function(_){var K=x[_],Z=K.lines||K.value.replace(/\n$/,"").split(`
`);if(K.lines=Z,K.added||K.removed){var ue;if(!A){var je=x[_-1];A=$,z=O,je&&(E=y.context>0?S(je.lines.slice(-y.context)):[],A-=E.length,z-=E.length)}(ue=E).push.apply(ue,M(Z.map(function(Me){return(K.added?"+":"-")+Me}))),K.added?O+=Z.length:$+=Z.length}else{if(A)if(Z.length<=y.context*2&&_<x.length-2){var ee;(ee=E).push.apply(ee,M(S(Z)))}else{var ae,ne=Math.min(Z.length,y.context);(ae=E).push.apply(ae,M(S(Z.slice(0,ne))));var ce={oldStart:A,oldLines:$-A+ne,newStart:z,newLines:O-z+ne,lines:E};if(_>=x.length-2&&Z.length<=y.context){var we=/\n$/.test(n),ze=/\n$/.test(r),Te=Z.length==0&&E.length>ce.oldLines;!we&&Te&&n.length>0&&E.splice(ce.oldLines,0,"\\ No newline at end of file"),(!we&&!Te||!ze)&&E.push("\\ No newline at end of file")}L.push(ce),A=0,z=0,E=[]}$+=Z.length,O+=Z.length}},te=0;te<x.length;te++)H(te);return{oldFileName:e,newFileName:t,oldHeader:w,newHeader:u,hunks:L}}function X(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var r=e.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),t.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),t.push.apply(t,r.lines)}return t.join(`
`)+`
`}function W(e,t,n,r,w,u,y){return X(V(e,t,n,r,w,u,y))}function Y(e,t,n,r,w,u){return W(e,e,t,n,r,w,u)}function ie(e,t){return e.length!==t.length?!1:de(e,t)}function de(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function be(e){var t=Fe(e.lines),n=t.oldLines,r=t.newLines;n!==void 0?e.oldLines=n:delete e.oldLines,r!==void 0?e.newLines=r:delete e.newLines}function Se(e,t,n){e=he(e,n),t=he(t,n);var r={};(e.index||t.index)&&(r.index=e.index||t.index),(e.newFileName||t.newFileName)&&(ke(e)?ke(t)?(r.oldFileName=se(r,e.oldFileName,t.oldFileName),r.newFileName=se(r,e.newFileName,t.newFileName),r.oldHeader=se(r,e.oldHeader,t.oldHeader),r.newHeader=se(r,e.newHeader,t.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=t.oldFileName||e.oldFileName,r.newFileName=t.newFileName||e.newFileName,r.oldHeader=t.oldHeader||e.oldHeader,r.newHeader=t.newHeader||e.newHeader)),r.hunks=[];for(var w=0,u=0,y=0,x=0;w<e.hunks.length||u<t.hunks.length;){var S=e.hunks[w]||{oldStart:Infinity},L=t.hunks[u]||{oldStart:Infinity};if(De(S,L))r.hunks.push(Be(S,y)),w++,x+=S.newLines-S.oldLines;else if(De(L,S))r.hunks.push(Be(L,x)),u++,y+=L.newLines-L.oldLines;else{var A={oldStart:Math.min(S.oldStart,L.oldStart),oldLines:0,newStart:Math.min(S.newStart+y,L.oldStart+x),newLines:0,lines:[]};ut(A,S.oldStart,S.lines,L.oldStart,L.lines),u++,w++,r.hunks.push(A)}}return r}function he(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return i(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return V(void 0,void 0,t,e)}return e}function ke(e){return e.newFileName&&e.newFileName!==e.oldFileName}function se(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function De(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function Be(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function ut(e,t,n,r,w){var u={offset:t,lines:n,index:0},y={offset:r,lines:w,index:0};for(Qe(e,u,y),Qe(e,y,u);u.index<u.lines.length&&y.index<y.lines.length;){var x=u.lines[u.index],S=y.lines[y.index];if((x[0]==="-"||x[0]==="+")&&(S[0]==="-"||S[0]==="+"))ft(e,u,y);else if(x[0]==="+"&&S[0]===" "){var L;(L=e.lines).push.apply(L,M(ge(u)))}else if(S[0]==="+"&&x[0]===" "){var A;(A=e.lines).push.apply(A,M(ge(y)))}else x[0]==="-"&&S[0]===" "?Ze(e,u,y):S[0]==="-"&&x[0]===" "?Ze(e,y,u,!0):x===S?(e.lines.push(x),u.index++,y.index++):He(e,ge(u),ge(y))}Xe(e,u),Xe(e,y),be(e)}function ft(e,t,n){var r=ge(t),w=ge(n);if(Ye(r)&&Ye(w)){if(de(r,w)&&et(n,r,r.length-w.length)){var u;(u=e.lines).push.apply(u,M(r));return}else if(de(w,r)&&et(t,w,w.length-r.length)){var y;(y=e.lines).push.apply(y,M(w));return}}else if(ie(r,w)){var x;(x=e.lines).push.apply(x,M(r));return}He(e,r,w)}function Ze(e,t,n,r){var w=ge(t),u=pt(n,w);if(u.merged){var y;(y=e.lines).push.apply(y,M(u.merged))}else He(e,r?u:w,r?w:u)}function He(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function Qe(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r),t.offset++}}function Xe(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function ge(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var r=e.lines[e.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])t.push(r),e.index++;else break}return t}function pt(e,t){for(var n=[],r=[],w=0,u=!1,y=!1;w<t.length&&e.index<e.lines.length;){var x=e.lines[e.index],S=t[w];if(S[0]==="+")break;if(u=u||x[0]!==" ",r.push(S),w++,x[0]==="+")for(y=!0;x[0]==="+";)n.push(x),x=e.lines[++e.index];S.substr(1)===x.substr(1)?(n.push(x),e.index++):y=!0}if((t[w]||"")[0]==="+"&&u&&(y=!0),y)return n;for(;w<t.length;)r.push(t[w++]);return{merged:r,changes:n}}function Ye(e){return e.reduce(function(t,n){return t&&n[0]==="-"},!0)}function et(e,t,n){for(var r=0;r<n;r++){var w=t[t.length-n+r].substr(1);if(e.lines[e.index+r]!==" "+w)return!1}return e.index+=n,!0}function Fe(e){var t=0,n=0;return e.forEach(function(r){if(typeof r!="string"){var w=Fe(r.mine),u=Fe(r.theirs);t!==void 0&&(w.oldLines===u.oldLines?t+=w.oldLines:t=void 0),n!==void 0&&(w.newLines===u.newLines?n+=w.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,t!==void 0&&(r[0]==="-"||r[0]===" ")&&t++}),{oldLines:t,newLines:n}}function mt(e){for(var t=[],n,r,w=0;w<e.length;w++)n=e[w],n.added?r=1:n.removed?r=-1:r=0,t.push([r,n.value]);return t}function ht(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.added?t.push("<ins>"):r.removed&&t.push("<del>"),t.push(gt(r.value)),r.added?t.push("</ins>"):r.removed&&t.push("</del>")}return t.join("")}function gt(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}o.Diff=a,o.applyPatch=d,o.applyPatches=h,o.canonicalize=s,o.convertChangesToDMP=mt,o.convertChangesToXML=ht,o.createPatch=Y,o.createTwoFilesPatch=W,o.diffArrays=l,o.diffChars=C,o.diffCss=T,o.diffJson=p,o.diffLines=oe,o.diffSentences=I,o.diffTrimmedLines=ve,o.diffWords=U,o.diffWordsWithSpace=J,o.merge=Se,o.parsePatch=i,o.structuredPatch=V,Object.defineProperty(o,"__esModule",{value:!0})});async function bt(o){const a=await crypto.subtle.digest("SHA-256",o),g=Array.from(new Uint8Array(a)),v=g.map(j=>("00"+j.toString(16)).slice(-2)).join("");return v}const St=o=>{if(o.length<10)return!1;const a=[...o.slice(0,8)].filter(v=>v<"0"||v>"f").length===0,g=o.slice(8);if(a&&g[0]==="["&&g[g.length-1]==="]")try{return JSON.parse(g).length>1}catch{return!1}return!1},kt=(o,a)=>{const g=JSON.parse(a);let v=o.slice(),j="";return g.forEach(C=>{if(Number(C)===C){const k=Math.abs(C),F=v.slice(0,k);v=v.slice(k),C>0&&(j+=String(F))}else j+=String(C)}),j};async function jt(o){const a=new TextEncoder().encode(o),g=await bt(a);return g.substr(0,8)}const Dt=async(o,a)=>{const g=jt(o),v=Diff.diffChars(o,a);return{b:await g,c:v.map(j=>j.added?j.value:j.removed?-j.count:j.count)}},Lt=(o,a)=>a.some(g=>o instanceof g);let tt,nt;function Et(){return tt||(tt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ct(){return nt||(nt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ot=new WeakMap,$e=new WeakMap,rt=new WeakMap,Ve=new WeakMap,We=new WeakMap;function It(o){if($e.has(o))return;const a=new Promise((g,v)=>{const j=()=>{o.removeEventListener("complete",C),o.removeEventListener("error",k),o.removeEventListener("abort",k)},C=()=>{g(),j()},k=()=>{v(o.error||new DOMException("AbortError","AbortError")),j()};o.addEventListener("complete",C),o.addEventListener("error",k),o.addEventListener("abort",k)});$e.set(o,a)}const Je=o=>We.get(o),Bt=["get","getKey","getAll","getAllKeys","count"],Tt=["put","add","delete","clear"],qe=new Map;function it(o,a){if(!(o instanceof IDBDatabase&&!(a in o)&&typeof a=="string"))return;if(qe.get(a))return qe.get(a);const g=a.replace(/FromIndex$/,""),v=a!==g,j=Tt.includes(g);if(!(g in(v?IDBIndex:IDBObjectStore).prototype)||!(j||Bt.includes(g)))return;const C=async function(k,...F){const D=this.transaction(k,j?"readwrite":"readonly");let P=D.store;v&&(P=P.index(F.shift()));const U=await P[g](...F);return j&&await D.done,U};return qe.set(a,C),C}async function Mt(o){const a=await crypto.subtle.digest("SHA-256",o),g=Array.from(new Uint8Array(a)),v=g.map(j=>("00"+j.toString(16)).slice(-2)).join("");return v}const Ie=window.document;var At=window.ReactDOM;const _e=()=>Ie.location.href.includes("zed.dev")?"https://code.zed.dev":"https://code.zed.vision";let st=!0,fe="",pe=0,Pt=0,at="",ct="",Ne="",lt;const Nt=async({onChange:o,code:a,language:g})=>{if(typeof window=="undefined")return"";const v=window.document,j=window.document.getElementById("container");if(!j){const P=v.getElementById("container");P.id="container",v.body.appendChild(P)}const C=g==="typescript"?"file:///main.tsx":"file:///main.html";let k;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)){const P=window.document.createElement("div");P.id="ace",window.document.body.appendChild(P),await Ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.min.js"),g==="typescript"?await Ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-typescript.min.js"):await Ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-html.min.js"),await Ce("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/theme-monokai.min.js"),window.document.getElementById("ace").style.setProperty("display","block"),j.style.setProperty("display","none"),k=window.ace.edit("ace"),k.getSession().setMode("ace/mode/typescript");const U=J=>setTimeout(()=>{const G=window.ace.edit("ace"),oe=G.getTheme();oe!=="ace/theme/monokai "&&(G.setOptions({fontSize:"14pt"}),G.setTheme("ace/theme/monokai"),U(2*J))},J);U(100),k.setValue(a),k.blur()}if(window.monaco===void 0){const P="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.21.2/min/vs",{require:U}=await Ce(`${P}/loader.min.js`);U.config({paths:{vs:P}}),await new Promise(J=>U(["vs/editor/editor.main"],G=>{J(G)}))}const F=window.monaco,D={monaco:F,editor:F.editor.create(window.document.getElementById("container"),{formatOnType:!0,scrollbar:{horizontal:"hidden",verticalHasArrows:!0,verticalScrollbarSize:20},minimap:{enabled:!1},folding:!1,multiCursorModifier:"alt",wordWrap:"on",wordWrapBreakAfterCharacters:">([{]))],;} ",mouseWheelZoom:!1,wordWrapColumn:80,automaticLayout:!0,scrollBeyondLastLine:!1,autoIndent:"brackets",autoClosingQuotes:"always",padding:{bottom:300},lineNumbers:"on",autoClosingBrackets:"always",autoClosingOvertype:"always",suggest:{},codeLens:!0,autoSurround:"languageDefined",trimAutoWhitespace:!0,codeActionsOnSaveTimeout:100,model:F.editor.getModel(C)||F.editor.createModel(a,g,F.Uri.parse(C)),value:a,language:g,theme:"vs-dark"})};if(D.editor.onDidChangeModelContent(()=>o(D.editor.getValue())),k&&k.session.on("change",function(){const P=k.getValue();D.editor.setValue(P),o(P)}),k&&v.getElementById("container").replaceWith(v.getElementById("ace")),D.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!0,noSemanticValidation:!0,noSyntaxValidation:!0}),g==="typescript"){const P=[{name:"react",url:"https://unpkg.com/@types/react@17.0.0/index.d.ts",depend:["global","csstype","react-dom","prop-types"]},{name:"global",url:"https://unpkg.com/@types/react@17.0.0/global.d.ts",depend:[]},{name:"prop-types",url:"https://unpkg.com/@types/prop-types@15.7.3/index.d.ts",depend:[]},{name:"react-dom",url:"https://unpkg.com/@types/react-dom@17.0.0/index.d.ts",depend:[]},{name:"csstype",url:"https://unpkg.com/csstype@3.0.5/index.d.ts",depend:[]},{name:"@emotion/styled/base.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/base.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/styled/index.d.ts",url:"https://unpkg.com/@emotion/styled@11.0.0/types/index.d.ts",depend:["@emotion/react","@emotion/serialize","react"]},{name:"@emotion/cache/index.d.ts",url:"https://unpkg.com/@emotion/cache@11.0.0/types/index.d.ts",depend:["@emotion/utils"]},{name:"@emotion/react/index.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/index.d.ts",depend:["@emotion/cache"]},{name:"@emotion/react/jsx-namespace.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/jsx-namespace.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/css-prop.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/css-prop.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/helper.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/helper.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/react/theming.d.ts",url:"https://unpkg.com/@emotion/react@11.1.2/types/theming.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/serialize/index.d.ts",url:"https://unpkg.com/@emotion/serialize@1.0.0/types/index.d.ts",depend:["@emotion/utils","csstype"]},{name:"@emotion/utils/index.d.ts",url:"https://unpkg.com/@emotion/utils@1.0.0/types/index.d.ts",depend:[]},{name:"framer-motion",url:"https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.d.ts",depend:[]},{name:"popmotion",url:"https://unpkg.com/browse/popmotion@9.0.1/lib/index.d.ts"}],U=P.map(({name:J,url:G})=>(async()=>D.monaco.languages.typescript.typescriptDefaults.addExtraLib(await(await fetch(G)).text(),J.includes("@emotion")?`file:///node_modules/${J}`:`file:///node_modules/@types/${J}/index.d.ts`))());return D.monaco.languages.typescript.typescriptDefaults.setCompilerOptions({target:D.monaco.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,allowUmdGlobalAccess:!0,strict:!0,allowJs:!0,noEmitOnError:!0,allowSyntheticDefaultImports:!0,moduleResolution:D.monaco.languages.typescript.ModuleResolutionKind.Nodejs,module:D.monaco.languages.typescript.ModuleKind.CommonJS,noEmit:!0,typeRoots:["node_modules/@types"],jsx:"react-jsx",esModuleInterop:!0}),await Promise.all(U),D.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSuggestionDiagnostics:!1,noSemanticValidation:!1,noSyntaxValidation:!1}),D}};async function Ge(o){const a=new TextEncoder().encode(o),g=await Mt(a);return g.substr(0,8)}function Ot(o){const a=new Promise((g,v)=>{const j=()=>{o.removeEventListener("success",C),o.removeEventListener("error",k)},C=()=>{g(me(o.result)),j()},k=()=>{v(o.error),j()};o.addEventListener("success",C),o.addEventListener("error",k)});return a.then(g=>{g instanceof IDBCursor&&ot.set(g,o)}).catch(()=>{}),We.set(a,o),a}let Ke={get(o,a,g){if(o instanceof IDBTransaction){if(a==="done")return $e.get(o);if(a==="objectStoreNames")return o.objectStoreNames||rt.get(o);if(a==="store")return g.objectStoreNames[1]?void 0:g.objectStore(g.objectStoreNames[0])}return me(o[a])},set(o,a,g){return o[a]=g,!0},has(o,a){return o instanceof IDBTransaction&&(a==="done"||a==="store")?!0:a in o}};function Ht(o){Ke=o(Ke)}function Ft(o){return o===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(a,...g){const v=o.call(Je(this),a,...g);return rt.set(v,a.sort?a.sort():[a]),me(v)}:Ct().includes(o)?function(...a){return o.apply(Je(this),a),me(ot.get(this))}:function(...a){return me(o.apply(Je(this),a))}}function zt(o){return typeof o=="function"?Ft(o):(o instanceof IDBTransaction&&It(o),Lt(o,Et())?new Proxy(o,Ke):o)}function me(o){if(o instanceof IDBRequest)return Ot(o);if(Ve.has(o))return Ve.get(o);const a=zt(o);return a!==o&&(Ve.set(o,a),We.set(a,o)),a}function Rt(o,a,{blocked:g,upgrade:v,blocking:j,terminated:C}={}){const k=indexedDB.open(o,a),F=me(k);return v&&k.addEventListener("upgradeneeded",D=>{v(me(k.result),D.oldVersion,D.newVersion,me(k.transaction))}),g&&k.addEventListener("blocked",()=>g()),F.then(D=>{C&&D.addEventListener("close",()=>C()),j&&D.addEventListener("versionchange",()=>j())}).catch(()=>{}),F}Ht(o=>({...o,get:(a,g,v)=>it(a,g)||o.get(a,g,v),has:(a,g)=>!!it(a,g)||o.has(a,g)}));const Oe=()=>{const o=Rt("localZedCodeStore",1,{upgrade(g){g.createObjectStore("codeStore")}}),a={async get(g,v="string"){let j;try{if(j=await(await o).get("codeStore",g),!j)return null}catch(C){return null}if(v==="json")return JSON.parse(j);if(v==="string"){const C=await j;if(typeof C=="string"&&v==="string"){const D=C;if(St(C)){const P=C.slice(0,8),U=C.slice(8),J=await a.get(P);return kt(J,U)}return C}const k=new TextDecoder,F=k.decode(C);return F}return j},async put(g,v){let j;try{const k=await a.get(g);if(k.length===8&&k!==v){const F=await a.get(v),D=await a.get(k),P=await Ge(D);if(P===k){const U=await Dt(F,D),J=U.b+JSON.stringify(U.c);(await o).put("codeStore",J,P)}}}catch{j=""}if(j!==""&&v===j)return v;let C;return typeof v!="string"?C=new TextDecoder().decode(v):C=v,(await o).put("codeStore",C,g)},async delete(g){return(await o).delete("codeStore",g)},async clear(){return(await o).clear("codeStore")},async keys(){return(await o).getAllKeys("codeStore")}};return a};export const getProjects=async()=>{const o=await dt(),a=await Oe(),g=await a.get(o,"json");if(!g||!g.list){const v=v4();return await a.put(o,JSON.stringify({list:[v],[v]:{created:Date.now(),lastOpen:Date.now()}})),[v]}return g.list};async function dt(){const o=await Oe(),a=await o.get("uuid");if(!a)if(window.location.href.includes("zed.dev"))o.put("uuid","1234");else{const g=await fetch("https://code.zed.vision/register"),v=await g.json();return o.put("uuid",v.uuid),v.uuid}return a}export async function run(o="window"){await xt("https://unpkg.com/@babel/standalone@7.12.9/babel.min.js"),o==="editor"&&vt(),o=="window"&&yt(async()=>{const I=await lt();window.open(I)});const a=await Oe(),g=await dt(),v=await getProjects(),j=v[0],C=await J();U(le(C)),Ne=C;const k=await Nt({language:"typescript",code:C,onChange:D});async function F(I){if(pe===1)return;try{pe=1;const N=await P(),T=Ie.getElementById("error");if(pe=0,I!==fe)return;if(N&&N.length){const{diff:B}=await import("../../diff/diff.min.js");if(fe!=I)return;if(at===I)return;const M=await B(Ne,I);if(M.c.length<=3){k.monaco.editor.setTheme("hc-black");return}T.innerHTML=N[0].messageText.toString(),T.style.display="block",at=I;return}Ne=I,T.style.display="none",k.monaco.editor.setTheme("vs-dark"),Pt=0,pe=0,U(le(I))}catch(N){if(pe=0,I!==fe)return;k.monaco.editor.setTheme("vs-light"),setTimeout(()=>{k.monaco.editor.setTheme("hc-black")},50),console.error(N)}}function D(I){if(!k)return;if(fe=I,!pe)F(fe);else{const N=I,T=setInterval(()=>{(I!==fe||!pe)&&clearInterval(T),pe||F(fe)},100)}}async function P(){if(!k||!k.monaco)return;const I=k.monaco.Uri.parse("file:///main.tsx"),N=await k.monaco.languages.typescript.getTypeScriptWorker(),T=await(await N(I)).getSemanticDiagnostics("file:///main.tsx"),B=await(await N(I)).getCompilerOptionsDiagnostics("file:///main.tsx"),M=await(await N(I)).getSyntacticDiagnostics("file:///main.tsx");return[...T,...B,...M]}function U(I){const N=/import/gi,T="///",B=`
    Object.assign(window, React);
    if (window.Motion) {
        Object.assign(window, window.Motion);
    }
    if (window.emotionStyled){
      window.styled= window.emotionStyled;
    }
    ;
    `+I.replaceAll(N,T).replace("export default","DefaultElement = "),M=()=>{const R=o==="window"?B.replace("body{","#root{"):B,Q=new Function(`return function(){  
          let DefaultElement;
          ${R}
          return ReactDOM.render(jsx(DefaultElement), document.getElementById("root"));
      }`)();Q(),lt=async()=>{const xe=new Function(`return function(){
            let DefaultElement;
            ${B}
            return ReactDOMServer.renderToString(jsx(DefaultElement));
        }`)(),q=xe(),re=Array.from(Ie.querySelector("head > style[data-emotion=css]").sheet.cssRules).map(c=>c.cssText).filter(c=>q.includes(c.substring(3,8))).join(`
  `);let f;if(B.includes("body{")){const c=B.indexOf("body{"),d=B.slice(c),h=d.indexOf("}");f=d.slice(0,h+1)}let m="",p="";B.includes("Motion")&&(m='<script crossorigin src="https://unpkg.com/framer-motion@2.9.5/dist/framer-motion.js"></script>',p="const {motion} = Motion");let s="(code).zed.vision :)";q.indexOf("<title>")>-1&&q.indexOf("</title>")>-1&&(s=q.slice(q.indexOf("<title>")+7,q.indexOf("</title>")));const b=`<!DOCTYPE html>
        <html lang="en">
        <head>
        <title>${s}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="Description" content="Generated with code.zed.vision">
        <head profile="http://www.w3.org/2005/10/profile">
        <link rel="icon" 
              type="image/png"
              href="https://zed.vision/favicon.ico">
        <style>
        ${f}
        ${re}
        </style>
        </head>
        <body>
        <div id="root">
        ${q}
        <script crossorigin src="https://unpkg.com/react@17.0.1/umd/react.production.min.js"></script>
        ${m}
        <script crossorigin src="https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/react@11.1.2/dist/emotion-react.umd.min.js"></script>
        <script crossorigin src="https://unpkg.com/@emotion/styled@11.0.0/dist/emotion-styled.umd.min.js"></script>
        <script type="module">
        Object.assign(window, emotionReact);

       const styled = window["emotionStyled"];

        let DefaultElement;

        ${B}

        ReactDOM.hydrate(jsx(DefaultElement), document.body.children[0]);
        </script>
        </div>
        
        </body>
        </html>
        `,l=await oe(b),i=await ve(l);return i}};if(!st){const R=async Q=>{if(Q!==Ne)return;if(ct===Q)return;ct=Q;const xe=new Request(_e(),{body:Q,method:"POST",headers:{"content-type":"text/plain;charset=UTF-8"}}),q=await Ge(Q);try{const re=await a.get(j);re!==q&&(await a.put(q,Q),await a.put(j,q))}catch(re){console.error(re)}};R(fe)}st=!1,M()}async function J(){const I=await Oe(),N=new URLSearchParams(window.location.search),T=N.get("h")||await I.get(j);if(T){let B;try{B=await I.get(T)}catch{console.error("error load key: "+T)}if(B)return B;let M;try{const R=await fetch(_e()+"/?h="+T);M=await R.json()}catch(R){const Q=await Ge(Pe);return I.put(Q,Pe),await I.put(j,Q),Pe}return M}return Pe}function G(I,N){const T=new URLSearchParams(window.location.search);T.set(I,N),window.history.replaceState({},"",decodeURIComponent(`${window.location.pathname}?${T}`))}function oe(I){const N=new Blob([I],{type:"text/html"});return N}async function ve(I){const N=_e(),T=new Request(N,{body:I,method:"POST",headers:{"content-type":"text/html;charset=UTF-8",SHARE:"true"}}),B=await fetch(T),{hash:M}=await B.json();return`${N}/${M}`}function le(I){const{transform:N}=window.Babel;return N(`/** @jsx jsx */

  Object.assign(window, React);
  `+I,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code}}
