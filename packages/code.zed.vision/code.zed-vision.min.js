"use strict";let Q,K;(()=>{const P=new Map;Q={register(c,g,u){P.set(c,{d:g,f:u,exp:{}})}};async function N(c,g){let u=c.replace(/\.\w+$/i,"");if(u.includes("./")){const[I,...F]=u.split("/").reverse(),[,...A]=g.split("/").reverse(),D=[I];let O=0,U;for(;U=F.shift();)if(U==="..")O++;else{if(U===".")break;D.push(U)}O<A.length&&D.push(...A.slice(O)),u=D.reverse().join("/")}return P.has(u)?z(u):import(c)}function T(c,g){return{id:c,import:u=>N(u,c),meta:{url:c,main:g}}}function w(c){return(g,u)=>{const I=typeof g=="string"?{[g]:u}:g;for(const[F,A]of Object.entries(I))Object.defineProperty(c,F,{value:A,writable:!0,enumerable:!0});return u}}function M(c){for(const[g,u]of P.entries()){const{f:I,exp:F}=u,{execute:A,setters:D}=I(w(F),T(g,g===c));delete u.f,u.e=A,u.s=D}}async function z(c){if(!P.has(c))return;const g=P.get(c);if(g.s){const{d:u,e:I,s:F}=g;delete g.s,delete g.e;for(let D=0;D<F.length;D++)F[D](await z(u[D]));const A=I();A&&await A}return g.exp}function R(c){if(!P.has(c))return;const g=P.get(c);if(g.s){const{d:u,e:I,s:F}=g;delete g.s,delete g.e;for(let A=0;A<F.length;A++)F[A](R(u[A]));I()}return g.exp}K=(c,g)=>(Q=K=void 0,M(c),g?z(c):R(c))})(),Q.register("diff",[],function(P,N){"use strict";var T,w,M,z=N&&N.id;function R(e,r,n,s){if(e===r)return e?[[M,e]]:[];if(n!=null){var a=J(e,r,n);if(a)return a}var t=I(e,r),i=e.substring(0,t);e=e.substring(t),r=r.substring(t),t=F(e,r);var l=e.substring(e.length-t);e=e.substring(0,e.length-t),r=r.substring(0,r.length-t);var o=c(e,r);return i&&o.unshift([M,i]),l&&o.push([M,l]),D(o,s),o}function c(e,r){var n;if(!e)return[[w,r]];if(!r)return[[T,e]];var s=e.length>r.length?e:r,a=e.length>r.length?r:e,t=s.indexOf(a);if(t!==-1)return n=[[w,s.substring(0,t)],[M,a],[w,s.substring(t+a.length)]],e.length>r.length&&(n[0][0]=n[2][0]=T),n;if(a.length===1)return[[T,e],[w,r]];var i=A(e,r);if(i){var l=i[0],o=i[1],v=i[2],m=i[3],h=i[4],B=R(l,v),S=R(o,m);return B.concat([[M,h]],S)}return g(e,r)}function g(e,r){for(var n=e.length,s=r.length,a=Math.ceil((n+s)/2),t=a,i=2*a,l=new Array(i),o=new Array(i),v=0;v<i;v++)l[v]=-1,o[v]=-1;l[t+1]=0,o[t+1]=0;for(var m=n-s,h=m%2!==0,B=0,S=0,f=0,j=0,k=0;k<a;k++){for(var b=-k+B;b<=k-S;b+=2){var p=t+b,d;b===-k||b!==k&&l[p-1]<l[p+1]?d=l[p+1]:d=l[p-1]+1;for(var _=d-b;d<n&&_<s&&e.charAt(d)===r.charAt(_);)d++,_++;if(l[p]=d,d>n)S+=2;else if(_>s)B+=2;else if(h){var y=t+m-b;if(y>=0&&y<i&&o[y]!==-1){var E=n-o[y];if(d>=E)return u(e,r,d,_)}}}for(var H=-k+f;H<=k-j;H+=2){var y=t+H,E;H===-k||H!==k&&o[y-1]<o[y+1]?E=o[y+1]:E=o[y-1]+1;for(var X=E-H;E<n&&X<s&&e.charAt(n-E-1)===r.charAt(s-X-1);)E++,X++;if(o[y]=E,E>n)j+=2;else if(X>s)f+=2;else if(!h){var p=t+m-H;if(p>=0&&p<i&&l[p]!==-1){var d=l[p],_=t+d-p;if(E=n-E,d>=E)return u(e,r,d,_)}}}}return[[T,e],[w,r]]}function u(e,r,n,s){var a=e.substring(0,n),t=r.substring(0,s),i=e.substring(n),l=r.substring(s),o=R(a,t),v=R(i,l);return o.concat(v)}function I(e,r){if(!e||!r||e.charAt(0)!==r.charAt(0))return 0;for(var n=0,s=Math.min(e.length,r.length),a=s,t=0;n<a;)e.substring(t,a)==r.substring(t,a)?(n=a,t=n):s=a,a=Math.floor((s-n)/2+n);return O(e.charCodeAt(a-1))&&a--,a}function F(e,r){if(!e||!r||e.slice(-1)!==r.slice(-1))return 0;for(var n=0,s=Math.min(e.length,r.length),a=s,t=0;n<a;)e.substring(e.length-a,e.length-t)==r.substring(r.length-a,r.length-t)?(n=a,t=n):s=a,a=Math.floor((s-n)/2+n);return U(e.charCodeAt(e.length-a))&&a--,a}function A(e,r){var n=e.length>r.length?e:r,s=e.length>r.length?r:e;if(n.length<4||s.length*2<n.length)return null;function a(S,f,j){for(var k=S.substring(j,j+Math.floor(S.length/4)),b=-1,p="",d,_,y,E;(b=f.indexOf(k,b+1))!==-1;){var H=I(S.substring(j),f.substring(b)),X=F(S.substring(0,j),f.substring(0,b));p.length<X+H&&(p=f.substring(b-X,b)+f.substring(b,b+H),d=S.substring(0,j-X),_=S.substring(j+H),y=f.substring(0,b-X),E=f.substring(b+H))}return p.length*2>=S.length?[d,_,y,E,p]:null}var t=a(n,s,Math.ceil(n.length/4)),i=a(n,s,Math.ceil(n.length/2)),l;if(!t&&!i)return null;i?t?l=t[4].length>i[4].length?t:i:l=i:l=t;var o,v,m,h;e.length>r.length?(o=l[0],v=l[1],m=l[2],h=l[3]):(m=l[0],h=l[1],o=l[2],v=l[3]);var B=l[4];return[o,v,m,h,B]}function D(e,r){e.push([M,""]);for(var n=0,s=0,a=0,t="",i="",l;n<e.length;){if(n<e.length-1&&!e[n][1]){e.splice(n,1);continue}switch(e[n][0]){case w:a++,i+=e[n][1],n++;break;case T:s++,t+=e[n][1],n++;break;case M:var o=n-a-s-1;if(r){if(o>=0&&G(e[o][1])){var v=e[o][1].slice(-1);if(e[o][1]=e[o][1].slice(0,-1),t=v+t,i=v+i,!e[o][1]){e.splice(o,1),n--;var m=o-1;e[m]&&e[m][0]===w&&(a++,i=e[m][1]+i,m--),e[m]&&e[m][0]===T&&(s++,t=e[m][1]+t,m--),o=m}}if(C(e[n][1])){var v=e[n][1].charAt(0);e[n][1]=e[n][1].slice(1),t+=v,i+=v}}if(n<e.length-1&&!e[n][1]){e.splice(n,1);break}if(t.length>0||i.length>0){t.length>0&&i.length>0&&(l=I(i,t),l!==0&&(o>=0?e[o][1]+=i.substring(0,l):(e.splice(0,0,[M,i.substring(0,l)]),n++),i=i.substring(l),t=t.substring(l)),l=F(i,t),l!==0&&(e[n][1]=i.substring(i.length-l)+e[n][1],i=i.substring(0,i.length-l),t=t.substring(0,t.length-l)));var h=a+s;t.length===0&&i.length===0?(e.splice(n-h,h),n=n-h):t.length===0?(e.splice(n-h,h,[w,i]),n=n-h+1):i.length===0?(e.splice(n-h,h,[T,t]),n=n-h+1):(e.splice(n-h,h,[T,t],[w,i]),n=n-h+2)}n!==0&&e[n-1][0]===M?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,a=0,s=0,t="",i="";break}}e[e.length-1][1]===""&&e.pop();var B=!1;for(n=1;n<e.length-1;)e[n-1][0]===M&&e[n+1][0]===M&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),B=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),B=!0)),n++;B&&D(e,r)}P("diff_cleanupMerge",D);function O(e){return e>=55296&&e<=56319}function U(e){return e>=56320&&e<=57343}function C(e){return U(e.charCodeAt(0))}function G(e){return O(e.charCodeAt(e.length-1))}function $(e){for(var r=[],n=0;n<e.length;n++)e[n][1].length>0&&r.push(e[n]);return r}function L(e,r,n,s){return G(e)||C(s)?null:$([[M,e],[T,r],[w,n],[M,s]])}function J(e,r,n){var s=typeof n=="number"?{index:n,length:0}:n.oldRange,a=typeof n=="number"?null:n.newRange,t=e.length,i=r.length;if(s.length===0&&(a===null||a.length===0)){var l=s.index,o=e.slice(0,l),v=e.slice(l),m=a?a.index:null;e:{var h=l+i-t;if(m!==null&&m!==h)break e;if(h<0||h>i)break e;var B=r.slice(0,h),S=r.slice(h);if(S!==v)break e;var f=Math.min(l,h),j=o.slice(0,f),k=B.slice(0,f);if(j!==k)break e;var b=o.slice(f),p=B.slice(f);return L(j,b,p,v)}e:{if(m!==null&&m!==l)break e;var d=l,B=r.slice(0,d),S=r.slice(d);if(B!==o)break e;var _=Math.min(t-d,i-d),y=v.slice(v.length-_),E=S.slice(S.length-_);if(y!==E)break e;var b=v.slice(0,v.length-_),p=S.slice(0,S.length-_);return L(o,b,p,y)}}if(s.length>0&&a&&a.length===0){e:{var j=e.slice(0,s.index),y=e.slice(s.index+s.length),f=j.length,_=y.length;if(i<f+_)break e;var k=r.slice(0,f),E=r.slice(i-_);if(j!==k||y!==E)break e;var b=e.slice(f,t-_),p=r.slice(f,i-_);return L(j,b,p,y)}}return null}function W(e,r,n){return R(e,r,n,!0)}return P("diff",W),{setters:[],execute:function(){T=-1,w=1,M=0,W.INSERT=w,W.DELETE=T,W.EQUAL=M}}}),Q.register("codeBox",["diff"],function(P,N){"use strict";var T,w,M,z=N&&N.id;return{setters:[function(R){T=R}],execute:function(){w=async R=>new Promise(function(c,g){const u=document.createElement("script");u.src=R,u.onload=c,u.onerror=g,document.head.appendChild(u)}),P("run",M=async R=>{const c=window.localStorage;await w("https://unpkg.com/@babel/standalone@7.12.4/babel.min.js"),await w("https://unpkg.com/react@17.0.1/umd/react.production.min.js"),await w("https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js"),await w("https://unpkg.com/interactjs@1.10.0/dist/interact.min.js");const g=/import/gi,u="///";setTimeout(()=>L(),100);let I="";const F=e=>window.Babel.transform(e,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code.replace(g,u),A=async e=>{const r=new Function("transpileCode",`return function(){ ${e} }`)(),n={codeTranspiled:e,code:I},s=JSON.stringify(n),a=new Request("https://my-ts-project.zed-vision.workers.dev",{body:s,method:"POST",headers:{"content-type":"application/json;charset=UTF-8"}}),t=await fetch(a),{hash:i}=await t.json();try{const l=c.getItem("codeBoXHash")||"zedCodeSTART";c.setItem("codeBoXHash",i),c.setItem(i,I)}catch(l){console.log("no Localstorage")}r()};let D=0,O="",U="",C=0,G="";(async()=>{const e=W();I=e,G=e;const r=await R({language:"typescript",code:e,onChange:n=>{O=n,console.log(n);const s=async a=>{if(C===1)return;C=1;const t=await $(r),i=document.getElementById("error");try{if(C=0,a!==O)return;if(t&&t.length){if(O!=a)return;if(U===a)return;document.getElementById("root").classList.add("almosthidden");const l=T.diff(I,a);if(console.log(l),l.length<=3){G=a,window.monaco.editor.setTheme("hc-black");return}i.innerHTML=errors[0].messageText,document.getElementById("root").style.setProperty("dispay","none"),i.style.display="block",U=a,window.monaco.editor.setTheme("vs-light"),setTimeout(()=>{window.monaco.editor.setTheme("hc-black")},D++);return}I=a,i.style.display="none",window.monaco.editor.setTheme("vs-dark"),document.getElementById("root").classList.remove("almosthidden"),D=0,C=0,A(F(a))}catch(l){if(C=0,a!==O)return;window.monaco.editor.setTheme("vs-light"),setTimeout(()=>{window.monaco.editor.setTheme("hc-black")},10),console.error(l)}};if(!C)s(O);else{const a=n,t=setInterval(()=>{(a!==O||!C)&&clearInterval(t),C||s(O)},100)}}})})(),A(F(W())),document.getElementById("root").setAttribute("style","display:block");async function $(e){const r=e.getModel("file:///main.tsx"),n=await window.monaco.languages.typescript.getTypeScriptWorker(),s=r?.uri;if(!s)return;const a=await(await n(s)).getSemanticDiagnostics("file:///main.tsx"),t=await(await n(s)).getCompilerOptionsDiagnostics("file:///main.tsx"),i=await(await n(s)).getSyntacticDiagnostics("file:///main.tsx");return[...a,...t,...i]}const L=()=>{window.interact(".draggable").draggable({inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})],autoScroll:!1,listeners:{move:J}})};function J(e){var r=e.target,n=(parseFloat(r.getAttribute("data-x"))||0)+e.dx,s=(parseFloat(r.getAttribute("data-y"))||0)+e.dy;r.style.webkitTransform=r.style.transform="translate("+n+"px, "+s+"px)",r.setAttribute("data-x",n),r.setAttribute("data-y",s)}function W(){const e=c.getItem("codeBoXHash");return c.getItem(e)}})}}});const V=K("codeBox",!1);export const run=V.run;
