"use strict";let G,K;(()=>{const H=new Map;G={register(h,g,c){H.set(h,{d:g,f:c,exp:{}})}};async function W(h,g){let c=h.replace(/\.\w+$/i,"");if(c.includes("./")){const[j,...D]=c.split("/").reverse(),[,...A]=g.split("/").reverse(),p=[j];let X=0,k;for(;k=D.shift();)if(k==="..")X++;else{if(k===".")break;p.push(k)}X<A.length&&p.push(...A.slice(X)),c=p.reverse().join("/")}return H.has(c)?C(c):import(h)}function T(h,g){return{id:h,import:c=>W(c,h),meta:{url:h,main:g}}}function _(h){return(g,c)=>{const j=typeof g=="string"?{[g]:c}:g;for(const[D,A]of Object.entries(j))Object.defineProperty(h,D,{value:A,writable:!0,enumerable:!0});return c}}function S(h){for(const[g,c]of H.entries()){const{f:j,exp:D}=c,{execute:A,setters:p}=j(_(D),T(g,g===h));delete c.f,c.e=A,c.s=p}}async function C(h){if(!H.has(h))return;const g=H.get(h);if(g.s){const{d:c,e:j,s:D}=g;delete g.s,delete g.e;for(let p=0;p<D.length;p++)D[p](await C(c[p]));const A=j();A&&await A}return g.exp}function P(h){if(!H.has(h))return;const g=H.get(h);if(g.s){const{d:c,e:j,s:D}=g;delete g.s,delete g.e;for(let A=0;A<D.length;A++)D[A](P(c[A]));j()}return g.exp}K=(h,g)=>(G=K=void 0,S(h),g?C(h):P(h))})(),G.register("diff",[],function(H,W){"use strict";var T,_,S,C=W&&W.id;function P(e,r,n,i){if(e===r)return e?[[S,e]]:[];if(n!=null){var l=z(e,r,n);if(l)return l}var t=j(e,r),a=e.substring(0,t);e=e.substring(t),r=r.substring(t),t=D(e,r);var s=e.substring(e.length-t);e=e.substring(0,e.length-t),r=r.substring(0,r.length-t);var o=h(e,r);return a&&o.unshift([S,a]),s&&o.push([S,s]),p(o,i),o}function h(e,r){var n;if(!e)return[[_,r]];if(!r)return[[T,e]];var i=e.length>r.length?e:r,l=e.length>r.length?r:e,t=i.indexOf(l);if(t!==-1)return n=[[_,i.substring(0,t)],[S,l],[_,i.substring(t+l.length)]],e.length>r.length&&(n[0][0]=n[2][0]=T),n;if(l.length===1)return[[T,e],[_,r]];var a=A(e,r);if(a){var s=a[0],o=a[1],v=a[2],m=a[3],u=a[4],O=P(s,v),F=P(o,m);return O.concat([[S,u]],F)}return g(e,r)}function g(e,r){for(var n=e.length,i=r.length,l=Math.ceil((n+i)/2),t=l,a=2*l,s=new Array(a),o=new Array(a),v=0;v<a;v++)s[v]=-1,o[v]=-1;s[t+1]=0,o[t+1]=0;for(var m=n-i,u=m%2!==0,O=0,F=0,y=0,R=0,B=0;B<l;B++){for(var b=-B+O;b<=B-F;b+=2){var d=t+b,w;b===-B||b!==B&&s[d-1]<s[d+1]?w=s[d+1]:w=s[d-1]+1;for(var E=w-b;w<n&&E<i&&e.charAt(w)===r.charAt(E);)w++,E++;if(s[d]=w,w>n)F+=2;else if(E>i)O+=2;else if(u){var M=t+m-b;if(M>=0&&M<a&&o[M]!==-1){var I=n-o[M];if(w>=I)return c(e,r,w,E)}}}for(var U=-B+y;U<=B-R;U+=2){var M=t+U,I;U===-B||U!==B&&o[M-1]<o[M+1]?I=o[M+1]:I=o[M-1]+1;for(var N=I-U;I<n&&N<i&&e.charAt(n-I-1)===r.charAt(i-N-1);)I++,N++;if(o[M]=I,I>n)R+=2;else if(N>i)y+=2;else if(!u){var d=t+m-U;if(d>=0&&d<a&&s[d]!==-1){var w=s[d],E=t+w-d;if(I=n-I,w>=I)return c(e,r,w,E)}}}}return[[T,e],[_,r]]}function c(e,r,n,i){var l=e.substring(0,n),t=r.substring(0,i),a=e.substring(n),s=r.substring(i),o=P(l,t),v=P(a,s);return o.concat(v)}function j(e,r){if(!e||!r||e.charAt(0)!==r.charAt(0))return 0;for(var n=0,i=Math.min(e.length,r.length),l=i,t=0;n<l;)e.substring(t,l)==r.substring(t,l)?(n=l,t=n):i=l,l=Math.floor((i-n)/2+n);return X(e.charCodeAt(l-1))&&l--,l}function D(e,r){if(!e||!r||e.slice(-1)!==r.slice(-1))return 0;for(var n=0,i=Math.min(e.length,r.length),l=i,t=0;n<l;)e.substring(e.length-l,e.length-t)==r.substring(r.length-l,r.length-t)?(n=l,t=n):i=l,l=Math.floor((i-n)/2+n);return k(e.charCodeAt(e.length-l))&&l--,l}function A(e,r){var n=e.length>r.length?e:r,i=e.length>r.length?r:e;if(n.length<4||i.length*2<n.length)return null;function l(F,y,R){for(var B=F.substring(R,R+Math.floor(F.length/4)),b=-1,d="",w,E,M,I;(b=y.indexOf(B,b+1))!==-1;){var U=j(F.substring(R),y.substring(b)),N=D(F.substring(0,R),y.substring(0,b));d.length<N+U&&(d=y.substring(b-N,b)+y.substring(b,b+U),w=F.substring(0,R-N),E=F.substring(R+U),M=y.substring(0,b-N),I=y.substring(b+U))}return d.length*2>=F.length?[w,E,M,I,d]:null}var t=l(n,i,Math.ceil(n.length/4)),a=l(n,i,Math.ceil(n.length/2)),s;if(!t&&!a)return null;a?t?s=t[4].length>a[4].length?t:a:s=a:s=t;var o,v,m,u;e.length>r.length?(o=s[0],v=s[1],m=s[2],u=s[3]):(m=s[0],u=s[1],o=s[2],v=s[3]);var O=s[4];return[o,v,m,u,O]}function p(e,r){e.push([S,""]);for(var n=0,i=0,l=0,t="",a="",s;n<e.length;){if(n<e.length-1&&!e[n][1]){e.splice(n,1);continue}switch(e[n][0]){case _:l++,a+=e[n][1],n++;break;case T:i++,t+=e[n][1],n++;break;case S:var o=n-l-i-1;if(r){if(o>=0&&$(e[o][1])){var v=e[o][1].slice(-1);if(e[o][1]=e[o][1].slice(0,-1),t=v+t,a=v+a,!e[o][1]){e.splice(o,1),n--;var m=o-1;e[m]&&e[m][0]===_&&(l++,a=e[m][1]+a,m--),e[m]&&e[m][0]===T&&(i++,t=e[m][1]+t,m--),o=m}}if(L(e[n][1])){var v=e[n][1].charAt(0);e[n][1]=e[n][1].slice(1),t+=v,a+=v}}if(n<e.length-1&&!e[n][1]){e.splice(n,1);break}if(t.length>0||a.length>0){t.length>0&&a.length>0&&(s=j(a,t),s!==0&&(o>=0?e[o][1]+=a.substring(0,s):(e.splice(0,0,[S,a.substring(0,s)]),n++),a=a.substring(s),t=t.substring(s)),s=D(a,t),s!==0&&(e[n][1]=a.substring(a.length-s)+e[n][1],a=a.substring(0,a.length-s),t=t.substring(0,t.length-s)));var u=l+i;t.length===0&&a.length===0?(e.splice(n-u,u),n=n-u):t.length===0?(e.splice(n-u,u,[_,a]),n=n-u+1):a.length===0?(e.splice(n-u,u,[T,t]),n=n-u+1):(e.splice(n-u,u,[T,t],[_,a]),n=n-u+2)}n!==0&&e[n-1][0]===S?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,i=0,t="",a="";break}}e[e.length-1][1]===""&&e.pop();var O=!1;for(n=1;n<e.length-1;)e[n-1][0]===S&&e[n+1][0]===S&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),O=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),O=!0)),n++;O&&p(e,r)}H("diff_cleanupMerge",p);function X(e){return e>=55296&&e<=56319}function k(e){return e>=56320&&e<=57343}function L(e){return k(e.charCodeAt(0))}function $(e){return X(e.charCodeAt(e.length-1))}function J(e){for(var r=[],n=0;n<e.length;n++)e[n][1].length>0&&r.push(e[n]);return r}function Q(e,r,n,i){return $(e)||L(i)?null:J([[S,e],[T,r],[_,n],[S,i]])}function z(e,r,n){var i=typeof n=="number"?{index:n,length:0}:n.oldRange,l=typeof n=="number"?null:n.newRange,t=e.length,a=r.length;if(i.length===0&&(l===null||l.length===0)){var s=i.index,o=e.slice(0,s),v=e.slice(s),m=l?l.index:null;e:{var u=s+a-t;if(m!==null&&m!==u)break e;if(u<0||u>a)break e;var O=r.slice(0,u),F=r.slice(u);if(F!==v)break e;var y=Math.min(s,u),R=o.slice(0,y),B=O.slice(0,y);if(R!==B)break e;var b=o.slice(y),d=O.slice(y);return Q(R,b,d,v)}e:{if(m!==null&&m!==s)break e;var w=s,O=r.slice(0,w),F=r.slice(w);if(O!==o)break e;var E=Math.min(t-w,a-w),M=v.slice(v.length-E),I=F.slice(F.length-E);if(M!==I)break e;var b=v.slice(0,v.length-E),d=F.slice(0,F.length-E);return Q(o,b,d,M)}}if(i.length>0&&l&&l.length===0){e:{var R=e.slice(0,i.index),M=e.slice(i.index+i.length),y=R.length,E=M.length;if(a<y+E)break e;var B=r.slice(0,y),I=r.slice(a-E);if(R!==B||M!==I)break e;var b=e.slice(y,t-E),d=r.slice(y,a-E);return Q(R,b,d,M)}}return null}function f(e,r,n){return P(e,r,n,!0)}return H("diff",f),{setters:[],execute:function(){T=-1,_=1,S=0,f.INSERT=_,f.DELETE=T,f.EQUAL=S}}}),G.register("codeBox",["diff"],function(H,W){"use strict";var T,_,S,C=W&&W.id;return{setters:[function(P){T=P}],execute:function(){_=async P=>new Promise(function(h,g){const c=document.createElement("script");c.src=P,c.onload=h,c.onerror=g,document.head.appendChild(c)}),H("run",S=async P=>{await _("https://unpkg.com/@babel/standalone@7.12.4/babel.min.js"),await _("https://unpkg.com/react@17.0.1/umd/react.production.min.js"),await _("https://unpkg.com/react-dom@17.0.1/umd/react-dom.production.min.js"),await _("https://unpkg.com/interactjs@1.10.0/dist/interact.min.js");const h=/import/gi,g="///";setTimeout(()=>J(),100);let c="";const j=f=>window.Babel.transform(f,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code.replace(h,g),D=async f=>{const e=new Function("transpileCode",`return function(){ ${f} }`)(),r={codeTranspiled:f,code:c},n=JSON.stringify(r),i=new Request("https://my-ts-project.zed-vision.workers.dev",{body:n,method:"POST",headers:{"content-type":"application/json;charset=UTF-8"}}),l=await fetch(i),{hash:t}=await l.json();try{const a=window.localStorage,s=a.getItem("codeBoXHash");a.setItem("codeBoXHash",t),a.setItem(t,c),location.hash=t}catch(a){console.log("no Localstorage")}e()};let A=0,p="",X="",k=0,L="";(async()=>{const f=z();c=f,L=f;const e=await P({language:"typescript",code:f,onChange:r=>{p=r;const n=async i=>{if(k===1)return;k=1;const l=await $(e),t=document.getElementById("error");try{if(k=0,i!==p)return;if(l&&l.length){if(p!=i)return;if(X===i)return;document.getElementById("root").classList.add("almosthidden");const a=T.diff(c,i);if(console.log(a),a.length<=3){L=i,window.monaco.editor.setTheme("hc-black");return}t.innerHTML=errors[0].messageText,document.getElementById("root").style.setProperty("dispay","none"),t.style.display="block",X=i,window.monaco.editor.setTheme("vs-light"),setTimeout(()=>{window.monaco.editor.setTheme("hc-black")},A++);return}c=i,t.style.display="none",window.monaco.editor.setTheme("vs-dark"),document.getElementById("root").classList.remove("almosthidden"),A=0,k=0,D(j(i))}catch(a){if(k=0,i!==p)return;window.monaco.editor.setTheme("vs-light"),setTimeout(()=>{window.monaco.editor.setTheme("hc-black")},10),console.error(a)}};if(!k)n(p);else{const i=r,l=setInterval(()=>{(i!==p||!k)&&clearInterval(l),k||n(p)},100)}}})})(),D(j(z())),document.getElementById("root").setAttribute("style","display:block");async function $(f){const e=f.getModel("file:///main.tsx"),r=await window.monaco.languages.typescript.getTypeScriptWorker(),n=e?.uri;if(!n)return;const i=await(await r(n)).getSemanticDiagnostics("file:///main.tsx"),l=await(await r(n)).getCompilerOptionsDiagnostics("file:///main.tsx"),t=await(await r(n)).getSyntacticDiagnostics("file:///main.tsx");return[...i,...l,...t]}const J=()=>{window.interact(".draggable").draggable({inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})],autoScroll:!1,listeners:{move:Q}})};function Q(f){var e=f.target,r=(parseFloat(e.getAttribute("data-x"))||0)+f.dx,n=(parseFloat(e.getAttribute("data-y"))||0)+f.dy;e.style.webkitTransform=e.style.transform="translate("+r+"px, "+n+"px)",e.setAttribute("data-x",r),e.setAttribute("data-y",n)}function z(){const f=window.localStorage.getItem("codeBoXHash");return window.localStorage.getItem(location.hash.substring(1))||window.localStorage.getItem(f)||window.localStorage.getItem("STARTER")}})}}});const V=K("codeBox",!1);export const run=V.run;
