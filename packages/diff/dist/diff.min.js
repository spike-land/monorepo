const o=async t=>Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",typeof t=="string"?new TextEncoder().encode(t):t)).slice(0,4)).map(n=>("00"+n.toString(16)).slice(-2)).join(""),f=async(t,n)=>{const r=o(t),s=diff(t,n);return{b:await r,c:s.map(e=>e.added?e.value:e.removed?-e.count:e.count)}};export{f as diff};export const isDiff=t=>{if(t.length<10)return!1;const n=[...t.slice(0,8)].filter(s=>s<"0"||s>"f").length===0,r=t.slice(8);if(n&&r[0]==="["&&r[r.length-1]==="]")try{return JSON.parse(r).length>1}catch{return!1}return!1},assemble=(t,n)=>{const r=JSON.parse(n);let s=t.slice(),e="";return r.forEach(c=>{if(Number(c)===c){const i=Math.abs(c),a=s.slice(0,i);s=s.slice(i),c>0&&(e+=String(a))}else e+=String(c)}),e};
