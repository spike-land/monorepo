{"version":3,"file":"emotion-cache.modern.js","sources":["../../../node_modules/@zedvision/emotion-sheet/dist/emotion-sheet.browser.esm.js","../src/stylis-plugins.js","../src/index.js","../../../node_modules/@emotion/weak-memoize/dist/weak-memoize.browser.esm.js","../../../node_modules/@emotion/memoize/dist/emotion-memoize.browser.esm.js"],"sourcesContent":["/*\n\nBased off glamor's StyleSheet, thanks Sunil ❤️\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@zedvision/emotion-sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        before = _this.prepend ? _this.container.firstChild : _this.before;\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isImportRule = rule.charCodeAt(0) === 64 && rule.charCodeAt(1) === 105;\n\n      if (isImportRule && this._alreadyInsertedOrderInsensitiveRule) {\n        // this would only cause problem in speedy mode\n        // but we don't want enabling speedy to affect the observable behavior\n        // so we report this error at all times\n        console.error(\"You're attempting to insert the following rule:\\n\" + rule + '\\n\\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules.');\n      }\n      this._alreadyInsertedOrderInsensitiveRule = this._alreadyInsertedOrderInsensitiveRule || !isImportRule;\n    }\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production' && !/:(-moz-placeholder|-ms-input-placeholder|-moz-read-write|-moz-read-only){/.test(rule)) {\n          console.error(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._alreadyInsertedOrderInsensitiveRule = false;\n    }\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","import {\n  compile,\n  alloc,\n  dealloc,\n  next,\n  delimit,\n  token,\n  char,\n  from,\n  identifier,\n  peek,\n  position,\n} from 'stylis'\n\nconst last = (arr) => (arr.length ? arr[arr.length - 1] : null)\n\nconst toRules = (parsed, points) => {\n  // pretend we've started with a comma\n  let index = -1\n  let character = 44\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1\n        }\n        parsed[index] += identifier(position - 1)\n        break\n      case 2:\n        parsed[index] += delimit(character)\n        break\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : ''\n          points[index] = parsed[index].length\n          break\n        }\n      // fallthrough\n      default:\n        parsed[index] += from(character)\n    }\n  } while ((character = next()))\n\n  return parsed\n}\n\nconst getRules = (value, points) => dealloc(toRules(alloc(value), points))\n\n// WeakSet would be more appropriate, but only WeakMap is supported in IE11\nconst fixedElements = /* #__PURE__ */ new WeakMap()\n\nexport let compat = (element) => {\n  if (\n    element.type !== 'rule' ||\n    !element.parent ||\n    // .length indicates if this rule contains pseudo or not\n    !element.length\n  ) {\n    return\n  }\n\n  let { value, parent } = element\n  let isImplicitRule =\n    element.column === parent.column && element.line === parent.line\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent\n    if (!parent) return\n  }\n\n  // short-circuit for the simplest case\n  if (\n    element.props.length === 1 &&\n    value.charCodeAt(0) !== 58 /* colon */ &&\n    !fixedElements.get(parent)\n  ) {\n    return\n  }\n\n  // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n  if (isImplicitRule) {\n    return\n  }\n\n  fixedElements.set(element, true)\n\n  const points = []\n  const rules = getRules(value, points)\n  const parentRules = parent.props\n\n  for (let i = 0, k = 0; i < rules.length; i++) {\n    for (let j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i]\n        ? rules[i].replace(/&\\f/g, parentRules[j])\n        : `${parentRules[j]} ${rules[i]}`\n    }\n  }\n}\n\nexport let removeLabel = (element) => {\n  if (element.type === 'decl') {\n    var value = element.value\n    if (\n      // charcode for l\n      value.charCodeAt(0) === 108 &&\n      // charcode for b\n      value.charCodeAt(2) === 98\n    ) {\n      // this ignores label\n      element.return = ''\n      element.value = ''\n    }\n  }\n}\n\nconst ignoreFlag =\n  'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason'\n\nconst isIgnoringComment = (element) =>\n  !!element &&\n  element.type === 'comm' &&\n  element.children.indexOf(ignoreFlag) > -1\n\nexport let createUnsafeSelectorsAlarm = (cache) => (\n  element,\n  index,\n  children\n) => {\n  if (element.type !== 'rule') return\n\n  const unsafePseudoClasses = element.value.match(\n    /(:first|:nth|:nth-last)-child/g\n  )\n\n  if (unsafePseudoClasses && cache.compat !== true) {\n    const prevElement = index > 0 ? children[index - 1] : null\n    if (prevElement && isIgnoringComment(last(prevElement.children))) {\n      return\n    }\n    unsafePseudoClasses.forEach((unsafePseudoClass) => {\n      console.error(\n        `The pseudo class \"${unsafePseudoClass}\" is potentially unsafe when doing server-side rendering. Try changing it to \"${\n          unsafePseudoClass.split('-child')[0]\n        }-of-type\".`\n      )\n    })\n  }\n}\n\nlet isImportRule = (element) =>\n  element.type.charCodeAt(1) === 105 && element.type.charCodeAt(0) === 64\n\nconst isPrependedWithRegularRules = (index, children) => {\n  for (let i = index - 1; i >= 0; i--) {\n    if (!isImportRule(children[i])) {\n      return true\n    }\n  }\n  return false\n}\n\n// use this to remove incorrect elements from further processing\n// so they don't get handed to the `sheet` (or anything else)\n// as that could potentially lead to additional logs which in turn could be overhelming to the user\nconst nullifyElement = (element) => {\n  element.type = ''\n  element.value = ''\n  element.return = ''\n  element.children = ''\n  element.props = ''\n}\n\nexport let incorrectImportAlarm = (element, index, children) => {\n  if (!isImportRule(element)) {\n    return\n  }\n\n  if (element.parent) {\n    console.error(\n      \"`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles.\"\n    )\n    nullifyElement(element)\n  } else if (isPrependedWithRegularRules(index, children)) {\n    console.error(\n      \"`@import` rules can't be after other rules. Please put your `@import` rules before your other rules.\"\n    )\n    nullifyElement(element)\n  }\n}\n","// @flow\nimport { StyleSheet } from '@zedvision/emotion-sheet'\nimport { type EmotionCache, type SerializedStyles } from '@zedvision/emotion-utils'\nimport {\n  serialize,\n  compile,\n  middleware,\n  rulesheet,\n  stringify,\n  prefixer,\n  COMMENT,\n} from 'stylis'\nimport weakMemoize from '@zedvision/emotion-weak-memoize'\nimport memoize from '@zedvision/emotion-memoize'\nimport {\n  compat,\n  removeLabel,\n  createUnsafeSelectorsAlarm,\n  incorrectImportAlarm,\n} from './stylis-plugins'\nimport type { StylisPlugin } from './types'\n\nlet isBrowser = typeof document !== 'undefined'\n\nexport type Options = {\n  nonce?: string,\n  stylisPlugins?: StylisPlugin[],\n  key: string,\n  container?: HTMLElement,\n  speedy?: boolean,\n  prepend?: boolean,\n}\n\nlet getServerStylisCache = isBrowser\n  ? undefined\n  : weakMemoize(() =>\n      memoize(() => {\n        let cache = {}\n        return (name) => cache[name]\n      })\n    )\n\nconst defaultStylisPlugins = [prefixer]\n\nlet createCache = (options: Options): EmotionCache => {\n  let key = options.key\n\n  if (process.env.NODE_ENV !== 'production' && !key) {\n    throw new Error(\n      \"You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\\n\" +\n        `If multiple caches share the same key they might \"fight\" for each other's style elements.`\n    )\n  }\n\n  if (isBrowser && key === 'css') {\n    const ssrStyles = document.querySelectorAll(\n      `style[data-emotion]:not([data-s])`\n    )\n    // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to\n    Array.prototype.forEach.call(ssrStyles, (node: HTMLStyleElement) => {\n      ;((document.head: any): HTMLHeadElement).appendChild(node)\n      node.setAttribute('data-s', '')\n    })\n  }\n\n  const stylisPlugins = options.stylisPlugins || defaultStylisPlugins\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\n        `Emotion key must only contain lower case alphabetical characters and - but \"${key}\" was passed`\n      )\n    }\n  }\n  let inserted = {}\n  // $FlowFixMe\n  let container: HTMLElement\n  const nodesToHydrate = []\n  if (isBrowser) {\n    container = options.container || ((document.head: any): HTMLHeadElement)\n\n    Array.prototype.forEach.call(\n      document.querySelectorAll(`style[data-emotion]`),\n      (node: HTMLStyleElement) => {\n        const attrib = ((node.getAttribute(`data-emotion`): any): string).split(\n          ' '\n        )\n        if (attrib[0] !== key) {\n          return\n        }\n        // $FlowFixMe\n        for (let i = 1; i < attrib.length; i++) {\n          inserted[attrib[i]] = true\n        }\n        nodesToHydrate.push(node)\n      }\n    )\n  }\n\n  let insert: (\n    selector: string,\n    serialized: SerializedStyles,\n    sheet: StyleSheet,\n    shouldCache: boolean\n  ) => string | void\n\n  const omnipresentPlugins = [compat, removeLabel]\n\n  if (process.env.NODE_ENV !== 'production') {\n    omnipresentPlugins.push(\n      createUnsafeSelectorsAlarm({\n        get compat() {\n          return cache.compat\n        },\n      }),\n      incorrectImportAlarm\n    )\n  }\n\n  if (isBrowser) {\n    let currentSheet\n\n    const finalizingPlugins = [\n      stringify,\n      process.env.NODE_ENV !== 'production'\n        ? (element) => {\n            if (!element.root) {\n              if (element.return) {\n                currentSheet.insert(element.return)\n              } else if (element.value && element.type !== COMMENT) {\n                // insert empty rule in non-production environments\n                // so @emotion/jest can grab `key` from the (JS)DOM for caches without any rules inserted yet\n                currentSheet.insert(`${element.value}{}`)\n              }\n            }\n          }\n        : rulesheet((rule) => {\n            currentSheet.insert(rule)\n          }),\n    ]\n\n    const serializer = middleware(\n      omnipresentPlugins.concat(stylisPlugins, finalizingPlugins)\n    )\n    const stylis = (styles) => serialize(compile(styles), serializer)\n\n    insert = (\n      selector: string,\n      serialized: SerializedStyles,\n      sheet: StyleSheet,\n      shouldCache: boolean\n    ): void => {\n      currentSheet = sheet\n      if (\n        process.env.NODE_ENV !== 'production' &&\n        serialized.map !== undefined\n      ) {\n        currentSheet = {\n          insert: (rule: string) => {\n            sheet.insert(rule + ((serialized.map: any): string))\n          },\n        }\n      }\n\n      stylis(selector ? `${selector}{${serialized.styles}}` : serialized.styles)\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true\n      }\n    }\n  } else {\n    const finalizingPlugins = [stringify]\n    const serializer = middleware(\n      omnipresentPlugins.concat(stylisPlugins, finalizingPlugins)\n    )\n    const stylis = (styles) => serialize(compile(styles), serializer)\n\n    // $FlowFixMe\n    let serverStylisCache = getServerStylisCache(stylisPlugins)(key)\n    let getRules = (selector: string, serialized: SerializedStyles): string => {\n      let name = serialized.name\n      if (serverStylisCache[name] === undefined) {\n        serverStylisCache[name] = stylis(\n          selector ? `${selector}{${serialized.styles}}` : serialized.styles\n        )\n      }\n      return serverStylisCache[name]\n    }\n    insert = (\n      selector: string,\n      serialized: SerializedStyles,\n      sheet: StyleSheet,\n      shouldCache: boolean\n    ): string | void => {\n      let name = serialized.name\n      let rules = getRules(selector, serialized)\n      if (cache.compat === undefined) {\n        // in regular mode, we don't set the styles on the inserted cache\n        // since we don't need to and that would be wasting memory\n        // we return them so that they are rendered in a style tag\n        if (shouldCache) {\n          cache.inserted[name] = true\n        }\n        if (\n          // using === development instead of !== production\n          // because if people do ssr in tests, the source maps showing up would be annoying\n          process.env.NODE_ENV === 'development' &&\n          serialized.map !== undefined\n        ) {\n          return rules + serialized.map\n        }\n        return rules\n      } else {\n        // in compat mode, we put the styles on the inserted cache so\n        // that emotion-server can pull out the styles\n        // except when we don't want to cache it which was in Global but now\n        // is nowhere but we don't want to do a major right now\n        // and just in case we're going to leave the case here\n        // it's also not affecting client side bundle size\n        // so it's really not a big deal\n\n        if (shouldCache) {\n          cache.inserted[name] = rules\n        } else {\n          return rules\n        }\n      }\n    }\n  }\n\n  const cache: EmotionCache = {\n    key,\n    sheet: new StyleSheet({\n      key,\n      container: ((container: any): HTMLElement),\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n    }),\n    nonce: options.nonce,\n    inserted,\n    registered: {},\n    insert,\n  }\n\n  cache.sheet.hydrate(nodesToHydrate)\n\n  return cache\n}\n\nexport default createCache\n","var weakMemoize = function weakMemoize(func) {\n  // $FlowFixMe flow doesn't include all non-primitive types as allowed for weakmaps\n  var cache = new WeakMap();\n  return function (arg) {\n    if (cache.has(arg)) {\n      // $FlowFixMe\n      return cache.get(arg);\n    }\n\n    var ret = func(arg);\n    cache.set(arg, ret);\n    return ret;\n  };\n};\n\nexport default weakMemoize;\n","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n"],"names":["StyleSheet","options","_this","this","_insertTag","tag","container","insertBefore","tags","length","prepend","firstChild","before","nextSibling","push","isSpeedy","undefined","speedy","process","env","NODE_ENV","ctr","nonce","key","_proto","prototype","hydrate","nodes","forEach","insert","rule","document","createElement","setAttribute","appendChild","createTextNode","createStyleElement","isImportRule","charCodeAt","_alreadyInsertedOrderInsensitiveRule","console","error","sheet","i","styleSheets","ownerNode","sheetForTag","insertRule","cssRules","e","test","flush","parentNode","removeChild","fixedElements","WeakMap","compat","element","type","parent","value","isImplicitRule","column","line","props","get","set","points","rules","dealloc","parsed","index","character","token","peek","identifier","position","delimit","from","next","toRules","alloc","getRules","parentRules","k","j","replace","removeLabel","return","nullifyElement","children","incorrectImportAlarm","isPrependedWithRegularRules","isBrowser","getServerStylisCache","func","memoize","fn","cache","name","Object","create","arg","has","ret","defaultStylisPlugins","prefixer","Error","ssrStyles","querySelectorAll","Array","call","node","head","stylisPlugins","inserted","nodesToHydrate","attrib","getAttribute","split","omnipresentPlugins","unsafePseudoClasses","match","prevElement","indexOf","isIgnoringComment","arr","unsafePseudoClass","createUnsafeSelectorsAlarm","currentSheet","finalizingPlugins","stringify","root","COMMENT","rulesheet","serializer","middleware","concat","stylis","styles","serialize","compile","selector","serialized","shouldCache","map","serverStylisCache","registered"],"mappings":"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"}