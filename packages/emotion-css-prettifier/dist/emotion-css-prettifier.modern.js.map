{"version":3,"file":"emotion-css-prettifier.modern.js","sources":["../src/index.js"],"sourcesContent":["import memoize from '@zedvision/emotion-memoize'\nimport { compile, serialize, combine, tokenize } from 'stylis'\n\n// adjusted https://github.com/thysultan/stylis.js/blob/68b9043427c177b95a0fd6a2a13f5b636bf80236/src/Serializer.js#L26-L34\nconst prettyStringify = memoize(\n  (indentation) => (element, index, children, callback) => {\n    switch (element.type) {\n      case '@import':\n        return (element.return = element.return || element.value) + '\\n\\n'\n      case 'decl':\n        return (element.return =\n          element.return || `${element.props}: ${element.children};\\n`)\n      case 'comm':\n        return ''\n      case '@media':\n      case '@supports':\n        element.value = combine(\n          tokenize(element.value),\n          (value, index, children) => {\n            // (\n            if (value.charCodeAt(0) === 40 && children[index - 1] !== ' ') {\n              return ' ' + value\n            }\n            return value\n          }\n        )\n        break\n      case 'rule':\n        element.value = element.props.join(\n          element.root &&\n            (element.root.type === '@keyframes' ||\n              element.root.type === '@-webkit-keyframes')\n            ? ', '\n            : ',\\n'\n        )\n    }\n\n    return (children = serialize(element.children, callback)).length\n      ? (element.return =\n          element.value +\n          ' {\\n' +\n          children.trim().replace(/^/gm, indentation).replace(/^\\s+$/gm, '') +\n          '\\n}\\n\\n')\n      : ''\n  }\n)\n\nexport default function prettify(styles, indentation = '  ') {\n  return serialize(compile(styles), prettyStringify(indentation)).trim()\n}\n"],"names":["prettyStringify","memoize","indentation","element","index","children","callback","type","value","props","combine","tokenize","charCodeAt","join","root","serialize","length","trim","replace","prettify","styles","compile"],"mappings":"qHAIA,IAAMA,EAAkBC,EACtB,SAACC,mBAAiBC,EAASC,EAAOC,EAAUC,GAC1C,OAAQH,EAAQI,MACd,IAAK,UACH,OAAQJ,SAAiBA,UAAkBA,EAAQK,OAAS,OAC9D,IAAK,OACH,OAAQL,SACNA,UAAqBA,EAAQM,WAAUN,EAAQE,eACnD,IAAK,OACH,MAAO,GACT,IAAK,SACL,IAAK,YACHF,EAAQK,MAAQE,EACdC,EAASR,EAAQK,OACjB,SAACA,EAAOJ,EAAOC,GAEb,OAA4B,KAAxBG,EAAMI,WAAW,IAAqC,MAAxBP,EAASD,EAAQ,GAC1C,IAAMI,EAERA,IAGX,MACF,IAAK,OACHL,EAAQK,MAAQL,EAAQM,MAAMI,MAC5BV,EAAQW,MACiB,eAAtBX,EAAQW,KAAKP,MACU,uBAAtBJ,EAAQW,KAAKP,KAEb,MADA,MAKV,OAAQF,EAAWU,EAAUZ,EAAQE,SAAUC,IAAWU,OACrDb,SACCA,EAAQK,MACR,OACAH,EAASY,OAAOC,QAAQ,MAAOhB,GAAagB,QAAQ,UAAW,IAC/D,UACF,eAIgBC,EAASC,EAAQlB,GACvC,gBADuCA,IAAAA,EAAc,MAC9Ca,EAAUM,EAAQD,GAASpB,EAAgBE,IAAce"}